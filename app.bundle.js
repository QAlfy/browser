!function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],h=0,d=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={0:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([411,1]),s()}({109:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrokerApi=t.QalfyBrowserEvents=t.SessionVisibility=void 0;const i=s(162),n=s(356);!function(e){e[e.PUBLIC=1]="PUBLIC",e[e.PRIVATE=2]="PRIVATE",e[e.GROUP=3]="GROUP"}(t.SessionVisibility||(t.SessionVisibility={})),function(e){e.CLIENT_CONNECTION="qalfyClientConnection",e.PEER_DESCRIPTION="qalfyPeerDescription",e.PLAY_REQUEST="qalfyPlayRequest",e.BROWSER_DESCRIPTION="qalfyBrowserDescription"}(t.QalfyBrowserEvents||(t.QalfyBrowserEvents={}));let a=(()=>{class e extends n.GenericRestClient{constructor(e=null){super(i.api.broker),this.token=e}setToken(e=null){this.token=e}static getInstance(t=null){return e.instance||(e.instance=new e(t)),e.instance.setToken(t),e.instance}getOptions(){return{headers:{"qalfy-token":this.token},withCredentials:!0}}browse(e,t){return this.performApiPost(`browse/${e.id}/${e.token}`,t,this.getOptions())}updateSession(e,t){return this.performApiPut(`session/update/${e.id}/${e.token}`,t,this.getOptions())}getSession(e){return this.performApiGet(`session/${e.id}/${e.token}`,this.getOptions())}getSessionByAlias(e){return this.performApiGet("get/"+e,this.getOptions())}removeSession(e){return this.performApiGet(`session/remove/${e.id}/${e.token}`,this.getOptions())}getSessions(){return this.performApiGet("sessions",this.getOptions())}newSession(){return this.performApiGet("session/new",this.getOptions())}endSession(e){return this.performApiGet(`session/end/${e.id}/${e.token}`,this.getOptions())}play(e,t){return this.performApiPost(`play/${e.id}/${e.token}`,{detail:t},this.getOptions())}screenshot(e,t){return this.performApiGet(`screenshot/${e.id}/${e.token}/${t}`,this.getOptions())}runJs(e,t){return this.performApiPost(`runJs/${e.id}/${e.token}`,{code:t},this.getOptions())}userLookup(e){return this.performApiGet("userLookup/"+e,this.getOptions())}}return e.instance=null,e})();t.BrokerApi=a},130:function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.mouseMove=t.closeExchange=t.initExchange=t.initSignaling=t.recList=t.saveRecording=t.signalingStarted=t.recListReady=t.recordingSaved=t.exchangeEnabled=t.closingExchange=t.initializingExchange=void 0;const n=s(32),a=s(700),r=s(257),o=s(61),l=s(161),c=s(194),u=s(76);t.initializingExchange=o.createSwitchAction("EXCHANGE_INIT",n.__),t.closingExchange=o.createSwitchAction("EXCHANGE_CLOSE",n.__),t.exchangeEnabled=o.createSwitchAction("EXCHANGE_ENABLED",n.__),t.recordingSaved=o.createAction("RECORDING_SAVED",n.identity(n.__),n.always(null)),t.recListReady=o.createAction("REC_LIST_READY",n.identity(n.__),n.always(null)),t.signalingStarted=o.createSwitchAction("SIGNALING_STARTED",n.__);let h=new Map;function d(){return e=>{var s;null===(s=h.get("recList"))||void 0===s||s.unsubscribe(),h.set("recList",r.Exchange.getInstance().recList().subscribe(s=>{e(t.recListReady(s))}))}}t.saveRecording=function(e){return s=>{var i;null===(i=h.get("saveRecording"))||void 0===i||i.unsubscribe(),h.set("saveRecording",r.Exchange.getInstance().saveRecording(e).subscribe(({type:e,data:i})=>{e===r.ExchangeMsgType.REC_SESSION_SAVED&&(s(t.recordingSaved(i)),s(u.recModalOpen(!1)),s(d()))}))}},t.recList=d,t.initSignaling=function(){return(e,s)=>{let i=n.path(["user"],s());i=i||{id:a.v4(),token:a.v4()};const o=n.path(["session"],s());r.Exchange.getInstance().signaling(i,o).then(()=>e(t.signalingStarted(!0))).catch(s=>{console.error(s),e(t.signalingStarted(!1))})}},t.initExchange=function(e,s){return(o,f)=>i(this,void 0,void 0,(function*(){var i;console.info("initializing exchange"),o(t.initializingExchange(!0));let p=e;try{p||(p=n.path(["user"],f()),p=p||{id:a.v4(),token:a.v4()},o(l.loginSuccess(p)));yield r.Exchange.getInstance().connect(p,s);null===(i=h.get("connectionAvailable"))||void 0===i||i.unsubscribe(),h.set("connectionAvailable",r.Exchange.getInstance().connectionAvailable().subscribe(e=>{var s;e&&(o(t.exchangeEnabled(!0)),o(t.initializingExchange(!1)),o(c.tabsFetch()),o(d()),null===(s=h.get("isRecording"))||void 0===s||s.unsubscribe(),h.set("isRecording",r.Exchange.getInstance().recording().subscribe(({type:e,data:t})=>{e===r.ExchangeMsgType.TAB_RECORD&&o(u.recording(t))})))}))}catch(e){console.error(e),o(t.exchangeEnabled(!1)),o(t.initializingExchange(!1))}}))},t.closeExchange=function(){return e=>i(this,void 0,void 0,(function*(){e(t.closingExchange(!0)),yield r.Exchange.getInstance().closeSignaling(),yield r.Exchange.getInstance().close(),e(t.signalingStarted(!1)),e(c.tabsFetchSuccess([])),e(t.exchangeEnabled(!1)),e(t.initializingExchange(!1)),e(t.closingExchange(!1))}))},t.mouseMove=function(e){return t=>{r.Exchange.getInstance().mouseMove(e)}}},161:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.register=t.login=t.logoutInProgress=t.logoutSuccess=t.loginSuccess=t.logoutHasErrored=t.loginHasErrored=t.registerHasErrored=void 0;const n=s(196),a=s(32),r=i(s(585)),o=s(191),l=s(586),c=s(109),u=s(61),h=s(130),d=s(163),f=s(76);function p(e,s){return(i,c)=>{const u=l.AuthApi.getInstance();n.fork(e=>{i(t.loginHasErrored(e))})(a.identity)(o.toFuture(u.login.bind(u))(e,s).pipe(n.chain(e=>{const s=a.pick(["id","username","token"],e);return i(t.loginSuccess(s)),i(f.cursorColor(r.default({luminosity:"dark",hue:"random",format:"hex"}))),n.resolve(s)})))}}t.registerHasErrored=u.createAction("REGISTER_HAS_ERRORED",a.identity(a.__),a.identity(a.__)),t.loginHasErrored=u.createAction("LOGIN_HAS_ERRORED",a.identity(a.__),a.identity(a.__)),t.logoutHasErrored=u.createAction("LOGOUT_HAS_ERRORED",a.identity(a.__),a.identity(a.__)),t.loginSuccess=u.createAction("LOGIN_SUCCESS",a.identity(a.__),a.always(null)),t.logoutSuccess=u.createAction("LOGOUT_SUCCESS",a.identity(a.__),a.always(null)),t.logoutInProgress=u.createSwitchAction("LOGOUT_IN_PROGRESS",a.__),t.login=p,t.register=function(e,s){return(i,r)=>{const c=l.AuthApi.getInstance();n.fork(e=>{i(t.registerHasErrored(e))})(a.identity)(o.toFuture(c.register.bind(c))(e,s).pipe(n.chain(t=>{const r=a.pick(["id","username","token"],t);return i(p(e,s)),n.resolve(r)})))}},t.logout=function(e){return(e,s)=>{const i=l.AuthApi.getInstance(a.path(["user","token"],s())),r=a.path(["session"],s()),u=e=>!a.isNil(e)&&a.includes(e.visibility,[c.SessionVisibility.PUBLIC,c.SessionVisibility.GROUP])&&e||null;e(t.logoutInProgress(!0)),n.fork(s=>{e(t.logoutSuccess(!1)),e(t.logoutHasErrored(s)),e(t.logoutInProgress(!1))})(a.identity)(n.parallel(1)([a.isNil(u(r))&&n.encase(e)(d.endSession(r))||n.resolve(null),o.toFuture(i.logout.bind(i))().pipe(n.chain(()=>n.encase(e)(t.loginSuccess(null)))).pipe(n.chain(()=>n.encase(e)(h.closeExchange()))).pipe(n.chain(()=>n.encase(e)(d.sessionIsAvailable(u(r))))).pipe(n.chain(()=>n.encase(e)(d.sessionsReady(u(r)&&[u(r)]||[])))).pipe(n.chain(()=>n.encase(e)(d.sessionsAreLoading(!1)))).pipe(n.chain(()=>n.encase(e)(d.sessionHasErrored(!1)))).pipe(n.chain(()=>n.encase(e)(h.initializingExchange(!1)))).pipe(n.chain(()=>n.encase(e)(t.logoutInProgress(!1)))).pipe(n.chain(()=>n.encase(e)(t.logoutSuccess(!0))))]))}}},162:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.api=t.coturnTurnHost=t.coturnStunHost=t.coturnPwd=t.coturnUser=t.wsProxyPort=t.exchangeApiKey=t.exchangePath=t.exchangePort=t.exchangeHost=t.monitorPath=t.brokerPort=t.brokerHost=t.cdpPort=t.cdpHost=void 0,t.cdpHost="172.18.0.2",t.cdpPort="8001",t.brokerHost="automation.qalfy.com",t.brokerPort="",t.monitorPath="/monitor",t.exchangeHost="automation.qalfy.com",t.exchangePort="",t.exchangePath="/exchange",t.exchangeApiKey="XexX84cHXIB+d5mq",t.wsProxyPort="8000",t.coturnUser="qalfy",t.coturnPwd="aENnHgeF2K7kDoQK",t.coturnStunHost="stun.qalfy.com",t.coturnTurnHost="turn.qalfy.com",t.api={broker:`https://${t.brokerHost}${t.brokerPort&&":"+t.brokerPort||""}/`,wsProxy:`wss://${t.brokerHost}${t.brokerPort&&":"+t.brokerPort||""}`}},163:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.endSession=t.getSessionByAlias=t.getSession=t.getSessions=t.browse=t.updateSession=t.runJs=t.removeSession=t.newSession=t.runningJs=t.browseHasFinished=t.browseIsStarting=t.sessionHasEnded=t.sessionIsEnding=t.sessionIsAvailable=t.sessionIsLoading=t.sessionHasErrored=t.sessionsAreLoading=t.sessionsReady=t.sessionUpdating=t.sessionRemove=t.createSession=void 0;const n=i(s(68)),a=s(32),r=s(109),o=s(196),l=s(61),c=s(76),u=s(161),h=s(260),d=s(194),f=s(191),p=s(130);function _(){return(e,s)=>{e(c.loading(!0)),e(t.sessionsAreLoading(!0));const i=a.path(["user"],s());r.BrokerApi.getInstance((null==i?void 0:i.token)||null).getSessions().then(s=>e(t.sessionsReady(s))).then(()=>e(c.loading(!1))).then(()=>e(t.sessionsAreLoading(!1))).catch(s=>{e(c.loading(!1)),e(t.sessionHasErrored(s)),e(t.sessionsAreLoading(!1)),e(t.sessionsReady([]))})}}t.createSession=l.createSwitchAction("SESSION_CREATING",a.__),t.sessionRemove=l.createSwitchAction("SESSION_REMOVE",a.__),t.sessionUpdating=l.createSwitchAction("SESSION_UPDATING",a.__),t.sessionsReady=l.createAction("SESSIONS_READY",a.identity(a.__),a.always(null)),t.sessionsAreLoading=l.createSwitchAction("SESSIONS_ARE_LOADING",a.__),t.sessionHasErrored=l.createAction("SESSION_HAS_ERRORED",a.identity(a.__),a.always(null)),t.sessionIsLoading=l.createSwitchAction("SESSION_IS_LOADING",a.__),t.sessionIsAvailable=l.createAction("SESSION_AVAILABLE_SUCCESS",a.identity(a.__),a.always(null)),t.sessionIsEnding=l.createSwitchAction("SESSION_IS_ENDING",a.__),t.sessionHasEnded=l.createSwitchAction("SESSION_HAS_ENDED",a.__),t.browseIsStarting=l.createSwitchAction("BROWSE_IS_STARTING",a.__),t.browseHasFinished=l.createAction("BROWSE_HAS_FINISHED",a.identity(a.__),a.always(null)),t.runningJs=l.createSwitchAction("RUNNING_JS",a.__),t.newSession=function(){return(e,s)=>{e(t.sessionIsLoading(!0)),e(t.createSession(!0)),e(c.loading(!0));const i=a.path(["user"],s());r.BrokerApi.getInstance((null==i?void 0:i.token)||null).newSession().then(s=>(e(t.createSession(!1)),e(t.sessionIsLoading(!1)),e(c.loading(!1)),window.location.href="/go/"+s.alias,s)).catch(s=>{e(c.loading(!1)),e(t.sessionHasErrored(s)),e(t.createSession(!1)),e(t.sessionIsLoading(!1)),401===s.statusCode&&e(u.logout(i))})}},t.removeSession=function(e){return(s,i)=>{s(t.sessionRemove(!0)),s(c.loading(!0));const n=a.path(["user"],i());r.BrokerApi.getInstance((null==n?void 0:n.token)||null).removeSession(e).then(e=>{s(t.sessionRemove(!1)),s(c.loading(!1));const n=a.find(a.propEq("default",!0))(a.path(["sessions"],i()));return window.location.href=n?"/go/"+n.alias:"/login",e}).catch(e=>{s(c.loading(!1)),s(t.sessionHasErrored(e)),s(t.sessionRemove(!1)),401===e.statusCode&&s(u.logout(n))})}},t.runJs=function(e,s,i){return(n,o)=>{n(t.runningJs(!0)),n(c.loading(!0));const l=a.path(["user"],o());r.BrokerApi.getInstance((null==l?void 0:l.token)||null).runJs(e,s).then(e=>(n(t.runningJs(!1)),i(e),e)).then(e=>{n(c.loading(!1))}).catch(e=>{n(c.loading(!1)),401===e.statusCode&&n(u.logout(l))})}},t.updateSession=function(e,s){return(i,n)=>{i(t.sessionUpdating(!0)),i(c.loading(!0));const o=a.path(["user"],n());r.BrokerApi.getInstance((null==o?void 0:o.token)||null).updateSession(e,s).then(e=>(i(t.sessionUpdating(!1)),i(_()),e)).then(e=>{i(t.sessionIsAvailable(e)),i(c.loading(!1))}).catch(e=>{i(c.loading(!1)),i(t.sessionHasErrored(e)),i(t.sessionUpdating(!1)),401===e.statusCode&&i(u.logout(o))})}},t.browse=function(e,s){return(i,n)=>{i(t.browseIsStarting(!0)),i(c.loading(!0));const o=a.path(["user"],n());r.BrokerApi.getInstance((null==o?void 0:o.token)||null).browse(e,s).then(e=>(i(t.browseIsStarting(!1)),e)).then(e=>{i(c.loading(!1)),window.location.href="/go/"+e.alias}).catch(e=>{i(c.loading(!1)),i(t.sessionHasErrored(e)),i(t.browseIsStarting(!1)),401===e.statusCode&&i(u.logout(o))})}},t.getSessions=_,t.getSession=function(e){return(s,i)=>{s(t.sessionIsLoading(!0)),s(c.loading(!0));const o=a.path(["user"],i());r.BrokerApi.getInstance((null==o?void 0:o.token)||null).getSession(e).then(e=>(s(t.sessionIsAvailable(e)),e)).then(()=>s(c.loading(!1))).then(()=>s(t.sessionIsLoading(!1))).then(()=>s(p.initSignaling())).catch(e=>{s(c.loading(!1)),s(t.sessionHasErrored(e)),s(t.sessionIsLoading(!1)),e.statusCode&&h.MessagerSubject.next({type:"error",msg:n.default.ui.notistack.sessionNotAvailable})})}},t.getSessionByAlias=function(e){return(s,i)=>{s(t.sessionIsLoading(!0)),s(c.loading(!0));const o=a.path(["user"],i());a.path(["sessions"],i()).filter(Boolean);r.BrokerApi.getInstance((null==o?void 0:o.token)||null).getSessionByAlias(e).then(e=>{s(t.sessionIsAvailable(e))}).then(()=>s(c.loading(!1))).then(()=>s(t.sessionIsLoading(!1))).then(()=>s(p.initSignaling())).catch(e=>{s(c.loading(!1)),s(t.sessionHasErrored(e)),s(t.sessionIsLoading(!1)),e.statusCode&&h.MessagerSubject.next({type:"error",msg:n.default.ui.notistack.sessionNotAvailable})})}},t.endSession=function(e){return(s,i)=>{if(e&&e.id){const n=e=>{s(c.loading(!1)),s(t.sessionHasErrored(e)),s(t.sessionIsEnding(!1))},l=r.BrokerApi.getInstance(a.path(["user","token"],i()));s(c.loading(!0)),s(t.sessionIsEnding(!0)),f.toFuture(l.endSession.bind(l))(e).pipe(o.chain(()=>o.encase(s)(c.loading(!1)))).pipe(o.chain(()=>o.encase(s)(t.sessionIsEnding(!1)))).pipe(o.chain(()=>o.encase(s)(t.sessionHasEnded(!0)))).pipe(o.chain(()=>o.encase(s)(d.tabsFetchSuccess([])))).pipe(o.chain(()=>o.encase(s)(t.sessionIsAvailable(null)))).pipe(o.chain(()=>o.encase(s)(p.closeExchange()))).pipe(o.chain(()=>a.path(["logoutInProgress"],i())&&o.resolve(!0)||o.encase(s)(_()))).pipe(o.fork(n)(a.identity))}else s(c.loading(!1)),s(t.sessionIsEnding(!1)),s(t.sessionHasEnded(!0)),s(t.sessionIsAvailable(null)),s(d.tabsFetchSuccess([]))}}},190:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(s(0)),c=o(s(562)),u=o(s(563)),h=o(s(74)),d=a(s(344));u.default.plugin((function(e,t,s,i){s.prototype.circlePath=function(e,t,s){let i="M"+e+","+t;return i+="m"+-s+",0",i+="a"+s+","+s+" 0 1,0 "+2*s+",0",i+="a"+s+","+s+" 0 1,0 "+-2*s+",0",this.path(i,e,t)}}));class f extends l.default.Component{constructor(e){var t;super(e),this.isLogoRendered=!1,this.isAnimRunning=!1,this.radius=null!==(t=e.radius)&&void 0!==t?t:d.LogoStyle.radius}componentDidMount(){this.loop()}componentDidUpdate(){this.loop()}loop(){return r(this,void 0,void 0,(function*(){if("number"==typeof this.props.loop)for(let e=1;e<=this.props.loop;e++)yield this.renderSvg(),yield c.default(1250);else if(!0===this.props.loop)for(;;)yield this.renderSvg(),yield c.default(1250)}))}renderSvg(){return new Promise(e=>{const t=.2*this.radius,s=this.radius/2,i=.4*s+s,n=s-1.5*t;if(this.isLogoRendered||(this.svg=u.default("#logo"),this.c1=this.svg.circle(s,s,s-t),this.c2=this.svg.circle(s,s,n),this.cPath=this.svg.circlePath(s,s,s-t).attr({fill:"none",stroke:"none"}),this.cPathLength=this.cPath.getTotalLength(),this.c1.attr({fill:"#bada5500",stroke:"#007B9C",strokeWidth:t}),this.c2.attr({fill:"#FF7600",cx:s,cy:s}),this.isLogoRendered=!0),!this.isAnimRunning){this.isAnimRunning=!0,this.c2.attr({r:n/2});const t=e=>{const t=this.cPath.getPointAtLength(e);this.c2.attr({cx:t.x,cy:t.y})};u.default.animate(this.cPathLength,i,t,800,mina.easeout,()=>{u.default.animate(i,0,t,650,mina.easein,()=>{u.default.animate(0,i,t,1e3,mina.bounce,()=>{this.c2.animate({r:n},500,mina.elastic,()=>{this.isAnimRunning=!1,e()})})})})}})}render(){const{classes:e}=this.props;return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"logo",style:{width:this.radius+"px",height:this.radius+"px"}})}}t.default=h.default(d.default)(f)},191:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toFuture=t.getHash=void 0;const n=i(s(179)),a=s(196);t.getHash=function(e){return n.default.sha1().update(e).digest("hex")},t.toFuture=e=>(...t)=>a.attemptP(()=>e(...t))},194:function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.tabsFetch=t.runJsInsideTab=t.debugList=t.close=t.forward=t.back=t.record=t.reload=t.navigate=t.activate=t.textSelected=t.debugListSuccess=t.tabsFetchSuccess=t.tabsHasErrored=void 0;const n=s(109),a=s(196),r=s(61),o=s(257),l=s(76),c=s(130),u=s(191),h=s(32);t.tabsHasErrored=r.createAction("TABS_HAS_ERRORED",h.identity(h.__),h.always(null)),t.tabsFetchSuccess=r.createAction("TABS_FETCH_SUCCESS",h.identity(h.__),h.always(null)),t.debugListSuccess=r.createAction("DEBUG_LIST_SUCCESS",h.identity(h.__),h.always(null)),t.textSelected=r.createAction("TEXT_SELECTED",h.identity(h.__),h.always(null)),t.activate=function(e){return t=>i(this,void 0,void 0,(function*(){e.active=!0,o.Exchange.getInstance().tabUpdate(e)}))};let d=new Map;function f(){return e=>i(this,void 0,void 0,(function*(){var s;null===(s=d.get("debugList"))||void 0===s||s.unsubscribe(),d.set("debugList",o.Exchange.getInstance().debugList().subscribe(s=>{e(t.debugListSuccess(s))}))}))}function p(){return e=>i(this,void 0,void 0,(function*(){var s,i;e(l.loading(!0)),null===(s=d.get("tabsFetch"))||void 0===s||s.unsubscribe(),d.set("tabsFetch",o.Exchange.getInstance().tabsFetch().subscribe(s=>{if(e(l.loading(!1)),0===s.length)return;const i=h.head(s.filter(e=>e.active));e(t.tabsFetchSuccess(s)),e(f()),i&&e(l.urlSet(i.url))})),null===(i=d.get("onSelection"))||void 0===i||i.unsubscribe(),d.set("onSelection",o.Exchange.getInstance().onSelection().subscribe(s=>{e(t.textSelected(s))}))}))}t.navigate=function(e,t){return s=>i(this,void 0,void 0,(function*(){s(l.loading(!0)),e.url=t,o.Exchange.getInstance().tabUpdate(e)}))},t.reload=function(e){return t=>i(this,void 0,void 0,(function*(){t(l.loading(!0)),o.Exchange.getInstance().tabReload(e)}))},t.record=function(e,t){return s=>i(this,void 0,void 0,(function*(){s(l.recording(t)),s(c.recordingSaved(!1)),s(l.recModalOpen(!1)),o.Exchange.getInstance().tabRecord(e,t)}))},t.back=function(e){return t=>i(this,void 0,void 0,(function*(){o.Exchange.getInstance().tabBack(e)}))},t.forward=function(e){return t=>i(this,void 0,void 0,(function*(){o.Exchange.getInstance().tabForward(e)}))},t.close=function(e,t){return t=>i(this,void 0,void 0,(function*(){var s;null===(s=d.get("tabClose"))||void 0===s||s.unsubscribe(),d.set("tabClose",o.Exchange.getInstance().tabClose(e).subscribe(()=>{t(p())}))}))},t.debugList=f,t.runJsInsideTab=function(e,s,i){return(r,o)=>{const l=n.BrokerApi.getInstance(h.path(["user","token"],o()));u.toFuture(l.runJs.bind(l))(e,s,i).pipe(a.chain(e=>a.resolve(e))).pipe(a.fork(e=>{r(t.tabsHasErrored(e))})(h.identity))}},t.tabsFetch=p},251:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(0)),a=i(s(252)),r=i(s(708));t.default=function(e){const{children:t,window:s}=e,i=r.default({target:s?s():void 0});return n.default.createElement(a.default,{appear:!1,direction:"down",in:!i},t)}},257:function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=e[s]&&function(t){return new Promise((function(i,n){(function(e,t,s,i){Promise.resolve(i).then((function(t){e({value:t,done:s})}),t)})(i,n,(t=e[s](t)).done,t.value)}))}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Exchange=t.Semaphore=t.ExchangeMsgType=void 0;const o=s(267),l=s(380),c=r(s(590)),u=r(s(605)),h=s(162),d=s(32);var f,p;!function(e){e[e.INIT=1]="INIT",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TABS_LIST=3]="TABS_LIST",e[e.TAB_CLOSE=4]="TAB_CLOSE",e[e.TAB_CLOSED=5]="TAB_CLOSED",e[e.TAB_RELOAD=6]="TAB_RELOAD",e[e.TAB_FORWARD=7]="TAB_FORWARD",e[e.TAB_BACK=8]="TAB_BACK",e[e.TAB_RECORD=9]="TAB_RECORD",e[e.REC_SESSION_SAVE=10]="REC_SESSION_SAVE",e[e.REC_SESSION_SAVED=11]="REC_SESSION_SAVED",e[e.DEBUG_LIST=12]="DEBUG_LIST",e[e.DEBUG_LIST_READY=13]="DEBUG_LIST_READY",e[e.TEXT_SELECTED=14]="TEXT_SELECTED",e[e.CLIENT_ENTER=15]="CLIENT_ENTER",e[e.CLIENT_EXITS=16]="CLIENT_EXITS",e[e.CLIENT_ERROR=17]="CLIENT_ERROR",e[e.DOWNLOAD_FILE=18]="DOWNLOAD_FILE",e[e.RECONNECT_CLIENT=19]="RECONNECT_CLIENT",e[e.MOVE_EVENT=20]="MOVE_EVENT",e[e.MISSING_NODES=21]="MISSING_NODES",e[e.REC_LIST=22]="REC_LIST",e[e.PLAYING=23]="PLAYING"}(f=t.ExchangeMsgType||(t.ExchangeMsgType={})),function(e){e.INIT="INIT",e.READY="READY",e.COMPLETE="COMPLETE",e.CLOSED="CLOSED"}(p=t.Semaphore||(t.Semaphore={}));let _=(()=>{var e,t,s,r,_,g,m,b,v;class w{constructor(){this.iceServers=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"},{urls:`turn:${h.coturnTurnHost}:3478?transport=tcp`,username:h.coturnUser,credential:h.coturnPwd},{urls:`stun:${h.coturnStunHost}:3478`}],e.set(this,new o.Subject),t.set(this,new o.BehaviorSubject([])),s.set(this,new o.BehaviorSubject([])),r.set(this,new o.BehaviorSubject({})),_.set(this,new o.BehaviorSubject({})),g.set(this,new o.BehaviorSubject([])),m.set(this,new o.BehaviorSubject(null)),b.set(this,new o.BehaviorSubject({})),v.set(this,new o.BehaviorSubject(!1)),this.listen()}listen(){n(this,e).pipe(l.map(e=>{var t;if(!this.connected||!(null===(t=this.peer)||void 0===t?void 0:t.send))throw this.connecting||this.reconnect().catch(e=>{console.error(e),this.close()}),"exchange.send peer not open";return e}),l.retryWhen(e=>e.pipe(l.tap(console.error),l.delayWhen(()=>o.timer(500))))).subscribe({next:e=>{var t;null===(t=this.peer)||void 0===t||t.send(JSON.stringify(Object.assign(Object.assign({},e),{user:this.user,session:this.session})))},error:console.error})}signaling(e,t){return new Promise((s,n)=>{console.info("initialize signaling"),this.socketChannelInId=[e.id,t.id].join("_"),this.socketChannelOutId=[t.id,e.id].join("_");try{this.socket=u.default.create({hostname:h.exchangeHost,port:Number(h.exchangePort),path:`${h.exchangePath}?sessionId=${t.id}&sessionToken=${t.token}`,secure:!0,wsOptions:{perMessageDeflate:!1}}),(()=>{i(this,void 0,void 0,(function*(){var e,t;try{for(var s,i=a(this.socket.listener("error"));!(s=yield i.next()).done;){let e=s.value;console.error(e)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&(yield t.call(i))}finally{if(e)throw e.error}}}))})(),(()=>{i(this,void 0,void 0,(function*(){var t,s;try{for(var i,n=a(this.socket.listener("connect"));!(i=yield n.next()).done;){i.value;this.socket.transmitPublish(this.socketChannelOutId,JSON.stringify({semaphore:p.INIT,msg:{user:e}})),console.info("new signaling connection established")}}catch(e){t={error:e}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(t)throw t.error}}}))})(),(()=>{i(this,void 0,void 0,(function*(){var e,t;try{const n=this.socket.subscribe(this.socketChannelInId);console.info("subscribed to channel "+this.socketChannelInId);try{for(var s,i=a(n);!(s=yield i.next()).done;){let e=s.value;console.info(`incoming data at ${this.socketChannelInId}: ${e}`);const{semaphore:t,msg:i}=JSON.parse(e);switch(t){case p.INIT:break;case p.READY:this.peer.signal(i.peerDescription);break;case p.COMPLETE:case p.CLOSED:}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&(yield t.call(i))}finally{if(e)throw e.error}}}catch(e){console.error(e)}}))})(),s(!0)}catch(e){n(e)}})}closeSignaling(){return new Promise((e,t)=>{try{this.socket.killAllChannels(),this.socket.disconnect()}catch(e){t(e)}})}static getInstance(){return w.instance||(w.instance=new w),w.instance}send(t){n(this,e).next(t)}connect(e,t){return e?new Promise((s,a)=>i(this,void 0,void 0,(function*(){try{console.info("exchange.connect connecting"),this.connecting=!0,this.user=e&&d.pick(["id","token"],e)||null,this.session=t&&d.pick(["id","token"],t)||null,this.peer=new c.default({initiator:!1,channelName:`${this.user.id}_${this.session.id}`,config:{iceServers:this.iceServers},trickle:!0,objectMode:!0}),this.peer.on("data",e=>{this.onMessage("string"==typeof e&&JSON.parse(e)||e)}),this.peer.on("signal",e=>{console.info("exchange.connect.signal got local desc"),this.socket.transmitPublish(this.socketChannelOutId,JSON.stringify({semaphore:p.READY,msg:{user:this.user,peerDescription:e}}))}),this.peer.on("connect",()=>{console.info("exchange.connect.connect conection ready"),this.connected=!0,this.connecting=!1,this.socket.transmitPublish(this.socketChannelOutId,JSON.stringify({semaphore:p.COMPLETE,msg:!0})),n(this,v).next(!0)}),this.peer.on("close",()=>this.close()),this.peer.on("error",e=>{console.error(e),this.close()}),s(this.peer)}catch(e){console.error(e),a(e)}}))):Promise.reject("exchange.connect user not set")}reconnect(){return i(this,void 0,void 0,(function*(){return new Promise((e,t)=>i(this,void 0,void 0,(function*(){this.connecting=!0,yield this.close().catch(t),this.connect(this.user,this.session).then(e).catch(t)})))}))}onMessage(e){switch(e.type){case f.INIT:break;case f.TABS_LIST:n(this,t).next(e.data);break;case f.TAB_UPDATE:this.tabsFetch();break;case f.TAB_CLOSED:n(this,s).next(e.data);break;case f.TAB_RECORD:case f.REC_SESSION_SAVED:n(this,r).next(e);break;case f.REC_LIST:n(this,_).next(e.data);break;case f.DEBUG_LIST_READY:n(this,g).next(e.data);break;case f.TEXT_SELECTED:n(this,m).next(e.data);break;case f.RECONNECT_CLIENT:break;case f.MOVE_EVENT:n(this,b).next(e)}}tabsFetch(){return this.send({type:f.TABS_LIST}),n(this,t)}tabUpdate(e){this.send({type:f.TAB_UPDATE,data:e})}tabReload(e){this.send({type:f.TAB_RELOAD,data:e})}tabClose(e){return this.send({type:f.TAB_CLOSE,data:e}),n(this,s)}tabBack(e){this.send({type:f.TAB_BACK,data:e})}tabForward(e){this.send({type:f.TAB_FORWARD,data:e})}tabRecord(e,t){this.send({type:f.TAB_RECORD,data:{tab:e,record:t}})}mouseMove(e){this.send({type:f.MOVE_EVENT,data:e})}saveRecording(e){return this.send({type:f.REC_SESSION_SAVE,data:e}),n(this,r)}recording(){return n(this,r)}recList(){return this.send({type:f.REC_LIST,data:null}),n(this,_)}onSelection(){return n(this,m)}onMouseMove(){return n(this,b)}debugList(){return this.send({type:f.DEBUG_LIST,data:!0}),n(this,g)}connectionAvailable(){return n(this,v)}close(){return new Promise((e,t)=>{var s,i,n,a,r;console.info("exchange.close peer"),this.connected=!1,this.connecting=!1,null===(s=this.peer)||void 0===s||s.removeAllListeners("close"),null===(i=this.peer)||void 0===i||i.removeAllListeners("connect"),null===(n=this.peer)||void 0===n||n.removeAllListeners("data"),null===(a=this.peer)||void 0===a||a.removeAllListeners("signal"),null===(r=this.peer)||void 0===r||r.destroy(),this.peer=null,e(!0)})}}return e=new WeakMap,t=new WeakMap,s=new WeakMap,r=new WeakMap,_=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,v=new WeakMap,w.instance=null,w})();t.Exchange=_},260:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MessagerSubject=void 0;const n=i(s(0)),a=s(32),r=s(267),o=s(381);t.MessagerSubject=new r.BehaviorSubject({});let l=null;class c extends n.default.Component{constructor(e){super(e),this.queue=new Set,l||(l=t.MessagerSubject.subscribe(e=>{a.allPass([a.is(Object),a.pipe(a.prop("msg"),a.complement(a.isNil)),a.pipe(a.prop("msg"),a.complement(a.isEmpty))])(e)&&(this.queue.has(e)||this.displayMessage(e))}))}displayMessage(e){const{msg:t,type:s}=e;this.queue.add(e),this.props.enqueueSnackbar(t,{variant:s,preventDuplicate:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},onClose:()=>{this.queue.delete(e)}})}render(){return n.default.createElement("span",{style:{display:"none"}})}}t.default=o.withSnackbar(c)},261:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withAuthorization=t.withLoader=t.LoaderComponent=t.withSessionCheck=t.withLocationParams=void 0;const n=i(s(371)),a=i(s(197)),r=s(697),o=s(32),l=i(s(0)),c=s(382),u=s(162),h=i(s(190));t.withLocationParams=e=>t=>{const{alias:s}=c.useParams();return l.default.createElement(e,Object.assign({route:{alias:s}},t))},t.withSessionCheck=e=>t=>{const s=o.allPass([o.pipe(o.prop("sessions"),o.isEmpty),o.pipe(o.prop("session"),o.isNil),o.pipe(o.prop("sessionsAreLoading"),o.equals(!1)),o.pipe(o.prop("logoutInProgress"),o.equals(!1)),o.pipe(o.prop("sessionHasErrored"),o.equals(!1)),o.pipe(o.prop("recorderReady"),o.equals(!0))]),i=o.allPass([o.pipe(o.prop("session"),o.isNil),o.pipe(o.prop("sessionIsLoading"),o.equals(!1)),o.pipe(o.prop("sessionHasErrored"),o.equals(!1)),o.pipe(o.prop("logoutInProgress"),o.equals(!1)),o.pipe(o.prop("recorderReady"),o.equals(!0))]),n=o.converge(o.equals,[o.path(["user","id"]),o.path(["session","owner"])]);return l.default.createElement(e,Object.assign({isSessionOwner:n,haveSessions:o.complement(s),hasSession:o.complement(i)},t))},t.LoaderComponent=(e,t)=>l.default.createElement(a.default,null,l.default.createElement(n.default,{style:{zIndex:9999999,color:"#fff",backgroundColor:"rgba(105, 122, 138, 0.35)"},open:t.loading},l.default.createElement(h.default,{loop:!0,radius:125})),l.default.createElement(e,Object.assign({},t))),t.withLoader=e=>s=>t.LoaderComponent(e,s),t.withAuthorization=e=>s=>{const i=o.clone(s),n=o.allPass([o.pipe(o.path(["user","id"]),o.is(String))]),a=o.pipe(o.path(["user"]),o.complement(o.has("username"))),{alias:h=null}=i.route,d=o.pipe(o.prop("id"),o.either(o.equals("LoginPage"),o.equals("RegisterPage"))),f=o.ifElse(o.propEq("id","RegisterPage"),o.always(l.default.createElement(c.Redirect,{to:"/register"})),o.always(l.default.createElement(c.Redirect,{to:"/login"}))),p=l.default.createElement(c.Redirect,{to:h&&"/go/"+h||"/go"}),_=l.default.createElement(e,Object.assign({},i));if(i.isPublic=!1,h){const{data:s,error:n,loading:a}=r.useRequest({url:`${u.api.broker}isPublic/${h}`,method:"get"},{refreshDeps:[h],cacheKey:"isPublic",debounceInterval:1e3});return i.isPublic=s,i.isPublic?_:t.LoaderComponent(e,i)}return o.cond([[o.converge(o.and,[o.pipe(o.prop("c"),d),o.converge(o.or,[o.pipe(o.prop("p"),o.complement(n)),o.pipe(o.prop("p"),a)])]),o.always(_)],[o.allPass([o.pipe(o.prop("c"),d),o.pipe(o.prop("p"),n),o.pipe(o.prop("p"),o.complement(a))]),o.always(p)],[o.converge(o.and,[o.pipe(o.prop("c"),o.complement(d)),o.pipe(o.prop("p"),n)]),o.always(_)],[o.T,o.pipe(o.prop("c"),f)]])({c:e,p:i})}},344:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoStyle=void 0;const n=i(s(253)),a=i(s(128));var r;!function(e){e[e.radius=250]="radius"}(r=t.LogoStyle||(t.LogoStyle={}));t.default=e=>({"@global":{body:{backgroundColor:a.default[900],color:e.palette.common.white,overflowX:"hidden"}},root:{flexGrow:1},bar:{backgroundColor:"black",color:a.default[200]},lead:{position:"relative"},desc:{height:"calc(50vh)",backgroundColor:a.default[50],color:"black"},logoContainer:{position:"relative",textAlign:"center"},logo:{height:r.radius,width:r.radius},brandLegend:{color:n.default[500]},brandTitle:{color:a.default[200],flexGrow:1},tabsContainer:{backgroundColor:"transparent"},tabs:{color:"#FFFFFF","&.disabled":{color:a.default[600]}},divider:{padding:10},tabPanel:{color:a.default[300]},list:{listStyle:"circle",lineHeight:"2.5em"},email:{width:"100%"},loginForm:{color:"#ffffff"}})},353:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(702)),a=i(s(0));t.default=function(e){return a.default.createElement(n.default,Object.assign({elevation:6,variant:"filled"},e))}},355:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoStyle=void 0;const n=i(s(253)),a=i(s(128));var r;!function(e){e[e.radius=250]="radius",e[e.stroke=50]="stroke"}(r=t.LogoStyle||(t.LogoStyle={}));t.default=e=>({"@global":{body:{backgroundColor:a.default[900],color:e.palette.common.white,overflowX:"hidden"}},root:{flexGrow:1},bar:{backgroundColor:"black",color:a.default[200]},lead:{position:"relative"},desc:{height:"calc(50vh)",backgroundColor:a.default[50],color:"#ffffff"},logoContainer:{position:"relative",textAlign:"center"},logo:{height:r.radius,width:r.radius},brandLegend:{color:n.default[500]},brandTitle:{color:a.default[200],flexGrow:1},divider:{padding:10},list:{listStyle:"circle",lineHeight:"2.5em"},email:{width:"100%"},loginForm:{color:"#ffffff"},helpTip:{color:e.palette.info.main}})},374:function(e,t,s){e.exports=s.p+"./assets/fonts/fontello.eot"},376:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGroupMember=t.isPublic=t.isOwner=void 0;const i=s(32),n=s(109);t.isOwner=e=>i.pathEq(["user","id"],i.path(["session","owner"],e))(e),t.isPublic=i.pathEq(["session","visibility"],n.SessionVisibility.PUBLIC),t.isGroupMember=e=>i.includes(i.path(["user","id"],e),i.path(["session","group"],e))},377:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.STYLE_LOGO_HEIGHT=void 0;const n=i(s(128)),a=i(s(348));t.STYLE_LOGO_HEIGHT=36;t.default=e=>({"@global":{body:{backgroundColor:n.default[900],color:e.palette.common.white}},root:{flexGrow:1},vnc:{flexGrow:1},urlInput:{flexGrow:1,input:{color:e.palette.common.white}},btnRecord:{color:a.default[600]},panels:{backgroundColor:"#3c5c77",color:e.palette.common.white},btnBugReport:{color:"#35c154"},btnPlay:{color:"#caefed"},sidebarMenuItem:{minWidth:"35px"},inputRoot:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}}})},378:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(128));t.default=e=>({dialog:{position:"absolute",minWidth:"50%",width:"auto",[e.breakpoints.down("sm")]:{minWidth:"95%"}},input:{width:"100%"},settingsBody:{backgroundColor:n.default[200],color:n.default[900]}})},379:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(265)),a=i(s(110)),r=i(s(90)),o=i(s(74)),l=i(s(100)),c=i(s(383)),u=s(32),h=i(s(0)),d=s(77),f=s(76),p=i(s(68)),_=i(s(659));class g extends h.default.Component{constructor(e){super(e),this.initialState={group:[],search:null},this.state=this.initialState}addUser(e){if(e&&!u.find(u.propEq("id",null==e?void 0:e.id),this.state.group)){const t=this.state.group.concat(e);this.setState({group:t}),this.props.onGroupUpdate(t)}this.setState({search:null})}removeUser(e){this.setState({group:u.difference(this.state.group,[e])})}render(){const{classes:e}=this.props;return h.default.createElement(a.default,{disableGutters:!0},h.default.createElement(c.default,{options:u.difference(this.props.lookupUsers,this.state.group),getOptionLabel:e=>e.username,blurOnSelect:!0,onChange:(e,t)=>this.addUser(t),value:this.state.search,renderInput:e=>h.default.createElement(l.default,Object.assign({},e,{fullWidth:!0,label:p.default.ui.sidebar.chooseUser,variant:"filled",onChange:e=>{var t;return this.props.userLookup(null===(t=e.target)||void 0===t?void 0:t.value)}}))}),this.state.group.length>0&&h.default.createElement(r.default,{elevation:1,className:e.userList},this.state.group.map(e=>h.default.createElement(n.default,{key:e.id,label:e.username,onDelete:()=>this.removeUser(e),color:"primary"}))))}}t.default=u.compose(d.connect(e=>u.pick(["lookupUsers"],e),e=>({userLookup:u.compose(e,f.userLookup)})),o.default(_.default))(g)},411:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(412);const o=a(s(416)),l=a(s(698)),c=r(s(0)),u=r(s(21)),h=r(s(422));l.init({dsn:o.sentry.dsnFront}),u.default.render(c.default.createElement(h.default,null),document.getElementById("app-container"))},416:function(e){e.exports=JSON.parse('{"sentry":{"dsnFront":"https://955852737fd240a886732b712eeda98a@o407035.ingest.sentry.io/5275525"}}')},422:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(423)),a=i(s(705)),r=i(s(558)),o=i(s(583)),l=i(s(632)),c=i(s(260)),u=i(s(0)),h=i(s(633)),d=i(s(68)),f=i(s(666)),p=i(s(195)),_=s(382),g=s(668),m=s(77),b=s(381);s(669),s(695);const v=n.default({});class w extends u.default.Component{componentWillMount(){const e=1366,t=768;this.setState({layout:{width:e,height:t,x:0,y:0}})}render(){return u.default.createElement(m.Provider,{store:v},u.default.createElement(a.default,null),u.default.createElement(g.Helmet,null,u.default.createElement("title",null,d.default.brand.title," - ",d.default.brand.legend)),u.default.createElement(p.default,{theme:f.default},u.default.createElement(b.SnackbarProvider,{maxSnack:3},u.default.createElement(c.default,null),u.default.createElement(_.BrowserRouter,null,u.default.createElement(_.Switch,null,u.default.createElement(_.Route,{path:"/launch"},u.default.createElement(r.default,null)),u.default.createElement(_.Route,{path:"/go/:alias"},u.default.createElement(h.default,null)),u.default.createElement(_.Route,{path:"/go"},u.default.createElement(h.default,null)),u.default.createElement(_.Route,{path:"/login"},u.default.createElement(o.default,null)),u.default.createElement(_.Route,{path:"/register"},u.default.createElement(l.default,null)))))))}}t.default=w},423:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(424)),a=s(385),r=s(425),o=s(32),l=s(426),c=s(433),u=o.flatten([l.generalReducers,l.sessionReducers,l.tabsReducers,l.exchangeReducers].map(o.keys)),h=new c.Percyst({ignore:o.difference(u,["vncHasFocus","sidebarIsOpen","user","sessionIsEnding","sessionHasEnded","cursorColor"]),encryptSecret:"2icp+16XzFc+Ybmnofs=",ttl:864e5});t.default=function(e){return a.createStore(a.combineReducers(Object.assign(Object.assign(Object.assign(Object.assign({},l.generalReducers),l.sessionReducers),l.tabsReducers),l.exchangeReducers)),h.rehydrate(e),r.composeWithDevTools({trace:!0})(a.applyMiddleware(h.middleware,n.default)))}},426:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalReducers=void 0;const i=s(427),n=s(428),a=s(429);var r=s(430);Object.defineProperty(t,"sessionReducers",{enumerable:!0,get:function(){return r.sessionReducers}});var o=s(431);Object.defineProperty(t,"tabsReducers",{enumerable:!0,get:function(){return o.tabsReducers}});var l=s(432);Object.defineProperty(t,"exchangeReducers",{enumerable:!0,get:function(){return l.exchangeReducers}}),t.generalReducers={vncHasFocus:a.vncHasFocus,sidebarIsOpen:n.sidebarIsOpen,sessionSettingsOpen:n.sessionSettingsOpen,recordingsChooserOpen:n.recordingsChooserOpen,cursorColor:n.cursorColor,loading:n.loading,lookupUsers:n.lookupUsers,recording:n.recording,playing:n.playing,screenshotReady:n.screenshotReady,recModalOpen:n.recModalOpen,url:n.url,recorderReady:n.recorderReady,user:i.user,loginHasErrored:i.loginHasErrored,logoutInProgress:i.logoutInProgress}},427:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.user=t.logoutInProgress=t.loginHasErrored=void 0;const i=s(61);t.loginHasErrored=i.createReducer("LOGIN_HAS_ERRORED",!1),t.logoutInProgress=i.createReducer("LOGOUT_IN_PROGRESS",!1),t.user=i.createReducer("LOGIN_SUCCESS",null)},428:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lookupUsers=t.cursorColor=t.url=t.recModalOpen=t.screenshotReady=t.playing=t.recording=t.loading=t.recorderReady=t.recordingsChooserOpen=t.sessionSettingsOpen=t.sidebarIsOpen=void 0;const i=s(61);t.sidebarIsOpen=i.createReducer("SIDEBAR_TOGGLE",!1),t.sessionSettingsOpen=i.createReducer("SESSION_SETTINGS",!1),t.recordingsChooserOpen=i.createReducer("RECORDINGS_CHOOSER",!1),t.recorderReady=i.createReducer("RECORDER_READY",!1),t.loading=i.createReducer("LOADING",!1),t.recording=i.createReducer("RECORDING",!1),t.playing=i.createReducer("PLAYING",!1),t.screenshotReady=i.createReducer("SCREENSHOT_READY",null),t.recModalOpen=i.createReducer("REC_MODAL_OPEN",!1),t.url=i.createReducer("URL_SET",""),t.cursorColor=i.createReducer("CURSOR_COLOR",null),t.lookupUsers=i.createReducer("LOOKUP_USERS",[])},429:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vncHasFocus=void 0;const i=s(61);t.vncHasFocus=i.createReducer("VNC_HAS_FOCUS",!1)},430:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionReducers=void 0;const i=s(61),n=i.createReducer("SESSION_HAS_ERRORED",!1),a=i.createReducer("SESSION_IS_LOADING",!1),r=i.createReducer("SESSIONS_ARE_LOADING",!1),o=i.createReducer("SESSION_IS_ENDING",!1),l=i.createReducer("SESSION_HAS_ENDED",!1),c=i.createReducer("SESSION_AVAILABLE_SUCCESS",null),u=i.createReducer("SESSIONS_READY",[]);t.sessionReducers={sessionHasErrored:n,sessionIsLoading:a,sessionsAreLoading:r,sessionIsEnding:o,sessionHasEnded:l,session:c,sessions:u}},431:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tabsReducers=void 0;const i=s(61),n=i.createReducer("TABS_HAS_ERRORED",!1),a=i.createReducer("TABS_FETCH_SUCCESS",[]),r=i.createReducer("DEBUG_LIST_SUCCESS",[]),o=i.createReducer("TEXT_SELECTED",null);t.tabsReducers={tabsHasErrored:n,tabs:a,debugList:r,textSelected:o}},432:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exchangeReducers=void 0;const i=s(61),n=i.createReducer("EXCHANGE_ENABLED",!1),a=i.createReducer("SIGNALING_STARTED",!1),r=i.createReducer("EXCHANGE_INIT",!1),o=i.createReducer("EXCHANGE_CLOSE",!1),l=i.createReducer("RECORDING_SAVED",!1),c=i.createReducer("REC_LIST_READY",[]);t.exchangeReducers={exchangeEnabled:n,signalingStarted:a,initializingExchange:r,closingExchange:o,recordingSaved:l,recordings:c}},440:function(e,t){},442:function(e,t){},452:function(e,t){},454:function(e,t){},480:function(e,t){},481:function(e,t){},486:function(e,t){},488:function(e,t){},512:function(e,t){},558:function(e,t,s){"use strict";var i=this&&this.__rest||function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(s[i[n]]=e[i[n]])}return s},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(s(198)),r=n(s(197)),o=n(s(133)),l=n(s(110)),c=n(s(388)),u=n(s(559)),h=n(s(108)),d=n(s(166)),f=n(s(251)),p=n(s(344)),_=n(s(190)),g=n(s(90)),m=n(s(0)),b=n(s(68)),v=n(s(706)),w=n(s(701)),y=n(s(100)),k=n(s(199)),E=n(s(255)),S=n(s(75)),C=n(s(74)),x=s(191);function A(e){const{children:t,value:s,index:n,className:a}=e,o=i(e,["children","value","index","className"]);return m.default.createElement(S.default,Object.assign({component:"div",role:"tabpanel",hidden:s!==n,id:"tabpanel-"+n,"aria-labelledby":"tab-"+n,className:a},o),s===n&&m.default.createElement(r.default,{p:3},t))}class R extends m.default.Component{constructor(e){super(e),this.state={tabValue:0}}componentDidMount(){this.typeBrand()}componentDidUpdate(){}typeBrand(){new E.default("#brandLegend",{strings:b.default.brand.legend,speed:50,waitUntilVisible:!0,cursor:!0}).go()}handleTabChange(e,t){this.setState({tabValue:t})}render(){const{classes:e}=this.props;return m.default.createElement("div",{className:e.root},m.default.createElement(f.default,Object.assign({},this.props),m.default.createElement(a.default,{className:e.bar},m.default.createElement(k.default,null,m.default.createElement(S.default,{align:"center",variant:"h6",className:e.brandTitle},b.default.brand.title)))),m.default.createElement(k.default,null),m.default.createElement(d.default,{container:!0},m.default.createElement(d.default,{container:!0,item:!0,xs:12,className:e.lead},m.default.createElement(d.default,{item:!0,xs:12,sm:4,lg:4,md:4},m.default.createElement(l.default,{maxWidth:"sm",className:e.logoContainer},m.default.createElement(_.default,{loop:1}),m.default.createElement(S.default,{id:"brandLegend",variant:"h5",align:"center",className:e.brandLegend})),m.default.createElement(r.default,{className:e.divider})),m.default.createElement(d.default,{item:!0,xs:12,sm:8,lg:8,md:8},m.default.createElement(r.default,{className:e.divider}),m.default.createElement(g.default,{square:!0,className:e.tabsContainer},m.default.createElement(w.default,{value:this.state.tabValue,indicatorColor:"secondary",onChange:this.handleTabChange.bind(this),variant:"fullWidth",centered:!0,className:e.tabs},["developers","qa","corporate","anyone"].map((e,t)=>m.default.createElement(v.default,{wrapped:!0,key:x.getHash(e),label:b.default.tabs[e]})))),["developers","qa","corporate","anyone"].map((t,s)=>m.default.createElement(A,{className:e[t],key:x.getHash(t),value:this.state.tabValue,index:s},m.default.createElement(u.default,{top:!0,cascade:!0},m.default.createElement("ul",{className:e.list},b.default.desc[t].map((e,t)=>m.default.createElement("li",{key:t+1^s+1,dangerouslySetInnerHTML:{__html:e}})))))),m.default.createElement(r.default,{className:e.divider}))),m.default.createElement(d.default,{item:!0,xs:12,className:e.desc},m.default.createElement(r.default,{className:e.divider}),m.default.createElement(l.default,{maxWidth:"sm"},m.default.createElement("form",{action:"https://formspree.io/xleprdbr",method:"POST"},m.default.createElement(S.default,{variant:"h5",align:"center",dangerouslySetInnerHTML:{__html:b.default.subscribe}}),m.default.createElement(c.default,{light:!0}),m.default.createElement(r.default,{className:e.divider}),m.default.createElement(h.default,{className:e.email},m.default.createElement(y.default,{required:!0,helperText:b.default.emailTip,name:"_replyto",id:"outlined-basic",label:b.default.email,variant:"outlined"}),m.default.createElement(o.default,{type:"submit",variant:"contained",color:"secondary"},b.default.submit)),m.default.createElement(r.default,{className:e.divider}))),m.default.createElement(r.default,{className:e.divider}))))}}t.default=C.default(p.default)(R)},583:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPage=void 0;const n=i(s(353)),a=i(s(198)),r=i(s(197)),o=i(s(133)),l=i(s(110)),c=i(s(108)),u=i(s(389)),h=i(s(166)),d=i(s(251)),f=i(s(355)),p=i(s(190)),_=i(s(0)),g=i(s(68)),m=i(s(100)),b=i(s(199)),v=i(s(255)),w=i(s(75)),y=i(s(74)),k=s(32),E=s(77),S=s(161),C=s(261);let x=(()=>{class e extends _.default.Component{constructor(e){super(e),this.state={username:"",password:""}}componentDidMount(){this.typeBrand()}componentDidUpdate(e,t){}typeBrand(){this.brandLegend&&new v.default(this.brandLegend,{strings:g.default.brand.legend,speed:50,waitUntilVisible:!0,cursor:!0}).go()}onSubmit(e){e.preventDefault();const t=k.compose(k.not,k.isEmpty,k.prop("username")),s=k.compose(k.not,k.isEmpty,k.prop("password"));return k.allPass([t,s])(this.state)&&this.props.login(this.state.username,this.state.password),!1}render(){const{classes:e}=this.props;return _.default.createElement("div",{className:e.root},_.default.createElement(d.default,Object.assign({},this.props),_.default.createElement(a.default,{className:e.bar},_.default.createElement(b.default,null,_.default.createElement(w.default,{align:"center",variant:"h6",className:e.brandTitle},g.default.brand.title)))),_.default.createElement(b.default,null),_.default.createElement(h.default,{container:!0,justify:"center"},_.default.createElement(h.default,{container:!0,item:!0,xs:12,className:e.lead},_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12},_.default.createElement(l.default,{maxWidth:"sm",className:e.logoContainer},_.default.createElement(p.default,{loop:1,radius:250}),_.default.createElement(w.default,{ref:e=>this.brandLegend=e,variant:"h6",align:"center",className:e.brandLegend})),_.default.createElement(r.default,{className:e.divider})),_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12,className:e.loginForm},_.default.createElement(l.default,{maxWidth:"sm"},this.props.loginHasErrored&&_.default.createElement(n.default,{severity:"error"},g.default.ui.login.error),_.default.createElement(r.default,{className:e.divider}),_.default.createElement("form",{method:"POST",onSubmit:e=>this.onSubmit(e)},_.default.createElement(c.default,{className:e.email},_.default.createElement(m.default,{onChange:e=>{var t;return this.setState({username:null===(t=e.target)||void 0===t?void 0:t.value})},InputLabelProps:{className:e.loginForm},InputProps:{className:e.loginForm},autoFocus:!0,required:!0,type:"text",name:"username",label:g.default.username,variant:"outlined",FormHelperTextProps:{className:e.helpTip},value:this.state.username})),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(c.default,{className:e.email},_.default.createElement(m.default,{onChange:e=>{var t;return this.setState({password:null===(t=e.target)||void 0===t?void 0:t.value})},InputLabelProps:{className:e.loginForm},InputProps:{className:e.loginForm},inputProps:{minLength:8},required:!0,type:"password",name:"password",label:g.default.ui.login.password,variant:"outlined",FormHelperTextProps:{className:e.helpTip},value:this.state.password,autoComplete:"current-password"}),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(o.default,{type:"submit",variant:"contained",color:"secondary"},g.default.submit)),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12},_.default.createElement(u.default,{href:"/register"},g.default.ui.login.noAccount))))))))}}return e.id="LoginPage",e})();t.LoginPage=x;t.default=E.connect(e=>Object.assign({},e),e=>({login:(t,s)=>e(S.login(t,s))}))(y.default(f.default)(C.withLocationParams(C.withAuthorization(x))))},586:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthApi=void 0;const i=s(162),n=s(356);let a=(()=>{class e extends n.GenericRestClient{constructor(e=null){super(i.api.broker),this.token=e}setToken(e=null){this.token=e}static getInstance(t=null){return e.instance||(e.instance=new e(t)),e.instance.setToken(t),e.instance}getOptions(){return{headers:{"qalfy-token":this.token},withCredentials:!0}}login(e,t){return this.performApiPost("login",{username:e,password:t},this.getOptions())}logout(){return this.performApiGet("logout",this.getOptions())}register(e,t){return this.performApiPost("register",{username:e,password:t},this.getOptions())}}return e.instance=null,e})();t.AuthApi=a},596:function(e,t){},598:function(e,t){},61:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSwitchAction=t.createAction=t.createReducer=void 0;const i=s(32);t.createReducer=i.curry((e,t,s,n)=>{switch(n.type){case e:return n.payload;default:return i.defaultTo(t,s)}}),t.createAction=i.curry((e,t,s)=>i.compose(i.applySpec({type:i.always(e),payload:t,meta:s}))),t.createSwitchAction=t.createAction(i.__,i.identity(i.__),i.always(null))},632:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterPage=void 0;const n=i(s(353)),a=i(s(198)),r=i(s(197)),o=i(s(133)),l=i(s(110)),c=i(s(108)),u=i(s(389)),h=i(s(166)),d=i(s(251)),f=i(s(355)),p=i(s(190)),_=i(s(0)),g=i(s(68)),m=i(s(100)),b=i(s(199)),v=i(s(255)),w=i(s(75)),y=i(s(74)),k=s(32),E=s(77),S=s(161),C=s(261);let x=(()=>{class e extends _.default.Component{constructor(e){super(e),this.state={username:"",password:"",confirm:""}}componentDidMount(){this.typeBrand()}componentDidUpdate(e,t){}typeBrand(){this.brandLegend&&new v.default(this.brandLegend,{strings:g.default.brand.legend,speed:50,waitUntilVisible:!0,cursor:!0}).go()}onSubmit(e){e.preventDefault();const t=k.compose(k.not,k.isEmpty,k.prop("username")),s=k.compose(k.not,k.isEmpty,k.prop("password")),i=k.compose(k.apply(k.equals),k.props(["password","confirm"]));return k.allPass([t,s,i])(this.state)&&this.props.register(this.state.username,this.state.password),!1}render(){const{classes:e}=this.props;return _.default.createElement("div",{className:e.root},_.default.createElement(d.default,Object.assign({},this.props),_.default.createElement(a.default,{className:e.bar},_.default.createElement(b.default,null,_.default.createElement(w.default,{align:"center",variant:"h6",className:e.brandTitle},g.default.brand.title)))),_.default.createElement(b.default,null),_.default.createElement(h.default,{container:!0,justify:"center"},_.default.createElement(h.default,{container:!0,item:!0,xs:12,className:e.lead},_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12},_.default.createElement(l.default,{maxWidth:"sm",className:e.logoContainer},_.default.createElement(p.default,{loop:1,radius:250}),_.default.createElement(w.default,{ref:e=>this.brandLegend=e,variant:"h6",align:"center",className:e.brandLegend})),_.default.createElement(r.default,{className:e.divider})),_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12,className:e.loginForm},_.default.createElement(l.default,{maxWidth:"sm"},this.props.loginHasErrored&&_.default.createElement(n.default,{severity:"error"},g.default.ui.login.error),_.default.createElement(r.default,{className:e.divider}),_.default.createElement("form",{method:"POST",onSubmit:e=>this.onSubmit(e)},_.default.createElement(c.default,{className:e.email},_.default.createElement(m.default,{onChange:e=>{var t;return this.setState({username:null===(t=e.target)||void 0===t?void 0:t.value})},InputLabelProps:{className:e.loginForm},InputProps:{className:e.loginForm},autoFocus:!0,required:!0,type:"text",name:"username",label:g.default.username,variant:"outlined",FormHelperTextProps:{className:e.helpTip},helperText:g.default.userTip,value:this.state.username,autoComplete:"email"})),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(c.default,{className:e.email},_.default.createElement(m.default,{onChange:e=>{var t;return this.setState({password:null===(t=e.target)||void 0===t?void 0:t.value})},InputLabelProps:{className:e.loginForm},InputProps:{className:e.loginForm},inputProps:{minLength:8},required:!0,type:"password",name:"password",label:g.default.ui.login.password,variant:"outlined",FormHelperTextProps:{className:e.helpTip},value:this.state.password,autoComplete:"current-password"}),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(m.default,{onChange:e=>{var t;return this.setState({confirm:null===(t=e.target)||void 0===t?void 0:t.value})},InputLabelProps:{className:e.loginForm},InputProps:{className:e.loginForm},inputProps:{minLength:8},required:!0,type:"password",name:"confirm",label:g.default.ui.login.confirm,variant:"outlined",FormHelperTextProps:{className:e.helpTip},value:this.state.confirm,autoComplete:"current-password"}),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(o.default,{type:"submit",variant:"contained",color:"secondary"},g.default.submit)),_.default.createElement(r.default,{className:e.divider}),_.default.createElement(h.default,{item:!0,xs:12,sm:12,lg:12,md:12},_.default.createElement(u.default,{href:"/login"},g.default.ui.login.haveAccount))))))))}}return e.id="RegisterPage",e})();t.RegisterPage=x;t.default=E.connect(e=>Object.assign({},e),e=>({register:(t,s)=>e(S.register(t,s))}))(y.default(f.default)(C.withLocationParams(C.withAuthorization(x))))},633:function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(s(198)),r=n(s(707)),o=n(s(164)),l=n(s(74)),c=n(s(100)),u=n(s(199)),h=n(s(634)),d=n(s(635)),f=n(s(636)),p=n(s(637)),_=n(s(638)),g=n(s(639)),m=n(s(640)),b=n(s(372)),v=s(32),w=n(s(0)),y=s(641),k=s(77),E=s(642);s(643);const S=s(162),C=s(130),x=s(163),A=s(194),R=s(76),M=s(257),T=n(s(68)),L=n(s(650)),I=n(s(377)),P=s(261),O=n(s(654)),D=n(s(656)),N=n(s(660)),B=n(s(661)),F=s(376),Q=(s(663),v.find(v.propEq("active",!0))),U=E.Keyframes.Spring({normal:{opacity:1},blink:(e,t,s)=>i(void 0,void 0,void 0,(function*(){for(;;)yield e({opacity:1,from:{opacity:0},reset:!0})}))});class z extends w.default.Component{constructor(e){super(e),this.subscriptionsMap=new Map,this.state={layout:null}}isBrowserReady(){var e,t;return v.allPass([v.always(v.not(v.isNil(this.state.layout))),v.always(v.equals(null===(e=this.props.session)||void 0===e?void 0:e.vnc,1)),v.always(v.equals(null===(t=this.props.session)||void 0===t?void 0:t.chrome,1))])()}componentWillReceiveProps(e){}componentDidMount(){var e;this.updateLayout(),null===(e=this.subscriptionsMap.get("mouseMove"))||void 0===e||e.unsubscribe(),this.subscriptionsMap.set("mouseMove",M.Exchange.getInstance().onMouseMove().subscribe(({data:e,user:t})=>this.moveMouseCursor(e,t)))}componentDidUpdate(e,t){const s=v.allPass([v.pipe(v.prop("exchangeEnabled"),v.equals(!1)),v.pipe(v.prop("signalingStarted"),v.equals(!0)),v.pipe(v.prop("initializingExchange"),v.equals(!1)),v.pipe(v.prop("closingExchange"),v.equals(!1)),v.pipe(v.prop("session"),v.complement(v.isNil))])(this.props),i=v.allPass([v.pipe(v.prop("textSelected"),v.complement(v.isNil)),v.pipe(v.prop("textSelected"),v.complement(v.isEmpty)),v.pipe(v.prop("textSelected"),v.complement(v.equals(e.textSelected)))])(this.props);if(this.isBrowserReady()&&s&&this.props.initExchange(this.props.user,this.props.session),i&&this.props.displayMessage({msg:T.default.ui.notistack.selection,type:"default"}),this.props.recorderReady||this.props.setReady(!0),this.props.haveSessions(this.props)||this.props.getSessions(),!this.props.hasSession(this.props))if(this.props.route.alias)this.props.getSessionByAlias(this.props.route.alias);else if(this.props.haveSessions(this.props)){const e=v.head(this.props.sessions);e&&this.props.getSession(e)}}onUnload(){this.props.closeExchange()}updateLayout(){this.setState({layout:{width:this.vncContainer.clientWidth,height:window.innerHeight-this.topbar.clientHeight-5}})}render(){var e,t;const{classes:s}=this.props;return w.default.createElement("div",{className:s.root},w.default.createElement(y.Beforeunload,{onBeforeunload:()=>this.onUnload()},w.default.createElement(D.default,{open:this.props.recModalOpen}),w.default.createElement(N.default,{session:this.props.session,open:this.props.sessionSettingsOpen}),w.default.createElement(O.default,{session:this.props.session,open:this.props.recordingsChooserOpen,recordings:this.props.recordings}),w.default.createElement(r.default,{anchor:"left",open:this.props.sidebarIsOpen,PaperProps:{style:{backgroundColor:"#e0e0e0"}},onClose:()=>this.props.sidebarToggle(!this.props.sidebarIsOpen)},w.default.createElement(L.default,{user:this.props.user,tabs:this.props.tabs,session:this.props.session,sessions:this.props.sessions,recordings:this.props.recordings})),w.default.createElement(a.default,{ref:e=>{this.topbar=e},position:"static"},w.default.createElement(u.default,{className:s.panels},w.default.createElement(o.default,{edge:"start",onClick:()=>this.props.sidebarToggle(!this.props.sidebarIsOpen),className:s.menuButton,color:"inherit","aria-label":"menu"},w.default.createElement(_.default,null)),w.default.createElement(c.default,{disabled:!this.props.session||this.props.sessionIsLoading||this.props.browseIsStarting||this.props.sessionIsEnding,variant:"standard",type:"url",value:this.props.url,onChange:e=>{this.props.urlSet(e.target.value)},onKeyPress:e=>{this.onUrlKeyPress(e)},autoFocus:!0,label:T.default.placeholder.url,className:s.urlInput,InputProps:{style:{color:"white"}}}),w.default.createElement(o.default,{onClick:e=>this.props.back(Q(this.props.tabs)),disabled:!this.isBrowserReady()},w.default.createElement(h.default,null)),w.default.createElement(o.default,{onClick:e=>this.props.forward(Q(this.props.tabs)),disabled:!this.isBrowserReady()},w.default.createElement(d.default,null)),w.default.createElement(o.default,{onClick:e=>this.props.reload(Q(this.props.tabs)),disabled:!this.isBrowserReady()},w.default.createElement(m.default,null)),w.default.createElement(o.default,{className:s.btnBugReport,onClick:e=>this.debug(Q(this.props.tabs)),disabled:!this.isBrowserReady()},w.default.createElement(f.default,null)),w.default.createElement(o.default,{disabled:!this.isBrowserReady(),onClick:()=>this.props.recordingsChooser(!0),className:s.btnPlay},w.default.createElement(g.default,null)),w.default.createElement(o.default,{className:s.btnRecord,onClick:e=>this.record(this.props.recording),disabled:!this.isBrowserReady()},w.default.createElement(U,{config:E.config.gentle,state:this.props.recording?"blink":"normal"},e=>w.default.createElement(p.default,{style:e,ref:e=>this.recIcon=e}))),w.default.createElement(o.default,{disabled:!this.props.isSessionOwner(this.props)||!this.props.user||!this.props.session,onClick:()=>this.props.sessionSettings(!0)},w.default.createElement(b.default,null)))),w.default.createElement("div",{id:"vncContainer",ref:e=>{this.vncContainer=e},className:s.vnc,style:{height:(null===(t=null===(e=this.state)||void 0===e?void 0:e.layout)||void 0===t?void 0:t.height)+"px",position:"relative"}},this.isBrowserReady()&&w.default.createElement(B.default,{shared:!0,wsProtocols:["binary"],style:{cursor:this.props.vncHasFocus?"none":"pointer",height:this.state.layout.height+"px",position:"relative"},password:this.props.session.token,url:`${S.api.wsProxy}${S.monitorPath}?sessionId=${this.props.session.id}&sessionToken=${this.props.session.token}`,onMouseMove:e=>this.handleMouseMove(e)})||null)))}handleMouseMove(e){const{offsetX:t,offsetY:s,clientX:i,clientY:n,pageX:a,pageY:r}=e,o=document.querySelector("#monitor canvas").getBoundingClientRect();this.props.mouseMove(Object.assign({offsetX:t,offsetY:s,clientX:i,clientY:n,pageX:a,pageY:r,cursorColor:this.props.cursorColor},v.pick(["top","left"],o)))}moveMouseCursor(e,t){if(!e||!t)return;const s=document.querySelector("#monitor canvas").getBoundingClientRect(),i=this.getCursor(t.id,e.cursorColor),n=document.querySelector("header.MuiAppBar-root").scrollHeight;i.style.top=e.offsetY+s.top-n+"px",i.style.left=e.offsetX+s.left+"px"}getCursor(e,t="#000000"){if(!document.getElementById(e)){const s=document.createElement("div");document.querySelector("#monitor canvas");s.id=e,s.innerHTML='<svg viewBox="9.2 7.3 8.2 14.37" xmlns="http://www.w3.org/2000/svg"><rect x="12.5" y="13.6" transform="matrix(0.9221, -0.3871, 0.3871, 0.9221, -5.7605, 6.5909)" width="2" height="8" style="fill: #color#;"/><polygon points="9.2,7.3 9.2,18.5 12.2,15.6 12.6,15.5 17.4,15.5 " style="fill: #color#;"/></svg>'.replace(/\#color\#/gi,t),s.className="qalfyCursor",s.style.position="absolute",s.style.width="10px",s.style.height="10px",s.style.pointerEvents="none";document.querySelector("#monitor div:first-child").appendChild(s)}return document.getElementById(e)}record(e){this.props.record(Q(this.props.tabs),!e),e&&this.props.openRecModal(!0)}debug(e){const t=v.prop("id",v.head(this.props.debugList.filter(t=>t.tabId===e.id))),{pubIp:s,cdp:i,token:n}=this.props.session,a=`http://${s}:${S.cdpPort}/devtools/inspector.html?ws=${s}:${S.cdpPort}/devtools/page/${t}&cdp=${this.props.session.cdp}&token=${n}`;console.info(a),window.open(a,"_blank")}onUrlKeyPress(e){var t;return i(this,void 0,void 0,(function*(){e&&"Enter"===e.key&&(F.isOwner(this.props)||!F.isPublic(this.props)&&!F.isGroupMember(this.props)?(e&&e.preventDefault(),this.props.session.vnc?this.props.navigate(Q(this.props.tabs),this.props.url):this.props.browse(this.props.session,{url:this.props.url,vnc:1,headless:0,incognito:0,dimensions:[this.state.layout.width,this.state.layout.height].join("x"),userAgent:(null===(t=window.navigator)||void 0===t?void 0:t.userAgent)||null})):this.props.displayMessage({msg:T.default.ui.notistack.notOwner,type:"error"}))}))}}t.default=v.compose(k.connect(e=>Object.assign({},e),e=>({browse:v.compose(e,x.browse),navigate:v.compose(e,A.navigate),reload:v.compose(e,A.reload),record:v.compose(e,A.record),back:v.compose(e,A.back),forward:v.compose(e,A.forward),sidebarToggle:v.compose(e,R.sidebarToggle),setReady:v.compose(e,R.recorderReady),sessionSettings:v.compose(e,R.sessionSettings),recordingsChooser:v.compose(e,R.recordingsChooser),openRecModal:v.compose(e,R.recModalOpen),getSession:v.compose(e,x.getSession),getSessionByAlias:v.compose(e,x.getSessionByAlias),getSessions:v.compose(e,x.getSessions),runJs:v.compose(e,A.runJsInsideTab),initExchange:v.compose(e,C.initExchange),closeExchange:v.compose(e,C.closeExchange),urlSet:v.compose(e,R.urlSet),displayMessage:v.compose(e,R.displayMessage),mouseMove:v.compose(e,C.mouseMove)})),P.withLocationParams,v.pipe(P.withAuthorization,P.withSessionCheck),l.default(I.default),P.withLoader)(z)},643:function(e,t,s){var i=s(644);"string"==typeof i&&(i=[[e.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s(264)(i,n);i.locals&&(e.exports=i.locals)},644:function(e,t,s){var i=s(373);(e.exports=s(263)(!1)).push([e.i,"@font-face {\n  font-family: 'fontello';\n  src: url("+i(s(374))+");\n  src: url("+i(s(374))+"#iefix) format('embedded-opentype'),\n       url("+i(s(645))+") format('woff2'),\n       url("+i(s(646))+") format('woff'),\n       url("+i(s(647))+") format('truetype'),\n       url("+i(s(648))+"#fontello) format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: 'fontello';\n    src: url('./fontello.svg?64577088#fontello') format('svg');\n  }\n}\n*/\n\n [class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\n  font-family: \"fontello\";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n\n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n\n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n\n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n\n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n\n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n\n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\n}\n\n.icon-yb_logo:before { content: '\\E800'; } /* '' */\n",""])},645:function(e,t,s){e.exports=s.p+"./assets/fonts/fontello.woff2"},646:function(e,t,s){e.exports=s.p+"./assets/fonts/fontello.woff"},647:function(e,t,s){e.exports=s.p+"./assets/fonts/fontello.ttf"},648:function(e,t,s){e.exports=s.p+"./assets/fonts/fontello.svg"},650:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(703)),a=i(s(265)),r=i(s(110)),o=i(s(388)),l=i(s(164)),c=i(s(709)),u=i(s(710)),h=i(s(704)),d=i(s(375)),f=i(s(74)),p=i(s(75)),_=i(s(651)),g=i(s(652)),m=i(s(653)),b=s(32),v=i(s(0)),w=s(77),y=s(161),k=s(76),E=s(163),S=s(194),C=s(376),x=i(s(68)),A=i(s(377));class R extends v.default.Component{constructor(e){super(e)}removeSession(e){C.isOwner({user:this.props.user,session:e})?e.default?this.props.endSession(e):this.props.removeSession(e):this.props.displayMessage({msg:x.default.ui.notistack.notOwner,type:"error"})}render(){var e,t,s,i;const{classes:f}=this.props;return v.default.createElement(r.default,{className:f.panels},(null===(e=this.props.tabs)||void 0===e?void 0:e.length)>0&&v.default.createElement(r.default,{disableGutters:!0},v.default.createElement(d.default,null,v.default.createElement(h.default,{disableGutters:!1},v.default.createElement(p.default,{variant:"h6",align:"center"},x.default.ui.sidebar.tabsList)),this.props.tabs.map(e=>v.default.createElement(h.default,{key:e.id,style:{whiteSpace:"normal",maxWidth:"330px"},onClick:()=>this.props.tabActivate(e)},this.props.tabs.length>1&&v.default.createElement(c.default,{classes:{root:f.sidebarMenuItem}},v.default.createElement(l.default,{onClick:t=>{t.stopPropagation(),this.props.tabClose(e,this.props.session)}},v.default.createElement(g.default,{fontSize:"small"})))||null,v.default.createElement(u.default,{primary:e.title}))))),v.default.createElement(o.default,null),(null===(t=this.props.sessions)||void 0===t?void 0:t.length)>0&&v.default.createElement(r.default,{disableGutters:!0},v.default.createElement(d.default,null,v.default.createElement(h.default,{disableGutters:!1},v.default.createElement(p.default,{variant:"h6",align:"center"},x.default.ui.sidebar.sessions)),this.props.sessions.map(e=>{var t;return e&&v.default.createElement(h.default,{key:e.id,onClick:()=>window.location.href="/go/"+e.alias},v.default.createElement(a.default,{size:"medium",avatar:e.screenshot&&v.default.createElement(n.default,{src:e.screenshot})||v.default.createElement(n.default,null,e.title&&e.title[0]||"?"),disabled:e.id!==(null===(t=this.props.session)||void 0===t?void 0:t.id),label:e.title||e.default&&x.default.ui.sidebar.default||x.default.ui.sidebar.untitled,onDelete:()=>this.removeSession(e),color:"default"}))}),(null===(s=this.props.user)||void 0===s?void 0:s.username)&&v.default.createElement(h.default,{onClick:()=>this.props.newSession()},v.default.createElement(c.default,{classes:{root:f.sidebarMenuItem}},v.default.createElement(_.default,null)),v.default.createElement(u.default,{primary:x.default.ui.sidebar.addSession})))),(null===(i=this.props.user)||void 0===i?void 0:i.username)&&v.default.createElement(r.default,{disableGutters:!0},v.default.createElement(d.default,null,v.default.createElement(h.default,{disableGutters:!1},v.default.createElement(p.default,{variant:"h6",align:"center"},x.default.ui.sidebar.account)),v.default.createElement(h.default,{onClick:()=>this.props.logout(this.props.user)},v.default.createElement(c.default,{classes:{root:f.sidebarMenuItem}},v.default.createElement(m.default,null)),v.default.createElement(u.default,{primary:x.default.ui.sidebar.logout})))))}}t.default=b.compose(w.connect(null,e=>({tabClose:b.compose(e,S.close),tabActivate:b.compose(e,S.activate),endSession:b.compose(e,E.endSession),removeSession:b.compose(e,E.removeSession),setSession:b.compose(e,E.sessionIsAvailable),newSession:b.compose(e,E.newSession),logout:b.compose(e,y.logout),displayMessage:b.compose(e,k.displayMessage)})),f.default(A.default))(R)},654:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(133)),a=i(s(268)),r=i(s(269)),o=i(s(270)),l=i(s(271)),c=i(s(110)),u=i(s(165)),h=i(s(74)),d=i(s(100)),f=i(s(655)),p=i(s(383)),_=s(32),g=i(s(0)),m=s(77),b=s(76),v=i(s(68)),w=i(s(378));class y extends g.default.Component{constructor(e){super(e),this.initialState={dialogOpen:!1,choice:null},this.state=this.initialState}componentWillReceiveProps(e){this.setState(_.mergeRight(this.initialState,_.pick(["recordingsChooserOpen"],this.props||{})))}setChoice(e){this.setState(_.mergeRight(this.initialState,{choice:e}||{}))}render(){var e;return g.default.createElement(u.default,{open:this.props.recordingsChooserOpen,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",disableBackdropClick:!0,disableEscapeKeyDown:!0},g.default.createElement("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},className:this.props.classes.dialog},g.default.createElement(a.default,{className:this.props.classes.settingsBody},g.default.createElement(l.default,{avatar:g.default.createElement(f.default,null),title:v.default.ui.recordings}),g.default.createElement(o.default,null,(null===(e=this.props.recordings)||void 0===e?void 0:e.length)>0&&g.default.createElement(c.default,{disableGutters:!0},g.default.createElement(p.default,{options:this.props.recordings,classes:{inputRoot:this.props.classes.inputRoot},getOptionLabel:e=>e.title,blurOnSelect:!0,onChange:(e,t)=>this.setChoice(t),renderInput:e=>g.default.createElement(d.default,Object.assign({},e,{fullWidth:!0,label:v.default.ui.sidebar.chooseRec,variant:"filled"}))}))),g.default.createElement(r.default,null,g.default.createElement(n.default,{size:"small",onClick:e=>{this.props.recordingsChooser(!1),this.props.play(this.props.session,this.state.choice)}},v.default.ui.play),g.default.createElement(n.default,{size:"small",onClick:e=>this.props.recordingsChooser(!1)},v.default.ui.close)))))}}t.default=_.compose(m.connect(e=>_.pick(["recordingsChooserOpen"],e),e=>({recordingsChooser:_.compose(e,b.recordingsChooser),play:_.compose(e,b.play)})),h.default(w.default))(y)},656:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(133)),a=i(s(268)),r=i(s(269)),o=i(s(270)),l=i(s(271)),c=i(s(110)),u=i(s(108)),h=i(s(390)),d=i(s(266)),f=i(s(166)),p=i(s(165)),_=i(s(384)),g=i(s(386)),m=i(s(74)),b=i(s(100)),v=i(s(75)),w=i(s(657)),y=s(32),k=i(s(0)),E=s(77),S=s(130),C=s(76),x=s(109),A=i(s(68)),R=i(s(658)),M=i(s(379));class T extends k.default.Component{constructor(e){super(e),this.initialState={dialogOpen:!1,title:"",description:"",visibility:x.SessionVisibility.PUBLIC,group:[]},this.state=this.initialState}componentWillReceiveProps(e){this.setState(this.initialState);const{open:t}=e;this.state.dialogOpen!==t&&this.setState({dialogOpen:t})}save(){this.props.saveRecording(y.pick(["title","description","visibility","group"],this.state)),this.setState({dialogOpen:!1})}onGroupUpdate(e){this.setState({group:e.map(y.prop("id"))})}onClose(){this.setState({dialogOpen:!1}),this.props.recModalOpen(!1)}render(){return k.default.createElement(c.default,null,k.default.createElement(p.default,{open:this.state.dialogOpen,onClose:()=>this.onClose(),"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",disableBackdropClick:!0,disableEscapeKeyDown:!0},k.default.createElement("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},className:this.props.classes.dialog},k.default.createElement(a.default,null,k.default.createElement(l.default,{avatar:k.default.createElement(w.default,null),title:A.default.ui.save.headingRec}),k.default.createElement(o.default,null,k.default.createElement(f.default,{container:!0,spacing:3},k.default.createElement(f.default,{item:!0,xs:12},k.default.createElement(u.default,{className:this.props.classes.input},k.default.createElement(b.default,{onChange:e=>{var t;return this.setState({title:null===(t=e.target)||void 0===t?void 0:t.value})},required:!0,type:"text",name:"title",label:A.default.ui.save.lblTitle,variant:"outlined",helperText:A.default.ui.save.hlpTitle,value:this.state.title}))),k.default.createElement(f.default,{item:!0,xs:12},k.default.createElement(u.default,{className:this.props.classes.input},k.default.createElement(b.default,{onChange:e=>{var t;return this.setState({description:null===(t=e.target)||void 0===t?void 0:t.value})},required:!1,type:"text",name:"description",label:A.default.ui.save.lblDescription,variant:"outlined",multiline:!0,helperText:A.default.ui.save.hlpDescription,value:this.state.description}))),k.default.createElement(f.default,{item:!0,xs:4},k.default.createElement(u.default,{component:"fieldset"},k.default.createElement(d.default,{component:"legend"},A.default.ui.save.lblVisibility),k.default.createElement(g.default,{"aria-label":"visibility",name:"visibility",value:this.state.visibility,onChange:e=>{var t;return this.setState({visibility:parseInt(null===(t=e.target)||void 0===t?void 0:t.value)})}},k.default.createElement(h.default,{value:x.SessionVisibility.PUBLIC,control:k.default.createElement(_.default,null),label:A.default.ui.save.lblPublic}),k.default.createElement(h.default,{value:x.SessionVisibility.PRIVATE,control:k.default.createElement(_.default,null),label:A.default.ui.save.lblPrivate}),k.default.createElement(h.default,{value:x.SessionVisibility.GROUP,control:k.default.createElement(_.default,null),label:A.default.ui.save.lblGroup})))),k.default.createElement(f.default,{item:!0,xs:8},k.default.createElement(v.default,{variant:"overline",color:"primary"},(()=>{switch(this.state.visibility){case x.SessionVisibility.PUBLIC:return A.default.ui.save.hlpPublicRec;case x.SessionVisibility.PRIVATE:return A.default.ui.save.hlpPrivateRec;case x.SessionVisibility.GROUP:return A.default.ui.save.hlpGroupRec}})()),this.state.visibility===x.SessionVisibility.GROUP&&k.default.createElement(M.default,{onGroupUpdate:this.onGroupUpdate.bind(this)})))),k.default.createElement(r.default,null,k.default.createElement(n.default,{size:"small",onClick:e=>this.save()},A.default.ui.save.save),k.default.createElement(n.default,{size:"small",onClick:e=>this.setState({dialogOpen:!1})},A.default.ui.save.discard))))))}}t.default=y.compose(E.connect(e=>y.pick(["recordingSaved"],e),e=>({saveRecording:y.compose(e,S.saveRecording),recModalOpen:y.compose(e,C.recModalOpen)})),m.default(R.default))(T)},658:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(128));t.default=e=>({dialog:{position:"absolute",minWidth:"50%",width:"auto",backgroundColor:e.palette.background.paper,color:n.default[900],[e.breakpoints.down("sm")]:{minWidth:"95%"}},input:{width:"100%"}})},659:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>({input:{width:"100%"},userList:{padding:"1em"}})},660:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SETTINGS_PROPS=void 0;const n=i(s(133)),a=i(s(268)),r=i(s(269)),o=i(s(270)),l=i(s(271)),c=i(s(108)),u=i(s(390)),h=i(s(266)),d=i(s(166)),f=i(s(165)),p=i(s(384)),_=i(s(386)),g=i(s(74)),m=i(s(100)),b=i(s(75)),v=i(s(372)),w=s(32),y=i(s(0)),k=s(77),E=s(130),S=s(163),C=s(76),x=s(109),A=i(s(68)),R=i(s(378)),M=i(s(379));t.SETTINGS_PROPS=["title","description","visibility","group","screenshot"];class T extends y.default.Component{constructor(e){super(e),this.initialState={dialogOpen:!1,title:"",description:"",visibility:x.SessionVisibility.PRIVATE,group:[]},this.state=this.initialState}componentWillReceiveProps(e){this.setState(w.mergeRight(this.state,w.pick(t.SETTINGS_PROPS,this.props.session||{})))}save(){const e=w.pick(t.SETTINGS_PROPS,this.state),s=w.find(w.propEq("active",!0))(this.props.tabs),i=s&&w.prop("id",w.find(w.propEq("tabId",s.id))(this.props.debugList))||null;this.props.updateSession(this.props.session,e),this.props.sessionSettings(!1),i&&this.props.screenshot(this.props.session,i)}onGroupUpdate(e){this.setState({group:e.map(w.prop("id"))})}render(){return y.default.createElement(f.default,{open:this.props.sessionSettingsOpen,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",disableBackdropClick:!0,disableEscapeKeyDown:!0},y.default.createElement("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},className:this.props.classes.dialog},y.default.createElement(a.default,{className:this.props.classes.settingsBody},y.default.createElement(l.default,{avatar:y.default.createElement(v.default,null),title:A.default.ui.save.heading}),y.default.createElement(o.default,null,y.default.createElement(d.default,{container:!0,spacing:3},y.default.createElement(d.default,{item:!0,xs:12},y.default.createElement(c.default,{className:this.props.classes.input},y.default.createElement(m.default,{onChange:e=>{var t;return this.setState({title:null===(t=e.target)||void 0===t?void 0:t.value})},required:!0,type:"text",name:"title",label:A.default.ui.save.lblTitle,variant:"outlined",helperText:A.default.ui.save.hlpTitle,value:this.state.title}))),y.default.createElement(d.default,{item:!0,xs:12},y.default.createElement(c.default,{className:this.props.classes.input},y.default.createElement(m.default,{onChange:e=>{var t;return this.setState({description:null===(t=e.target)||void 0===t?void 0:t.value})},required:!1,type:"text",name:"description",label:A.default.ui.save.lblDescription,variant:"outlined",multiline:!0,helperText:A.default.ui.save.hlpDescription,value:this.state.description}))),y.default.createElement(d.default,{item:!0,xs:4},y.default.createElement(c.default,{component:"fieldset"},y.default.createElement(h.default,{component:"legend"},A.default.ui.save.lblVisibility),y.default.createElement(_.default,{"aria-label":"visibility",name:"visibility",value:this.state.visibility,onChange:e=>{var t;return this.setState({visibility:parseInt(null===(t=e.target)||void 0===t?void 0:t.value)})}},y.default.createElement(u.default,{value:x.SessionVisibility.PRIVATE,control:y.default.createElement(p.default,null),label:A.default.ui.save.lblPrivate}),y.default.createElement(u.default,{value:x.SessionVisibility.PUBLIC,control:y.default.createElement(p.default,null),label:A.default.ui.save.lblPublic}),y.default.createElement(u.default,{value:x.SessionVisibility.GROUP,control:y.default.createElement(p.default,null),label:A.default.ui.save.lblGroup})))),y.default.createElement(d.default,{item:!0,xs:8},y.default.createElement(b.default,{variant:"overline",color:"primary"},(()=>{switch(this.state.visibility){case x.SessionVisibility.PRIVATE:return A.default.ui.save.hlpPrivate;case x.SessionVisibility.PUBLIC:return A.default.ui.save.hlpPublic;case x.SessionVisibility.GROUP:return A.default.ui.save.hlpGroup}})()),this.state.visibility===x.SessionVisibility.GROUP&&y.default.createElement(M.default,{onGroupUpdate:this.onGroupUpdate.bind(this)})))),y.default.createElement(r.default,null,y.default.createElement(n.default,{size:"small",onClick:e=>this.save()},A.default.ui.save.save),y.default.createElement(n.default,{size:"small",onClick:e=>this.props.sessionSettings(!1)},A.default.ui.save.discard)))))}}t.default=w.compose(k.connect(e=>w.pick(["sessionSettingsOpen","tabs","debugList","lookupUsers"],e),e=>({saveRecording:w.compose(e,E.saveRecording),sessionSettings:w.compose(e,C.sessionSettings),updateSession:w.compose(e,S.updateSession),screenshot:w.compose(e,C.screenshot)})),g.default(R.default))(T)},661:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(0)),a=i(s(699)),r=s(380),o=s(77),l=s(267),c=s(662);class u extends n.default.Component{constructor(e){super(e),this.disconnect=()=>{this.rfb&&(this.rfb.disconnect(),this.rfb=null)},this.connect=()=>{if(this.disconnect(),!this.canvas)return;const{connectTimeout:e,url:t,width:s,height:i,encrypt:n,password:o,wsProtocols:c,shared:u}=this.props;this.rfb=new a.default(this.canvas,t,{credentials:{password:o},wsProtocols:c,shared:u,showDotCursor:!0}),this.rfb.resizeSession=!0,this.rfb.compressionLevel=9,this.rfb.addEventListener("credentialsrequired",()=>{this.rfb.sendCredentials({password:o})}),this.rfb.addEventListener("connect",e=>{const t=document.querySelector("#monitor canvas");l.fromEvent(t,"mousemove",{capture:!0}).pipe(r.auditTime(100)).subscribe(this.props.onMouseMove)})},this.registerChild=e=>{this.canvas=e},this.handleMouseEnter=()=>{this.rfb&&(this.rfb.focus(),this.props.hasFocus||this.props.switchVncFocus(!0))},this.handleMouseLeave=e=>{this.rfb&&0===e.buttons&&(this.rfb.blur(),this.props.hasFocus&&this.props.switchVncFocus(!1))}}componentDidMount(){this.connect()}componentWillUnmount(){this.disconnect()}componentWillReceiveProps(e){this.rfb&&e.scale!==this.props.scale&&(this.rfb.get_display().set_scale(e.scale||1),this.rfb.get_mouse().set_scale(e.scale||1))}render(){return n.default.createElement("div",{id:"monitor",ref:this.registerChild,style:this.props.style,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})}}t.default=o.connect(e=>({hasFocus:e.vncHasFocus}),e=>({switchVncFocus:t=>e(c.vncHasFocus(t))}))(u)},662:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vncHasFocus=void 0;const i=s(32),n=s(61);t.vncHasFocus=n.createSwitchAction("VNC_HAS_FOCUS",i.__)},666:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(s(667)),l=r(s(346)),c=s(32),u={fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h6:{color:"#9a9a9a",fontWeight:"bolder"}},h=c.mergeAll([o,{typography:u}]),d=l.default(h);t.default=d},667:function(e){e.exports=JSON.parse('{"palette":{"background":{"default":"rgba(244, 244, 244, 1)","paper":"rgba(240, 240, 240, 1)"},"common":{"black":"rgba(0, 0, 0, 1)","white":"#fff"},"error":{"contrastText":"#fff","dark":"#d32f2f","light":"#e57373","main":"#f44336"},"primary":{"contrastText":"#fff","dark":"rgba(22, 65, 111, 1)","light":"rgba(39, 111, 189, 1)","main":"rgba(60, 92, 119, 1)"},"secondary":{"contrastText":"#fff","dark":"rgba(152, 72, 5, 1)","light":"rgba(229, 159, 104, 1)","main":"rgba(228, 113, 16, 1)"},"text":{"disabled":"rgba(0, 0, 0, 0.38)","hint":"rgba(0, 0, 0, 0.38)","primary":"rgba(0, 0, 0, 0.87)","secondary":"rgba(0, 0, 0, 0.54)"}}}')},669:function(e,t,s){var i=s(670);"string"==typeof i&&(i=[[e.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s(264)(i,n);i.locals&&(e.exports=i.locals)},670:function(e,t,s){var i=s(373);(e.exports=s(263)(!1)).push([e.i,"/* roboto-100normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 100;\n  src:\n    local('Roboto Thin '),\n    local('Roboto-Thin'),\n    url("+i(s(671))+") format('woff2'), \n    url("+i(s(672))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-100italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 100;\n  src:\n    local('Roboto Thin italic'),\n    local('Roboto-Thinitalic'),\n    url("+i(s(673))+") format('woff2'), \n    url("+i(s(674))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-300normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 300;\n  src:\n    local('Roboto Light '),\n    local('Roboto-Light'),\n    url("+i(s(675))+") format('woff2'), \n    url("+i(s(676))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-300italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 300;\n  src:\n    local('Roboto Light italic'),\n    local('Roboto-Lightitalic'),\n    url("+i(s(677))+") format('woff2'), \n    url("+i(s(678))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-400normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('Roboto Regular '),\n    local('Roboto-Regular'),\n    url("+i(s(679))+") format('woff2'), \n    url("+i(s(680))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-400italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('Roboto Regular italic'),\n    local('Roboto-Regularitalic'),\n    url("+i(s(681))+") format('woff2'), \n    url("+i(s(682))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-500normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 500;\n  src:\n    local('Roboto Medium '),\n    local('Roboto-Medium'),\n    url("+i(s(683))+") format('woff2'), \n    url("+i(s(684))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-500italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 500;\n  src:\n    local('Roboto Medium italic'),\n    local('Roboto-Mediumitalic'),\n    url("+i(s(685))+") format('woff2'), \n    url("+i(s(686))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-700normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 700;\n  src:\n    local('Roboto Bold '),\n    local('Roboto-Bold'),\n    url("+i(s(687))+") format('woff2'), \n    url("+i(s(688))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-700italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 700;\n  src:\n    local('Roboto Bold italic'),\n    local('Roboto-Bolditalic'),\n    url("+i(s(689))+") format('woff2'), \n    url("+i(s(690))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-900normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 900;\n  src:\n    local('Roboto Black '),\n    local('Roboto-Black'),\n    url("+i(s(691))+") format('woff2'), \n    url("+i(s(692))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-900italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 900;\n  src:\n    local('Roboto Black italic'),\n    local('Roboto-Blackitalic'),\n    url("+i(s(693))+") format('woff2'), \n    url("+i(s(694))+") format('woff'); /* Modern Browsers */\n}\n",""])},671:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-100.woff2"},672:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-100.woff"},673:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-100italic.woff2"},674:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-100italic.woff"},675:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-300.woff2"},676:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-300.woff"},677:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-300italic.woff2"},678:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-300italic.woff"},679:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-400.woff2"},68:function(e,t,s){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=new(i(s(581)).default)({en:{brand:{title:"QAlfy",legend:"A secured P2P browser in the cloud"},placeholder:{url:"URL"},menu:{account:"Account",logout:"Logout"},tabs:{developers:"For Developers",qa:"For QA",corporate:"For Corporate",anyone:"For Anyone"},desc:{developers:['<span style="color:#41b6d3">Collaborate</span> with your team by sharing the same browser session.','<span style="color:#41b6d3">Debug</span> alone or with others. A fully compliant browser with dev tools integrated at your disposal.','<span style="color:#41b6d3">Run code</span> and interact with others while using your application.','<span style="color:#41b6d3">Absolute privacy</span> and platform <span style="color:#41b6d3">isolation</span>. You keep your resources.','<span style="color:#41b6d3">Develop</span> custom <i>QAlfy</i> plugins and optimize your workflow considerably.'],qa:['<span style="color:#41b6d3">Record and Play</span> application interaction for later analysis.','<span style="color:#41b6d3">Export</span> your recordings for use with popular testing libraries (Selenium, PhantomJS, etc).','<span style="color:#41b6d3">Organize and share</span> your sessions with anyone so they can replay your actions and work right away under the exact same context to build a bug free application.','<span style="color:#41b6d3">Run your existing tests</span> in a <i>QAlfy</i> session and forget about the boilerplate setup.'],corporate:['Make <i>QAlfy</i> the default Internet Gateway and <span style="color:#41b6d3">erradicate the dangers</span> of exposing your assets and infrastructure.','With <u>absolute privacy</u> in mind, <span style="color:#41b6d3">take control</span> of what goes in and what goes out. When, how and where.','<span style="color:#41b6d3">Free the resources up</span> by delegating bandwith usage and processing power to our highly secured servers.','<span style="color:#41b6d3">Extend</span> the capabilities of <i>QAlfy</i> with plugins and customization. Extract the most potential out of your users\' browsing experience.'],anyone:['<span style="color:#41b6d3;font-weight:700">Customer Support:</span> provide live assistance to your customers by browsing together on the same tab.','<span style="color:#41b6d3;font-weight:700">Family Assistance:</span> help your loved ones interact with a website or any complex form while you show them how to do it. It\'s like being sitted in front of their computers while they watch you do it.','<span style="color:#41b6d3;font-weight:700">Personal Usage:</span> your browser is now in the Cloud. You keep your resources and bandwith untouched while at the same time, you get <u>absolute privacy</u>. Nothing is attached to your identity unless you allow that.']},email:"Email Address",username:"Alias",emailTip:"We'll never share your email address",userTip:"Choose a unique alias",submit:"Submit",subscribe:"Subscribe now for the upcoming <b>BETA</b> version",ui:{sidebar:{tabsList:"Tabs Available",sessions:"Sessions",addSession:"New Session",closeSession:"Close Session",account:"Account",logout:"Logout",untitled:"Untitled",default:"Default",chooseRec:"Search...",chooseUser:"Choose a user..."},login:{password:"Password",confirm:"Confirm Password",passwordTip:"Minimum length is 8 characters",error:"These credentials are invalid.",noAccount:"Don't have an account? Sign up",haveAccount:"Have an account? Sign in"},save:{headingRec:"Save Recording",heading:"Session Settings",save:"Save",discard:"Discard",lblTitle:"Title",lblDescription:"Description",lblVisibility:"Visibility",lblPublic:"Public",lblPrivate:"Private",lblGroup:"Group",hlpTitle:"A descriptive name for this session",hlpDescription:"A summary of this session",hlpPublicRec:"Everyone is allowed to use this recording",hlpPrivateRec:"You are the only person who can use this recording",hlpGroupRec:"Only the following members can use this recording",hlpPublic:"Everyone is allowed to use this session",hlpPrivate:"You are the only person who can use this session",hlpGroup:"Only the following members can use this session"},notistack:{selection:"Selection updated",urlError:"The URL is not valid",sessionNotAvailable:"This session is not available",notOwner:"This session belongs to someone else"},recordings:"Recordings",play:"Play",close:"Close"}},es:{brand:{title:"QAlfy",legend:"Un navegador P2P seguro en la nube"},placeholder:{url:"URL"},menu:{account:"Cuenta",logout:"Salir"},tabs:{developers:"Para Developers",qa:"Para QA",corporate:"Para Empresas",anyone:"Para Cualquiera"},desc:{developers:['<span style="color:#41b6d3">Colabora</span> con tu equipo compartiendo la misma sesión.','<span style="color:#41b6d3">Depura</span> por tu cuenta o con otras personas. Un navegador moderno en línea a tu disposición.','<span style="color:#41b6d3">Ejecuta código</span> e interactúa con tu equipo mientras usan su aplicación.','<span style="color:#41b6d3">Privacidad absoluta</span> y una plataforma <span style="color:#41b6d3">aislada</span>. Mantiene tus recursos a salvo.','<span style="color:#41b6d3">Desarrolla</span> plugins <i>QAlfy</i> personalizados y optimiza tu trabajo considerablemente.'],qa:['<span style="color:#41b6d3">Graba y Reproduce</span> cualquier interacción para posterior análisis.','<span style="color:#41b6d3">Exporta</span> tus grabaciones para ser usadas con librerias de testing populares (Selenium, PhantomJS, etc).','<span style="color:#41b6d3">Organiza y comparte</span> tus sesiones con otras personas para que reproduzcan tus acciones en el mismo contexto.','<span style="color:#41b6d3">Ejecuta tus tests</span> actuales en una sesión <i>QAlfy</i> y olvídate de tediosas configuraciones.'],corporate:['Convierta a <i>QAlfy</i> en la entrada a Internet por defecto y <span style="color:#41b6d3">elimine los peligros</span> de la exposición de los activos de la compañía y su infraestructura.','Con la <u>privacidad absoluta</u> en mente, <span style="color:#41b6d3">tome control</span> de lo que ingresa y lo que sale. Cuándo, cómo y dónde.','<span style="color:#41b6d3">Libere los recursos</span> delegando ancho de banda y poder de procesamiento a nuestros servidores de máxima seguridad.','<span style="color:#41b6d3">Extienda</span> las capacidades de <i>QAlfy</i> con plugins personalizados. Aproveche al máximo el potencial en la experiencia de navegación de sus usuarios.'],anyone:['<span style="color:#41b6d3;font-weight:700">Atención al Cliente:</span> ofrezca asistencia en vivo navegando en la misma pestaña con su cliente.','<span style="color:#41b6d3;font-weight:700">Asistencia Familiar:</span> ayude a sus seres queridos al utilizar aplicaciones o rellenar formularios complejos. Es como si estuviese sentado junto a ellos mostrándoles como hacerlo.','<span style="color:#41b6d3;font-weight:700">Uso Personal:</span> tu navegador seguro en la nube. Tus recursos y ancho de banda liberados; al mismo tiempo obtenga <u>absoluta privacidad</u>. Nada se vincula a su identidad al menos que usted lo requiera.']},email:"Correo Electrónico",username:"Alias",emailTip:"Nunca compartiremos su dirección de correo",userTip:"Elija un alias único",submit:"Enviar",subscribe:"Subscríbase ahora para sumarse a la versión <b>BETA</b>",ui:{sidebar:{tabsList:"Pestañas Disponibles",sessions:"Sesiones",addSession:"Nueva Sesión",closeSession:"Cerrar Sesión",account:"Cuenta",logout:"Salir",untitled:"Sin título",default:"Principal",chooseRec:"Buscar...",chooseUser:"Seleccione usuario..."},login:{password:"Contraseña",confirm:"Confirmar Contraseña",passwordTip:"8 carácteres como mínimo",error:"Sus credenciales son inválidas.",noAccount:"No tiene cuenta? Regístrese",haveAccount:"Tiene una cuenta? Ingrese"},save:{headingRec:"Guardar Grabación",heading:"Opciones de Sesión",save:"Guardar",discard:"Descartar",lblTitle:"Título",lblDescription:"Descripción",lblVisibility:"Disponibilidad",lblPublic:"Público",lblPrivate:"Privado",lblGroup:"Grupo",hlpTitle:"Un nombre descriptivo para esta sesión",hlpDescription:"Un resumen de esta sesión",hlpPublicRec:"Cualquiera puede acceder a esta grabación",hlpPrivateRec:"Solamente tú puedes acceder a esta grabación",hlpGroupRec:"Solamente estos miembros pueden acceder a la grabación",hlpPublic:"Cualquiera puede acceder a esta sesión",hlpPrivate:"Solamente tú puedes acceder a esta sesión",hlpGroup:"Solamente estos miembros pueden acceder a la sesión"},notistack:{selection:"Selección actualizada",urlError:"La URL no es válida",sessionNotAvailable:"Esta sesión no está disponible",notOwner:"Esta sesión no te pertenece"},recordings:"Grabaciones",play:"Play",close:"Cerrar"}}});t.default=n},680:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-400.woff"},681:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-400italic.woff2"},682:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-400italic.woff"},683:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-500.woff2"},684:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-500.woff"},685:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-500italic.woff2"},686:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-500italic.woff"},687:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-700.woff2"},688:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-700.woff"},689:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-700italic.woff2"},690:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-700italic.woff"},691:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-900.woff2"},692:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-900.woff"},693:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-900italic.woff2"},694:function(e,t,s){e.exports=s.p+"./assets/fonts/roboto-latin-900italic.woff"},695:function(e,t,s){var i=s(696);"string"==typeof i&&(i=[[e.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s(264)(i,n);i.locals&&(e.exports=i.locals)},696:function(e,t,s){(e.exports=s(263)(!1)).push([e.i,"input:-internal-autofill-selected {\n  background-color: transparent!important;\n  background-image: inherit!important;\n}\n",""])},699:function(e,t,s){"use strict";function i(e){return 0|e}s.r(t),s.d(t,"default",(function(){return tr}));let n="warn",a=()=>{},r=()=>{},o=()=>{},l=()=>{};function c(e,t=!1){try{return decodeURIComponent(escape(e))}catch(s){if(s instanceof URIError&&t)return e;throw s}}function u(e){return unescape(encodeURIComponent(e))}!function(e){if(void 0===e?e=n:n=e,a=r=o=l=()=>{},void 0!==window.console)switch(e){case"debug":a=console.debug.bind(window.console);case"info":r=console.info.bind(window.console);case"warn":o=console.warn.bind(window.console);case"error":l=console.error.bind(window.console);case"none":break;default:throw new window.Error("invalid logging type '"+e+"'")}}();let h="ontouchstart"in document.documentElement||void 0!==document.ontouchstart||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;window.addEventListener("touchstart",(function e(){h=!0,window.removeEventListener("touchstart",e,!1)}),!1);let d=10*(window.devicePixelRatio||1),f=!1;try{const e=document.createElement("canvas");e.style.cursor='url("data:image/x-icon;base64,AAACAAEACAgAAAIAAgA4AQAAFgAAACgAAAAIAAAAEAAAAAEAIAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAA==") 2 2, default',0===e.style.cursor.indexOf("url")?(r("Data URI scheme cursor supported"),f=!0):o("Data URI scheme cursor not supported")}catch(e){l("Data URI scheme cursor test exception: "+e)}const p=f;let _=!0;try{const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const s=e.offsetWidth-t.offsetWidth;e.parentNode.removeChild(e),_=0!=s}catch(e){l("Scrollbar test exception: "+e)}function g(){return navigator&&!!/mac/i.exec(navigator.platform)}function m(){return navigator&&!!/win/i.exec(navigator.platform)}function b(){return navigator&&(!!/ipad/i.exec(navigator.platform)||!!/iphone/i.exec(navigator.platform)||!!/ipod/i.exec(navigator.platform))}function v(e,t,s){const i=s.getBoundingClientRect();let n={x:0,y:0};return e<i.left?n.x=0:e>=i.right?n.x=i.width-1:n.x=e-i.left,t<i.top?n.y=0:t>=i.bottom?n.y=i.height-1:n.y=t-i.top,n}function w(e){e.stopPropagation(),e.preventDefault()}let y=!1,k=null;function E(e){if(y)return;const t=new e.constructor(e.type,e);y=!0,document.captureElement?document.captureElement.dispatchEvent(t):k.dispatchEvent(t),y=!1,e.stopPropagation(),t.defaultPrevented&&e.preventDefault(),"mouseup"===e.type&&x()}function S(){document.getElementById("noVNC_mouse_capture_elem").style.cursor=window.getComputedStyle(document.captureElement).cursor}document.captureElement=null;const C=new MutationObserver(S);function x(){if(document.releaseCapture)document.releaseCapture(),document.captureElement=null;else{if(!document.captureElement)return;k=document.captureElement,document.captureElement=null,C.disconnect();document.getElementById("noVNC_mouse_capture_elem").style.display="none",window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",E)}}var A={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode(e){let t="";const s=e.length,i=s%3;for(let i=0;i<s-2;i+=3)t+=this.toBase64Table[e[i]>>2],t+=this.toBase64Table[((3&e[i])<<4)+(e[i+1]>>4)],t+=this.toBase64Table[((15&e[i+1])<<2)+(e[i+2]>>6)],t+=this.toBase64Table[63&e[i+2]];const n=s-i;return 2===i?(t+=this.toBase64Table[e[n]>>2],t+=this.toBase64Table[((3&e[n])<<4)+(e[n+1]>>4)],t+=this.toBase64Table[(15&e[n+1])<<2],t+=this.toBase64Table[64]):1===i&&(t+=this.toBase64Table[e[n]>>2],t+=this.toBase64Table[(3&e[n])<<4],t+=this.toBase64Table[64],t+=this.toBase64Table[64]),t},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode(e,t=0){let s=e.indexOf("=")-t;s<0&&(s=e.length-t);const i=3*(s>>2)+Math.floor(s%4/1.5),n=new Array(i);let a=0,r=0;for(let s=0,i=t;i<e.length;i++){const t=this.toBinaryTable[127&e.charCodeAt(i)],o=e.charAt(i)===this.base64Pad;-1!==t?(r=r<<6|t,a+=6,a>=8&&(a-=8,o||(n[s++]=r>>a&255),r&=(1<<a)-1)):l("Illegal character code "+e.charCodeAt(i)+" at position "+i)}if(a){const e=new Error("Corrupted base64 string");throw e.name="Base64-Error",e}return n}};class R{constructor(e){if(this._drawCtx=null,this._renderQ=[],this._flushing=!1,this._fbWidth=0,this._fbHeight=0,this._prevDrawStyle="",a(">> Display.constructor"),this._target=e,!this._target)throw new Error("Target must be set");if("string"==typeof this._target)throw new Error("target must be a DOM element");if(!this._target.getContext)throw new Error("no getContext method");this._targetCtx=this._target.getContext("2d"),this._viewportLoc={x:0,y:0,w:this._target.width,h:this._target.height},this._backbuffer=document.createElement("canvas"),this._drawCtx=this._backbuffer.getContext("2d"),this._damageBounds={left:0,top:0,right:this._backbuffer.width,bottom:this._backbuffer.height},a("User Agent: "+navigator.userAgent),a("<< Display.constructor"),this._scale=1,this._clipViewport=!1,this.onflush=()=>{}}get scale(){return this._scale}set scale(e){this._rescale(e)}get clipViewport(){return this._clipViewport}set clipViewport(e){this._clipViewport=e;const t=this._viewportLoc;this.viewportChangeSize(t.w,t.h),this.viewportChangePos(0,0)}get width(){return this._fbWidth}get height(){return this._fbHeight}viewportChangePos(e,t){const s=this._viewportLoc;e=Math.floor(e),t=Math.floor(t),this._clipViewport||(e=-s.w,t=-s.h);const i=s.x+s.w-1,n=s.y+s.h-1;e<0&&s.x+e<0&&(e=-s.x),i+e>=this._fbWidth&&(e-=i+e-this._fbWidth+1),s.y+t<0&&(t=-s.y),n+t>=this._fbHeight&&(t-=n+t-this._fbHeight+1),0===e&&0===t||(a("viewportChange deltaX: "+e+", deltaY: "+t),s.x+=e,s.y+=t,this._damage(s.x,s.y,s.w,s.h),this.flip())}viewportChangeSize(e,t){this._clipViewport&&void 0!==e&&void 0!==t||(a("Setting viewport to full display region"),e=this._fbWidth,t=this._fbHeight),e=Math.floor(e),t=Math.floor(t),e>this._fbWidth&&(e=this._fbWidth),t>this._fbHeight&&(t=this._fbHeight);const s=this._viewportLoc;if(s.w!==e||s.h!==t){s.w=e,s.h=t;const i=this._target;i.width=e,i.height=t,this.viewportChangePos(0,0),this._damage(s.x,s.y,s.w,s.h),this.flip(),this._rescale(this._scale)}}absX(e){return 0===this._scale?0:i(e/this._scale+this._viewportLoc.x)}absY(e){return 0===this._scale?0:i(e/this._scale+this._viewportLoc.y)}resize(e,t){this._prevDrawStyle="",this._fbWidth=e,this._fbHeight=t;const s=this._backbuffer;if(s.width!==e||s.height!==t){let i=null;s.width>0&&s.height>0&&(i=this._drawCtx.getImageData(0,0,s.width,s.height)),s.width!==e&&(s.width=e),s.height!==t&&(s.height=t),i&&this._drawCtx.putImageData(i,0,0)}const i=this._viewportLoc;this.viewportChangeSize(i.w,i.h),this.viewportChangePos(0,0)}_damage(e,t,s,i){e<this._damageBounds.left&&(this._damageBounds.left=e),t<this._damageBounds.top&&(this._damageBounds.top=t),e+s>this._damageBounds.right&&(this._damageBounds.right=e+s),t+i>this._damageBounds.bottom&&(this._damageBounds.bottom=t+i)}flip(e){if(0===this._renderQ.length||e){let e=this._damageBounds.left,t=this._damageBounds.top,s=this._damageBounds.right-e,i=this._damageBounds.bottom-t,n=e-this._viewportLoc.x,a=t-this._viewportLoc.y;n<0&&(s+=n,e-=n,n=0),a<0&&(i+=a,t-=a,a=0),n+s>this._viewportLoc.w&&(s=this._viewportLoc.w-n),a+i>this._viewportLoc.h&&(i=this._viewportLoc.h-a),s>0&&i>0&&this._targetCtx.drawImage(this._backbuffer,e,t,s,i,n,a,s,i),this._damageBounds.left=this._damageBounds.top=65535,this._damageBounds.right=this._damageBounds.bottom=0}else this._renderQPush({type:"flip"})}pending(){return this._renderQ.length>0}flush(){0===this._renderQ.length?this.onflush():this._flushing=!0}fillRect(e,t,s,i,n,a){0===this._renderQ.length||a?(this._setFillColor(n),this._drawCtx.fillRect(e,t,s,i),this._damage(e,t,s,i)):this._renderQPush({type:"fill",x:e,y:t,width:s,height:i,color:n})}copyImage(e,t,s,i,n,a,r){0===this._renderQ.length||r?(this._drawCtx.mozImageSmoothingEnabled=!1,this._drawCtx.webkitImageSmoothingEnabled=!1,this._drawCtx.msImageSmoothingEnabled=!1,this._drawCtx.imageSmoothingEnabled=!1,this._drawCtx.drawImage(this._backbuffer,e,t,n,a,s,i,n,a),this._damage(s,i,n,a)):this._renderQPush({type:"copy",oldX:e,oldY:t,x:s,y:i,width:n,height:a})}imageRect(e,t,s,i,n,a){if(0===s||0===i)return;const r=new Image;r.src="data: "+n+";base64,"+A.encode(a),this._renderQPush({type:"img",img:r,x:e,y:t,width:s,height:i})}blitImage(e,t,s,i,n,a,r){if(0===this._renderQ.length||r){let r=new Uint8ClampedArray(n.buffer,n.byteOffset+a,s*i*4),o=new ImageData(r,s,i);this._drawCtx.putImageData(o,e,t),this._damage(e,t,s,i)}else{const a=new Uint8Array(s*i*4);a.set(new Uint8Array(n.buffer,0,a.length)),this._renderQPush({type:"blit",data:a,x:e,y:t,width:s,height:i})}}drawImage(e,t,s){this._drawCtx.drawImage(e,t,s),this._damage(t,s,e.width,e.height)}autoscale(e,t){let s;if(0===e||0===t)s=0;else{const i=this._viewportLoc,n=e/t;s=i.w/i.h>=n?e/i.w:t/i.h}this._rescale(s)}_rescale(e){this._scale=e;const t=this._viewportLoc,s=e*t.w+"px",i=e*t.h+"px";this._target.style.width===s&&this._target.style.height===i||(this._target.style.width=s,this._target.style.height=i)}_setFillColor(e){const t="rgb("+e[0]+","+e[1]+","+e[2]+")";t!==this._prevDrawStyle&&(this._drawCtx.fillStyle=t,this._prevDrawStyle=t)}_renderQPush(e){this._renderQ.push(e),1===this._renderQ.length&&this._scanRenderQ()}_resumeRenderQ(){this.removeEventListener("load",this._noVNCDisplay._resumeRenderQ),this._noVNCDisplay._scanRenderQ()}_scanRenderQ(){let e=!0;for(;e&&this._renderQ.length>0;){const t=this._renderQ[0];switch(t.type){case"flip":this.flip(!0);break;case"copy":this.copyImage(t.oldX,t.oldY,t.x,t.y,t.width,t.height,!0);break;case"fill":this.fillRect(t.x,t.y,t.width,t.height,t.color,!0);break;case"blit":this.blitImage(t.x,t.y,t.width,t.height,t.data,0,!0);break;case"img":if(t.img.complete){if(t.img.width!==t.width||t.img.height!==t.height)return void l("Decoded image has incorrect dimensions. Got "+t.img.width+"x"+t.img.height+". Expected "+t.width+"x"+t.height+".");this.drawImage(t.img,t.x,t.y)}else t.img._noVNCDisplay=this,t.img.addEventListener("load",this._resumeRenderQ),e=!1}e&&this._renderQ.shift()}0===this._renderQ.length&&this._flushing&&(this._flushing=!1,this.onflush())}}function M(e,t,s,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(s,s+i),n);else for(var a=0;a<i;a++)e[n+a]=t[s+a]}var T=Uint8Array,L=Uint16Array,I=Int32Array;function P(e,t,s,i){for(var n=65535&e|0,a=e>>>16&65535|0,r=0;0!==s;){s-=r=s>2e3?2e3:s;do{a=a+(n=n+t[i++]|0)|0}while(--r);n%=65521,a%=65521}return n|a<<16|0}function O(){for(var e,t=[],s=0;s<256;s++){e=s;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t}O();function D(e,t){var s,i,n,a,r,o,l,c,u,h,d,f,p,_,g,m,b,v,w,y,k,E,S,C,x;s=e.state,i=e.next_in,C=e.input,n=i+(e.avail_in-5),a=e.next_out,x=e.output,r=a-(t-e.avail_out),o=a+(e.avail_out-257),l=s.dmax,c=s.wsize,u=s.whave,h=s.wnext,d=s.window,f=s.hold,p=s.bits,_=s.lencode,g=s.distcode,m=(1<<s.lenbits)-1,b=(1<<s.distbits)-1;e:do{p<15&&(f+=C[i++]<<p,p+=8,f+=C[i++]<<p,p+=8),v=_[f&m];t:for(;;){if(f>>>=w=v>>>24,p-=w,0===(w=v>>>16&255))x[a++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=_[(65535&v)+(f&(1<<w)-1)];continue t}if(32&w){s.mode=12;break e}e.msg="invalid literal/length code",s.mode=30;break e}y=65535&v,(w&=15)&&(p<w&&(f+=C[i++]<<p,p+=8),y+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=C[i++]<<p,p+=8,f+=C[i++]<<p,p+=8),v=g[f&b];s:for(;;){if(f>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(f&(1<<w)-1)];continue s}e.msg="invalid distance code",s.mode=30;break e}if(k=65535&v,p<(w&=15)&&(f+=C[i++]<<p,(p+=8)<w&&(f+=C[i++]<<p,p+=8)),(k+=f&(1<<w)-1)>l){e.msg="invalid distance too far back",s.mode=30;break e}if(f>>>=w,p-=w,k>(w=a-r)){if((w=k-w)>u&&s.sane){e.msg="invalid distance too far back",s.mode=30;break e}if(E=0,S=d,0===h){if(E+=c-w,w<y){y-=w;do{x[a++]=d[E++]}while(--w);E=a-k,S=x}}else if(h<w){if(E+=c+h-w,(w-=h)<y){y-=w;do{x[a++]=d[E++]}while(--w);if(E=0,h<y){y-=w=h;do{x[a++]=d[E++]}while(--w);E=a-k,S=x}}}else if(E+=h-w,w<y){y-=w;do{x[a++]=d[E++]}while(--w);E=a-k,S=x}for(;y>2;)x[a++]=S[E++],x[a++]=S[E++],x[a++]=S[E++],y-=3;y&&(x[a++]=S[E++],y>1&&(x[a++]=S[E++]))}else{E=a-k;do{x[a++]=x[E++],x[a++]=x[E++],x[a++]=x[E++],y-=3}while(y>2);y&&(x[a++]=x[E++],y>1&&(x[a++]=x[E++]))}break}}break}}while(i<n&&a<o);i-=y=p>>3,f&=(1<<(p-=y<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<o?o-a+257:257-(a-o),s.hold=f,s.bits=p}var N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],B=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Q=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function U(e,t,s,i,n,a,r,o){var l,c,u,h,d,f,p,_,g,m=o.bits,b=0,v=0,w=0,y=0,k=0,E=0,S=0,C=0,x=0,A=0,R=null,M=0,T=new L(16),I=new L(16),P=null,O=0;for(b=0;b<=15;b++)T[b]=0;for(v=0;v<i;v++)T[t[s+v]]++;for(k=m,y=15;y>=1&&0===T[y];y--);if(k>y&&(k=y),0===y)return n[a++]=20971520,n[a++]=20971520,o.bits=1,0;for(w=1;w<y&&0===T[w];w++);for(k<w&&(k=w),C=1,b=1;b<=15;b++)if(C<<=1,(C-=T[b])<0)return-1;if(C>0&&(0===e||1!==y))return-1;for(I[1]=0,b=1;b<15;b++)I[b+1]=I[b]+T[b];for(v=0;v<i;v++)0!==t[s+v]&&(r[I[t[s+v]]++]=v);if(0===e?(R=P=r,f=19):1===e?(R=N,M-=257,P=B,O-=257,f=256):(R=F,P=Q,f=-1),A=0,v=0,b=w,d=a,E=k,S=0,u=-1,h=(x=1<<k)-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){p=b-S,r[v]<f?(_=0,g=r[v]):r[v]>f?(_=P[O+r[v]],g=R[M+r[v]]):(_=96,g=0),l=1<<b-S,w=c=1<<E;do{n[d+(A>>S)+(c-=l)]=p<<24|_<<16|g|0}while(0!==c);for(l=1<<b-1;A&l;)l>>=1;if(0!==l?(A&=l-1,A+=l):A=0,v++,0==--T[b]){if(b===y)break;b=t[s+r[v]]}if(b>k&&(A&h)!==u){for(0===S&&(S=k),d+=w,C=1<<(E=b-S);E+S<y&&!((C-=T[E+S])<=0);)E++,C<<=1;if(x+=1<<E,1===e&&x>852||2===e&&x>592)return 1;n[u=A&h]=k<<24|E<<16|d-a|0}}return 0!==A&&(n[d+A]=b-S<<24|64<<16|0),o.bits=k,0}function z(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function H(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new L(320),this.work=new L(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new I(852),t.distcode=t.distdyn=new I(592),t.sane=1,t.back=-1,0):-2}(e)):-2}function V(e,t){var s,i;return e?(i=new H,e.state=i,i.window=null,0!==(s=function(e,t){var s,i;return e&&e.state?(i=e.state,t<0?(s=0,t=-t):(s=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=s,i.wbits=t,G(e))):-2}(e,t))&&(e.state=null),s):-2}var j,q,W=!0;function X(e){if(W){var t;for(j=new I(512),q=new I(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(U(1,e.lens,0,288,j,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;U(2,e.lens,0,32,q,0,e.work,{bits:5}),W=!1}e.lencode=j,e.lenbits=9,e.distcode=q,e.distbits=5}function K(e,t,s,i){var n,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new T(a.wsize)),i>=a.wsize?(M(a.window,t,s-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((n=a.wsize-a.wnext)>i&&(n=i),M(a.window,t,s-i,n,a.wnext),(i-=n)?(M(a.window,t,s-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}function Y(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}class ${constructor(){var e;this.strm=new Y,this.chunkSize=102400,this.strm.output=new Uint8Array(this.chunkSize),this.windowBits=5,e=this.strm,this.windowBits,V(e,15)}setInput(e){e?(this.strm.input=e,this.strm.avail_in=this.strm.input.length,this.strm.next_in=0):(this.strm.input=null,this.strm.avail_in=0,this.strm.next_in=0)}inflate(e){if(e>this.chunkSize&&(this.chunkSize=e,this.strm.output=new Uint8Array(this.chunkSize)),this.strm.next_out=0,this.strm.avail_out=e,function(e,t){var s,i,n,a,r,o,l,c,u,h,d,f,p,_,g,m,b,v,w,y,k,E,S,C,x=0,A=new T(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(s=e.state).mode&&(s.mode=13),r=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,c=s.hold,u=s.bits,h=o,d=l,E=0;e:for(;;)switch(s.mode){case 1:if(0===s.wrap){s.mode=13;break}for(;u<16;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(2&s.wrap&&35615===c){s.check=0,A[0]=255&c,A[1]=c>>>8&255,s.check=O(s.check),c=0,u=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",s.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",s.mode=30;break}if(u-=4,k=8+(15&(c>>>=4)),0===s.wbits)s.wbits=k;else if(k>s.wbits){e.msg="invalid window size",s.mode=30;break}s.dmax=1<<k,e.adler=s.check=1,s.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(s.flags=c,8!=(255&s.flags)){e.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=c>>8&1),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=O(s.check)),c=0,u=0,s.mode=3;case 3:for(;u<32;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.head&&(s.head.time=c),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,s.check=O(s.check)),c=0,u=0,s.mode=4;case 4:for(;u<16;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.head&&(s.head.xflags=255&c,s.head.os=c>>8),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=O(s.check)),c=0,u=0,s.mode=5;case 5:if(1024&s.flags){for(;u<16;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.length=c,s.head&&(s.head.extra_len=c),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=O(s.check)),c=0,u=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&((f=s.length)>o&&(f=o),f&&(s.head&&(k=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),M(s.head.extra,i,a,f,k)),512&s.flags&&(s.check=O(s.check)),o-=f,a+=f,s.length-=f),s.length))break e;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(0===o)break e;f=0;do{k=i[a+f++],s.head&&k&&s.length<65536&&(s.head.name+=String.fromCharCode(k))}while(k&&f<o);if(512&s.flags&&(s.check=O(s.check)),o-=f,a+=f,k)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(0===o)break e;f=0;do{k=i[a+f++],s.head&&k&&s.length<65536&&(s.head.comment+=String.fromCharCode(k))}while(k&&f<o);if(512&s.flags&&(s.check=O(s.check)),o-=f,a+=f,k)break e}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;u<16;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(c!==(65535&s.check)){e.msg="header crc mismatch",s.mode=30;break}c=0,u=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=12;break;case 10:for(;u<32;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}e.adler=s.check=z(c),c=0,u=0,s.mode=11;case 11:if(0===s.havedict)return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,s.hold=c,s.bits=u,2;e.adler=s.check=1,s.mode=12;case 12:if(5===t||6===t)break e;case 13:if(s.last){c>>>=7&u,u-=7&u,s.mode=27;break}for(;u<3;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}switch(s.last=1&c,u-=1,3&(c>>>=1)){case 0:s.mode=14;break;case 1:if(X(s),s.mode=20,6===t){c>>>=2,u-=2;break e}break;case 2:s.mode=17;break;case 3:e.msg="invalid block type",s.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&c,c=0,u=0,s.mode=15,6===t)break e;case 15:s.mode=16;case 16:if(f=s.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;M(n,i,a,f,r),o-=f,a+=f,l-=f,r+=f,s.length-=f;break}s.mode=12;break;case 17:for(;u<14;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(s.nlen=257+(31&c),c>>>=5,u-=5,s.ndist=1+(31&c),c>>>=5,u-=5,s.ncode=4+(15&c),c>>>=4,u-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;u<3;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.lens[R[s.have++]]=7&c,c>>>=3,u-=3}for(;s.have<19;)s.lens[R[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,S={bits:s.lenbits},E=U(0,s.lens,0,19,s.lencode,0,s.work,S),s.lenbits=S.bits,E){e.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;m=(x=s.lencode[c&(1<<s.lenbits)-1])>>>16&255,b=65535&x,!((g=x>>>24)<=u);){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(b<16)c>>>=g,u-=g,s.lens[s.have++]=b;else{if(16===b){for(C=g+2;u<C;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(c>>>=g,u-=g,0===s.have){e.msg="invalid bit length repeat",s.mode=30;break}k=s.lens[s.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===b){for(C=g+3;u<C;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}u-=g,k=0,f=3+(7&(c>>>=g)),c>>>=3,u-=3}else{for(C=g+7;u<C;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}u-=g,k=0,f=11+(127&(c>>>=g)),c>>>=7,u-=7}if(s.have+f>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=30;break}for(;f--;)s.lens[s.have++]=k}}if(30===s.mode)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,S={bits:s.lenbits},E=U(1,s.lens,0,s.nlen,s.lencode,0,s.work,S),s.lenbits=S.bits,E){e.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,S={bits:s.distbits},E=U(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,S),s.distbits=S.bits,E){e.msg="invalid distances set",s.mode=30;break}if(s.mode=20,6===t)break e;case 20:s.mode=21;case 21:if(o>=6&&l>=258){e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,s.hold=c,s.bits=u,D(e,d),r=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,c=s.hold,u=s.bits,12===s.mode&&(s.back=-1);break}for(s.back=0;m=(x=s.lencode[c&(1<<s.lenbits)-1])>>>16&255,b=65535&x,!((g=x>>>24)<=u);){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(m&&0==(240&m)){for(v=g,w=m,y=b;m=(x=s.lencode[y+((c&(1<<v+w)-1)>>v)])>>>16&255,b=65535&x,!(v+(g=x>>>24)<=u);){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}c>>>=v,u-=v,s.back+=v}if(c>>>=g,u-=g,s.back+=g,s.length=b,0===m){s.mode=26;break}if(32&m){s.back=-1,s.mode=12;break}if(64&m){e.msg="invalid literal/length code",s.mode=30;break}s.extra=15&m,s.mode=22;case 22:if(s.extra){for(C=s.extra;u<C;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.length+=c&(1<<s.extra)-1,c>>>=s.extra,u-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;m=(x=s.distcode[c&(1<<s.distbits)-1])>>>16&255,b=65535&x,!((g=x>>>24)<=u);){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(0==(240&m)){for(v=g,w=m,y=b;m=(x=s.distcode[y+((c&(1<<v+w)-1)>>v)])>>>16&255,b=65535&x,!(v+(g=x>>>24)<=u);){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}c>>>=v,u-=v,s.back+=v}if(c>>>=g,u-=g,s.back+=g,64&m){e.msg="invalid distance code",s.mode=30;break}s.offset=b,s.extra=15&m,s.mode=24;case 24:if(s.extra){for(C=s.extra;u<C;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}s.offset+=c&(1<<s.extra)-1,c>>>=s.extra,u-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(0===l)break e;if(f=d-l,s.offset>f){if((f=s.offset-f)>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=30;break}f>s.wnext?(f-=s.wnext,p=s.wsize-f):p=s.wnext-f,f>s.length&&(f=s.length),_=s.window}else _=n,p=r-s.offset,f=s.length;f>l&&(f=l),l-=f,s.length-=f;do{n[r++]=_[p++]}while(--f);0===s.length&&(s.mode=21);break;case 26:if(0===l)break e;n[r++]=s.length,l--,s.mode=21;break;case 27:if(s.wrap){for(;u<32;){if(0===o)break e;o--,c|=i[a++]<<u,u+=8}if(d-=l,e.total_out+=d,s.total+=d,d&&(e.adler=s.check=s.flags?O(s.check):P(s.check,n,d,r-d)),d=l,(s.flags?c:z(c))!==s.check){e.msg="incorrect data check",s.mode=30;break}c=0,u=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;u<32;){if(0===o)break e;o--,c+=i[a++]<<u,u+=8}if(c!==(4294967295&s.total)){e.msg="incorrect length check",s.mode=30;break}c=0,u=0}s.mode=29;case 29:E=1;break e;case 30:E=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,s.hold=c,s.bits=u,(s.wsize||d!==e.avail_out&&s.mode<30&&(s.mode<27||4!==t))&&K(e,e.output,e.next_out,d-e.avail_out)?(s.mode=31,-4):(h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,s.total+=d,s.wrap&&d&&(e.adler=s.check=s.flags?O(s.check,e.next_out):P(s.check,n,d,e.next_out-d)),e.data_type=s.bits+(s.last?64:0)+(12===s.mode?128:0)+(20===s.mode||15===s.mode?256:0),(0===h&&0===d||4===t)&&0===E&&(E=-5),E)}(this.strm,0)<0)throw new Error("zlib inflate failed");if(this.strm.next_out!=e)throw new Error("Incomplete zlib block");return new Uint8Array(this.strm.output.buffer,0,this.strm.next_out)}reset(){G(this.strm)}}function J(e){for(var t=e.length;--t>=0;)e[t]=0}var Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=new Array(576);J(ie);var ne=new Array(60);J(ne);var ae=new Array(512);J(ae);var re=new Array(256);J(re);var oe=new Array(29);J(oe);var le,ce,ue,he=new Array(30);function de(e,t,s,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=s,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function fe(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function pe(e){return e<256?ae[e]:ae[256+(e>>>7)]}function _e(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function ge(e,t,s){e.bi_valid>16-s?(e.bi_buf|=t<<e.bi_valid&65535,_e(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=s-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=s)}function me(e,t,s){ge(e,s[2*t],s[2*t+1])}function be(e,t){var s=0;do{s|=1&e,e>>>=1,s<<=1}while(--t>0);return s>>>1}function ve(e,t,s){var i,n,a=new Array(16),r=0;for(i=1;i<=15;i++)a[i]=r=r+s[i-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=be(a[o]++,o))}}function we(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function ye(e){e.bi_valid>8?_e(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function ke(e,t,s,i){var n=2*t,a=2*s;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[s]}function Ee(e,t,s){for(var i=e.heap[s],n=s<<1;n<=e.heap_len&&(n<e.heap_len&&ke(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!ke(t,i,e.heap[n],e.depth));)e.heap[s]=e.heap[n],s=n,n<<=1;e.heap[s]=i}function Se(e,t,s){var i,n,a,r,o=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],n=e.pending_buf[e.l_buf+o],o++,0===i?me(e,n,t):(me(e,(a=re[n])+256+1,t),0!==(r=Z[a])&&ge(e,n-=oe[a],r),me(e,a=pe(--i),s),0!==(r=ee[a])&&ge(e,i-=he[a],r))}while(o<e.last_lit);me(e,256,t)}function Ce(e,t){var s,i,n,a=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<l;s++)0!==a[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):a[2*s+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=r[2*n+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)Ee(e,a,s);n=l;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ee(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=i,a[2*n]=a[2*s]+a[2*i],e.depth[n]=(e.depth[s]>=e.depth[i]?e.depth[s]:e.depth[i])+1,a[2*s+1]=a[2*i+1]=n,e.heap[1]=n++,Ee(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var s,i,n,a,r,o,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<573;s++)(a=l[2*l[2*(i=e.heap[s])+1]+1]+1)>p&&(a=p,_++),l[2*i+1]=a,i>c||(e.bl_count[a]++,r=0,i>=f&&(r=d[i-f]),o=l[2*i],e.opt_len+=o*(a+r),h&&(e.static_len+=o*(u[2*i+1]+r)));if(0!==_){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(a=p;0!==a;a--)for(i=e.bl_count[a];0!==i;)(n=e.heap[--s])>c||(l[2*n+1]!==a&&(e.opt_len+=(a-l[2*n+1])*l[2*n],l[2*n+1]=a),i--)}}(e,t),ve(a,c,e.bl_count)}function xe(e,t,s){var i,n,a=-1,r=t[1],o=0,l=7,c=4;for(0===r&&(l=138,c=3),t[2*(s+1)+1]=65535,i=0;i<=s;i++)n=r,r=t[2*(i+1)+1],++o<l&&n===r||(o<c?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=n,0===r?(l=138,c=3):n===r?(l=6,c=3):(l=7,c=4))}function Ae(e,t,s){var i,n,a=-1,r=t[1],o=0,l=7,c=4;for(0===r&&(l=138,c=3),i=0;i<=s;i++)if(n=r,r=t[2*(i+1)+1],!(++o<l&&n===r)){if(o<c)do{me(e,n,e.bl_tree)}while(0!=--o);else 0!==n?(n!==a&&(me(e,n,e.bl_tree),o--),me(e,16,e.bl_tree),ge(e,o-3,2)):o<=10?(me(e,17,e.bl_tree),ge(e,o-3,3)):(me(e,18,e.bl_tree),ge(e,o-11,7));o=0,a=n,0===r?(l=138,c=3):n===r?(l=6,c=3):(l=7,c=4)}}J(he);var Re=!1;function Me(e){Re||(!function(){var e,t,s,i,n,a=new Array(16);for(s=0,i=0;i<28;i++)for(oe[i]=s,e=0;e<1<<Z[i];e++)re[s++]=i;for(re[s-1]=i,n=0,i=0;i<16;i++)for(he[i]=n,e=0;e<1<<ee[i];e++)ae[n++]=i;for(n>>=7;i<30;i++)for(he[i]=n<<7,e=0;e<1<<ee[i]-7;e++)ae[256+n++]=i;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)ie[2*e+1]=8,e++,a[8]++;for(;e<=255;)ie[2*e+1]=9,e++,a[9]++;for(;e<=279;)ie[2*e+1]=7,e++,a[7]++;for(;e<=287;)ie[2*e+1]=8,e++,a[8]++;for(ve(ie,287,a),e=0;e<30;e++)ne[2*e+1]=5,ne[2*e]=be(e,5);le=new de(ie,Z,257,286,15),ce=new de(ne,ee,0,30,15),ue=new de(new Array(0),te,0,19,7)}(),Re=!0),e.l_desc=new fe(e.dyn_ltree,le),e.d_desc=new fe(e.dyn_dtree,ce),e.bl_desc=new fe(e.bl_tree,ue),e.bi_buf=0,e.bi_valid=0,we(e)}function Te(e,t,s,i){ge(e,0+(i?1:0),3),function(e,t,s,i){ye(e),i&&(_e(e,s),_e(e,~s)),M(e.pending_buf,e.window,t,s,e.pending),e.pending+=s}(e,t,s,!0)}function Le(e){ge(e,2,3),me(e,256,ie),function(e){16===e.bi_valid?(_e(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function Ie(e,t,s,i){var n,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,s=4093624447;for(t=0;t<=31;t++,s>>>=1)if(1&s&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Ce(e,e.l_desc),Ce(e,e.d_desc),r=function(e){var t;for(xe(e,e.dyn_ltree,e.l_desc.max_code),xe(e,e.dyn_dtree,e.d_desc.max_code),Ce(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*se[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=n&&(n=a)):n=a=s+5,s+4<=n&&-1!==t?Te(e,t,s,i):4===e.strategy||a===n?(ge(e,2+(i?1:0),3),Se(e,ie,ne)):(ge(e,4+(i?1:0),3),function(e,t,s,i){var n;for(ge(e,t-257,5),ge(e,s-1,5),ge(e,i-4,4),n=0;n<i;n++)ge(e,e.bl_tree[2*se[n]+1],3);Ae(e,e.dyn_ltree,t-1),Ae(e,e.dyn_dtree,s-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),Se(e,e.dyn_ltree,e.dyn_dtree)),we(e),i&&ye(e)}function Pe(e,t,s){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&s,e.last_lit++,0===t?e.dyn_ltree[2*s]++:(e.matches++,t--,e.dyn_ltree[2*(re[s]+256+1)]++,e.dyn_dtree[2*pe(t)]++),e.last_lit===e.lit_bufsize-1}var Oe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var De;function Ne(e,t){return e.msg=Oe[t],t}function Be(e){return(e<<1)-(e>4?9:0)}function Fe(e){for(var t=e.length;--t>=0;)e[t]=0}function Qe(e){var t=e.state,s=t.pending;s>e.avail_out&&(s=e.avail_out),0!==s&&(M(e.output,t.pending_buf,t.pending_out,s,e.next_out),e.next_out+=s,t.pending_out+=s,e.total_out+=s,e.avail_out-=s,t.pending-=s,0===t.pending&&(t.pending_out=0))}function Ue(e,t){Ie(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qe(e.strm)}function ze(e,t){e.pending_buf[e.pending++]=t}function He(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Ge(e,t){var s,i,n=e.max_chain_length,a=e.strstart,r=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+258,f=c[a+r-1],p=c[a+r];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(s=t)+r]===p&&c[s+r-1]===f&&c[s]===c[a]&&c[++s]===c[a+1]){a+=2,s++;do{}while(c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&c[++a]===c[++s]&&a<d);if(i=258-(d-a),a=d-258,i>r){if(e.match_start=t,r=i,i>=o)break;f=c[a+r-1],p=c[a+r]}}}while((t=h[t&u])>l&&0!=--n);return r<=e.lookahead?r:e.lookahead}function Ve(e){var t,s,i,n,a,r,o,l,c,u,h=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-262)){M(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=s=e.hash_size;do{i=e.head[--t],e.head[t]=i>=h?i-h:0}while(--s);t=s=h;do{i=e.prev[--t],e.prev[t]=i>=h?i-h:0}while(--s);n+=h}if(0===e.strm.avail_in)break;if(r=e.strm,o=e.window,l=e.strstart+e.lookahead,c=n,u=void 0,(u=r.avail_in)>c&&(u=c),s=0===u?0:(r.avail_in-=u,M(o,r.input,r.next_in,u,l),1===r.state.wrap?r.adler=P(r.adler,o,u,l):2===r.state.wrap&&(r.adler=O(r.adler)),r.next_in+=u,r.total_in+=u,u),e.lookahead+=s,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function je(e,t){for(var s,i;;){if(e.lookahead<262){if(Ve(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==s&&e.strstart-s<=e.w_size-262&&(e.match_length=Ge(e,s)),e.match_length>=3)if(i=Pe(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=Pe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Ue(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(Ue(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ue(e,!1),0===e.strm.avail_out)?1:2}function qe(e,t){for(var s,i,n;;){if(e.lookahead<262){if(Ve(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==s&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-262&&(e.match_length=Ge(e,s),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=Pe(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Ue(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=Pe(e,0,e.window[e.strstart-1]))&&Ue(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Pe(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(Ue(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ue(e,!1),0===e.strm.avail_out)?1:2}function We(e,t,s,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=s,this.max_chain=i,this.func=n}function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new L(1146),this.dyn_dtree=new L(122),this.bl_tree=new L(78),Fe(this.dyn_ltree),Fe(this.dyn_dtree),Fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new L(16),this.heap=new L(573),Fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new L(573),Fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ke(e){var t,s=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,Me(t),0):Ne(e,-2)}(e);return 0===s&&((t=e.state).window_size=2*t.w_size,Fe(t.head),t.max_lazy_match=De[t.level].max_lazy,t.good_match=De[t.level].good_length,t.nice_match=De[t.level].nice_length,t.max_chain_length=De[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),s}function Ye(e,t){return function(e,t,s,i,n,a){if(!e)return-2;var r=1;if(-1===t&&(t=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||8!==s||i<8||i>15||t<0||t>9||a<0||a>4)return Ne(e,-2);8===i&&(i=9);var o=new Xe;return e.state=o,o.strm=e,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new T(2*o.w_size),o.head=new L(o.hash_size),o.prev=new L(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new T(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=s,Ke(e)}(e,t,8,15,8,0)}function $e(e,t){var s,i,n,a;if(!e||!e.state||t>5||t<0)return e?Ne(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return Ne(e,0===e.avail_out?-5:-2);if(i.strm=e,s=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,ze(i,31),ze(i,139),ze(i,8),i.gzhead?(ze(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),ze(i,255&i.gzhead.time),ze(i,i.gzhead.time>>8&255),ze(i,i.gzhead.time>>16&255),ze(i,i.gzhead.time>>24&255),ze(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),ze(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(ze(i,255&i.gzhead.extra.length),ze(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=O(e.adler,i.pending_buf,i.pending)),i.gzindex=0,i.status=69):(ze(i,0),ze(i,0),ze(i,0),ze(i,0),ze(i,0),ze(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),ze(i,3),i.status=113);else{var r=8+(i.w_bits-8<<4)<<8;r|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(r|=32),r+=31-r%31,i.status=113,He(i,r),0!==i.strstart&&(He(i,e.adler>>>16),He(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),Qe(e),n=i.pending,i.pending!==i.pending_buf_size));)ze(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),Qe(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,ze(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),0===a&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),Qe(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,ze(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(e.adler=O(e.adler,i.pending_buf,i.pending)),0===a&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Qe(e),i.pending+2<=i.pending_buf_size&&(ze(i,255&e.adler),ze(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(Qe(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&Be(t)<=Be(s)&&4!==t)return Ne(e,-5);if(666===i.status&&0!==e.avail_in)return Ne(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var o=2===i.strategy?function(e,t){for(var s;;){if(0===e.lookahead&&(Ve(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,s=Pe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(Ue(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(Ue(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ue(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var s,i,n,a,r=e.window;;){if(e.lookahead<=258){if(Ve(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=r[n=e.strstart-1])===r[++n]&&i===r[++n]&&i===r[++n]){a=e.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<a);e.match_length=258-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(s=Pe(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=Pe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(Ue(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(Ue(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ue(e,!1),0===e.strm.avail_out)?1:2}(i,t):De[i.level].func(i,t);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===o&&(1===t?Le(i):5!==t&&(Te(i,0,0,!1),3===t&&(Fe(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Qe(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(ze(i,255&e.adler),ze(i,e.adler>>8&255),ze(i,e.adler>>16&255),ze(i,e.adler>>24&255),ze(i,255&e.total_in),ze(i,e.total_in>>8&255),ze(i,e.total_in>>16&255),ze(i,e.total_in>>24&255)):(He(i,e.adler>>>16),He(i,65535&e.adler)),Qe(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)}De=[new We(0,0,0,0,(function(e,t){var s=65535;for(s>e.pending_buf_size-5&&(s=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ve(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+s;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Ue(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(Ue(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(Ue(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Ue(e,!1),e.strm.avail_out),1)})),new We(4,4,8,4,je),new We(4,5,16,8,je),new We(4,6,32,32,je),new We(4,4,16,16,qe),new We(8,16,32,32,qe),new We(8,16,128,128,qe),new We(8,32,128,256,qe),new We(32,128,258,1024,qe),new We(32,258,258,4096,qe)];class Je{constructor(){this.strm=new Y,this.chunkSize=102400,this.outputBuffer=new Uint8Array(this.chunkSize),this.windowBits=5,Ye(this.strm,this.windowBits)}deflate(e){this.strm.input=e,this.strm.avail_in=this.strm.input.length,this.strm.next_in=0,this.strm.output=this.outputBuffer,this.strm.avail_out=this.chunkSize,this.strm.next_out=0;let t=$e(this.strm,3),s=new Uint8Array(this.strm.output.buffer,0,this.strm.next_out);if(t<0)throw new Error("zlib deflate failed");if(this.strm.avail_in>0){let e=[s],i=s.length;do{if(this.strm.output=new Uint8Array(this.chunkSize),this.strm.next_out=0,this.strm.avail_out=this.chunkSize,t=$e(this.strm,3),t<0)throw new Error("zlib deflate failed");let s=new Uint8Array(this.strm.output.buffer,0,this.strm.next_out);i+=s.length,e.push(s)}while(this.strm.avail_in>0);let n=new Uint8Array(i),a=0;for(let t=0;t<e.length;t++)n.set(e[t],a),a+=e[t].length;s=n}return this.strm.input=null,this.strm.avail_in=0,this.strm.next_in=0,s}}var Ze=65288,et=65289,tt=65291,st=65293,it=65299,nt=65300,at=65307,rt=65535,ot=65312,lt=65335,ct=65340,ut=65341,ht=65342,dt=65313,ft=65314,pt=65315,_t=65316,gt=65317,mt=65318,bt=65319,vt=65320,wt=65321,yt=65322,kt=65326,Et=65328,St=65360,Ct=65361,xt=65362,At=65363,Rt=65364,Mt=65365,Tt=65366,Lt=65367,It=65376,Pt=65377,Ot=65378,Dt=65379,Nt=65381,Bt=65382,Ft=65383,Qt=65384,Ut=65385,zt=65386,Ht=65406,Gt=65407,Vt=65408,jt=65421,qt=65429,Wt=65430,Xt=65431,Kt=65432,Yt=65433,$t=65434,Jt=65435,Zt=65436,es=65437,ts=65438,ss=65439,is=65469,ns=65450,as=65451,rs=65452,os=65453,ls=65454,cs=65455,us=65456,hs=65457,ds=65458,fs=65459,ps=65460,_s=65461,gs=65462,ms=65463,bs=65464,vs=65465,ws=65470,ys=65471,ks=65472,Es=65473,Ss=65474,Cs=65475,xs=65476,As=65477,Rs=65478,Ms=65479,Ts=65480,Ls=65481,Is=65482,Ps=65483,Os=65484,Ds=65485,Ns=65486,Bs=65487,Fs=65488,Qs=65489,Us=65490,zs=65491,Hs=65492,Gs=65493,Vs=65494,js=65495,qs=65496,Ws=65497,Xs=65498,Ks=65499,Ys=65500,$s=65501,Js=65502,Zs=65503,ei=65504,ti=65505,si=65506,ii=65507,ni=65508,ai=65509,ri=65511,oi=65512,li=65513,ci=65514,ui=65515,hi=65516,di=65027,fi=65032,pi=65034,_i=65036,gi=65038,mi=32,bi=42,vi=43,wi=44,yi=45,ki=46,Ei=47,Si=48,Ci=49,xi=50,Ai=51,Ri=52,Mi=53,Ti=54,Li=55,Ii=56,Pi=57,Oi=61,Di=65329,Ni=65332,Bi=65336,Fi=269025026,Qi=269025027,Ui=269025040,zi=269025041,Hi=269025042,Gi=269025043,Vi=269025044,ji=269025045,qi=269025046,Wi=269025047,Xi=269025048,Ki=269025049,Yi=269025051,$i=269025052,Ji=269025053,Zi=269025056,en=269025057,tn=269025062,sn=269025063,nn=269025064,an=269025065,rn=269025066,on=269025067,ln=269025068,cn=269025069,un=269025070,hn=269025072,dn=269025073,fn=269025074,pn=269025075,_n=269025083,gn=269025086,mn=269025110,bn=269025111,vn=269025112,wn=269025116,yn=269025121,kn=269025128,En=269025131,Sn=269025133,Cn=269025134,xn=269025138,An=269025143,Rn=269025147,Mn=269025148,Tn=269025149,Ln=269025161,In=269025163,Pn=269025164,On=269025167,Dn=269025168,Nn=269025170,Bn=269025175,Fn=269025177,Qn=269025178,Un=269025179,zn=269025192,Hn=269025202,Gn=269024802;const Vn={256:960,257:992,258:451,259:483,260:417,261:433,262:454,263:486,264:710,265:742,266:709,267:741,268:456,269:488,270:463,271:495,272:464,273:496,274:938,275:954,278:972,279:1004,280:458,281:490,282:460,283:492,284:728,285:760,286:683,287:699,288:725,289:757,290:939,291:955,292:678,293:694,294:673,295:689,296:933,297:949,298:975,299:1007,302:967,303:999,304:681,305:697,308:684,309:700,310:979,311:1011,312:930,313:453,314:485,315:934,316:950,317:421,318:437,321:419,322:435,323:465,324:497,325:977,326:1009,327:466,328:498,330:957,331:959,332:978,333:1010,336:469,337:501,338:5052,339:5053,340:448,341:480,342:931,343:947,344:472,345:504,346:422,347:438,348:734,349:766,350:426,351:442,352:425,353:441,354:478,355:510,356:427,357:443,358:940,359:956,360:989,361:1021,362:990,363:1022,364:733,365:765,366:473,367:505,368:475,369:507,370:985,371:1017,376:5054,377:428,378:444,379:431,380:447,381:430,382:446,402:2294,466:16777681,711:439,728:418,729:511,731:434,733:445,901:1966,902:1953,904:1954,905:1955,906:1956,908:1959,910:1960,911:1963,912:1974,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2e3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,938:1957,939:1961,940:1969,941:1970,942:1971,943:1972,944:1978,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,962:2035,963:2034,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,970:1973,971:1977,972:1975,973:1976,974:1979,1025:1715,1026:1713,1027:1714,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1040:1761,1041:1762,1042:1783,1043:1767,1044:1764,1045:1765,1046:1782,1047:1786,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1056:1778,1057:1779,1058:1780,1059:1781,1060:1766,1061:1768,1062:1763,1063:1790,1064:1787,1065:1789,1066:1791,1067:1785,1068:1784,1069:1788,1070:1760,1071:1777,1072:1729,1073:1730,1074:1751,1075:1735,1076:1732,1077:1733,1078:1750,1079:1754,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1088:1746,1089:1747,1090:1748,1091:1749,1092:1734,1093:1736,1094:1731,1095:1758,1096:1755,1097:1757,1098:1759,1099:1753,1100:1752,1101:1756,1102:1728,1103:1745,1105:1699,1106:1697,1107:1698,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,1168:1725,1169:1709,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,8194:2722,8195:2721,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8210:2747,8211:2730,8212:2729,8213:1967,8215:3295,8216:2768,8217:2769,8218:2813,8220:2770,8221:2771,8222:2814,8224:2801,8225:2802,8226:2790,8229:2735,8230:2734,8240:2773,8242:2774,8243:2775,8248:2812,8254:1150,8361:3839,8364:8364,8453:2744,8470:1712,8471:2811,8478:2772,8482:2761,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8539:2755,8540:2756,8541:2757,8542:2758,8592:2299,8593:2300,8594:2301,8595:2302,8658:2254,8660:2253,8706:2287,8711:2245,8728:3018,8730:2262,8733:2241,8734:2242,8743:2270,8744:2271,8745:2268,8746:2269,8747:2239,8756:2240,8764:2248,8771:2249,8773:16785992,8800:2237,8801:2255,8804:2236,8805:2238,8834:2266,8835:2267,8866:3068,8867:3036,8868:3010,8869:3022,8968:3027,8970:3012,8981:2810,8992:2212,8993:2213,9109:3020,9115:2219,9117:2220,9118:2221,9120:2222,9121:2215,9123:2216,9124:2217,9126:2218,9128:2223,9132:2224,9143:2209,9146:2543,9147:2544,9148:2546,9149:2547,9225:2530,9226:2533,9227:2537,9228:2531,9229:2532,9251:2732,9252:2536,9472:2211,9474:2214,9484:2210,9488:2539,9492:2541,9496:2538,9500:2548,9508:2549,9516:2551,9524:2550,9532:2542,9618:2529,9642:2791,9643:2785,9644:2779,9645:2786,9646:2783,9647:2767,9650:2792,9651:2787,9654:2781,9655:2765,9660:2793,9661:2788,9664:2780,9665:2764,9670:2528,9675:2766,9679:2782,9702:2784,9734:2789,9742:2809,9747:2762,9756:2794,9758:2795,9792:2808,9794:2807,9827:2796,9829:2798,9830:2797,9837:2806,9839:2805,10003:2803,10007:2804,10013:2777,10016:2800,10216:2748,10217:2750,12289:1188,12290:1185,12300:1186,12301:1187,12443:1246,12444:1247,12449:1191,12450:1201,12451:1192,12452:1202,12453:1193,12454:1203,12455:1194,12456:1204,12457:1195,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12483:1199,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12515:1196,12516:1236,12517:1197,12518:1237,12519:1198,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12530:1190,12531:1245,12539:1189,12540:1200};var jn={lookup(e){if(e>=32&&e<=255)return e;const t=Vn[e];return void 0!==t?t:16777216|e}},qn={8:"Backspace",9:"Tab",10:"NumpadClear",13:"Enter",16:"ShiftLeft",17:"ControlLeft",18:"AltLeft",19:"Pause",20:"CapsLock",21:"Lang1",25:"Lang2",27:"Escape",28:"Convert",29:"NonConvert",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",44:"PrintScreen",45:"Insert",46:"Delete",47:"Help",48:"Digit0",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",91:"MetaLeft",92:"MetaRight",93:"ContextMenu",95:"Sleep",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",108:"NumpadDecimal",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"ScrollLock",166:"BrowserBack",167:"BrowserForward",168:"BrowserRefresh",169:"BrowserStop",170:"BrowserSearch",171:"BrowserFavorites",172:"BrowserHome",173:"AudioVolumeMute",174:"AudioVolumeDown",175:"AudioVolumeUp",176:"MediaTrackNext",177:"MediaTrackPrevious",178:"MediaStop",179:"MediaPlayPause",180:"LaunchMail",181:"MediaSelect",182:"LaunchApp1",183:"LaunchApp2",225:"AltRight"},Wn={Backspace:"Backspace",AltLeft:"Alt",AltRight:"Alt",CapsLock:"CapsLock",ContextMenu:"ContextMenu",ControlLeft:"Control",ControlRight:"Control",Enter:"Enter",MetaLeft:"Meta",MetaRight:"Meta",ShiftLeft:"Shift",ShiftRight:"Shift",Tab:"Tab",Delete:"Delete",End:"End",Help:"Help",Home:"Home",Insert:"Insert",PageDown:"PageDown",PageUp:"PageUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",NumLock:"NumLock",NumpadBackspace:"Backspace",NumpadClear:"Clear",Escape:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",F13:"F13",F14:"F14",F15:"F15",F16:"F16",F17:"F17",F18:"F18",F19:"F19",F20:"F20",F21:"F21",F22:"F22",F23:"F23",F24:"F24",F25:"F25",F26:"F26",F27:"F27",F28:"F28",F29:"F29",F30:"F30",F31:"F31",F32:"F32",F33:"F33",F34:"F34",F35:"F35",PrintScreen:"PrintScreen",ScrollLock:"ScrollLock",Pause:"Pause",BrowserBack:"BrowserBack",BrowserFavorites:"BrowserFavorites",BrowserForward:"BrowserForward",BrowserHome:"BrowserHome",BrowserRefresh:"BrowserRefresh",BrowserSearch:"BrowserSearch",BrowserStop:"BrowserStop",Eject:"Eject",LaunchApp1:"LaunchMyComputer",LaunchApp2:"LaunchCalendar",LaunchMail:"LaunchMail",MediaPlayPause:"MediaPlay",MediaStop:"MediaStop",MediaTrackNext:"MediaTrackNext",MediaTrackPrevious:"MediaTrackPrevious",Power:"Power",Sleep:"Sleep",AudioVolumeDown:"AudioVolumeDown",AudioVolumeMute:"AudioVolumeMute",AudioVolumeUp:"AudioVolumeUp",WakeUp:"WakeUp"};const Xn={};function Kn(e,t){if(void 0===t)throw new Error('Undefined keysym for key "'+e+'"');if(e in Xn)throw new Error('Duplicate entry for key "'+e+'"');Xn[e]=[t,t,t,t]}function Yn(e,t,s){if(void 0===t)throw new Error('Undefined keysym for key "'+e+'"');if(void 0===s)throw new Error('Undefined keysym for key "'+e+'"');if(e in Xn)throw new Error('Duplicate entry for key "'+e+'"');Xn[e]=[t,t,s,t]}function $n(e,t,s){if(void 0===t)throw new Error('Undefined keysym for key "'+e+'"');if(void 0===s)throw new Error('Undefined keysym for key "'+e+'"');if(e in Xn)throw new Error('Duplicate entry for key "'+e+'"');Xn[e]=[t,t,t,s]}Yn("Alt",li,ci),Kn("AltGraph",di),Kn("CapsLock",ai),Yn("Control",ii,ni),Yn("Meta",ui,hi),Kn("NumLock",Gt),Kn("ScrollLock",nt),Yn("Shift",ti,si),$n("Enter",st,jt),Kn("Tab",et),$n(" ",mi,Vt),$n("ArrowDown",Rt,Yt),$n("ArrowLeft",Ct,Wt),$n("ArrowRight",At,Kt),$n("ArrowUp",xt,Xt),$n("End",Lt,Zt),$n("Home",St,qt),$n("PageDown",Tt,Jt),$n("PageUp",Mt,$t),Kn("Backspace",Ze),$n("Clear",tt,es),Kn("Copy",bn),Kn("Cut",vn),$n("Delete",rt,ss),$n("Insert",Dt,ts),Kn("Paste",Sn),Kn("Redo",Bt),Kn("Undo",Nt),Kn("Cancel",Ut),Kn("ContextMenu",Ft),Kn("Escape",at),Kn("Execute",Ot),Kn("Find",Qt),Kn("Help",zt),Kn("Pause",it),Kn("Select",It),Kn("ZoomIn",In),Kn("ZoomOut",Pn),Kn("BrightnessDown",Qi),Kn("BrightnessUp",Fi),Kn("Eject",ln),Kn("LogOff",yn),Kn("Power",rn),Kn("PowerOff",en),Kn("PrintScreen",Pt),Kn("Hibernate",zn),Kn("Standby",Ui),Kn("WakeUp",on),Kn("AllCandidates",ut),Kn("Alphanumeric",Et),Kn("CodeInput",lt),Kn("Compose",ot),Kn("Convert",pt),Kn("GroupFirst",_i),Kn("GroupLast",gi),Kn("GroupNext",fi),Kn("GroupPrevious",pi),Kn("NonConvert",ft),Kn("PreviousCandidate",ht),Kn("SingleCandidate",ct),Kn("HangulMode",Di),Kn("HanjaMode",Ni),Kn("JunjaMode",Bi),Kn("Eisu",Et),Kn("Hankaku",wt),Kn("Hiragana",gt),Kn("HiraganaKatakana",bt),Kn("KanaMode",kt),Kn("KanjiMode",dt),Kn("Katakana",mt),Kn("Romaji",_t),Kn("Zenkaku",vt),Kn("ZenkakuHankaku",yt),Kn("F1",ws),Kn("F2",ys),Kn("F3",ks),Kn("F4",Es),Kn("F5",Ss),Kn("F6",Cs),Kn("F7",xs),Kn("F8",As),Kn("F9",Rs),Kn("F10",Ms),Kn("F11",Ts),Kn("F12",Ls),Kn("F13",Is),Kn("F14",Ps),Kn("F15",Os),Kn("F16",Ds),Kn("F17",Ns),Kn("F18",Bs),Kn("F19",Fs),Kn("F20",Qs),Kn("F21",Us),Kn("F22",zs),Kn("F23",Hs),Kn("F24",Gs),Kn("F25",Vs),Kn("F26",js),Kn("F27",qs),Kn("F28",Ws),Kn("F29",Xs),Kn("F30",Ks),Kn("F31",Ys),Kn("F32",$s),Kn("F33",Js),Kn("F34",Zs),Kn("F35",ei),Kn("Close",mn),Kn("MailForward",Dn),Kn("MailReply",xn),Kn("MailSend",Rn),Kn("MediaFastForward",Bn),Kn("MediaPause",dn),Kn("MediaPlay",Vi),Kn("MediaRecord",$i),Kn("MediaRewind",gn),Kn("MediaStop",ji),Kn("MediaTrackNext",Wi),Kn("MediaTrackPrevious",qi),Kn("New",kn),Kn("Open",En),Kn("Print",Pt),Kn("Save",An),Kn("SpellCheck",Mn),Kn("AudioVolumeDown",zi),Kn("AudioVolumeUp",Gi),Kn("AudioVolumeMute",Hi),Kn("MicrophoneVolumeMute",Hn),Kn("LaunchApplication1",pn),Kn("LaunchApplication2",Ji),Kn("LaunchCalendar",Zi),Kn("LaunchMail",Ki),Kn("LaunchMediaPlayer",fn),Kn("LaunchMusicPlayer",Nn),Kn("LaunchPhone",Cn),Kn("LaunchScreenSaver",cn),Kn("LaunchSpreadsheet",wn),Kn("LaunchWebBrowser",un),Kn("LaunchWebCam",On),Kn("LaunchWordProcessor",Ln),Kn("BrowserBack",tn),Kn("BrowserFavorites",hn),Kn("BrowserForward",sn),Kn("BrowserHome",Xi),Kn("BrowserRefresh",an),Kn("BrowserSearch",Yi),Kn("BrowserStop",nn),Kn("Dimmer",_n),Kn("MediaAudioTrack",Un),Kn("RandomToggle",Fn),Kn("SplitScreenToggle",Tn),Kn("Subtitle",Qn),Kn("VideoModeNext",Gn),$n("=",Oi,is),$n("+",vi,as),$n("-",yi,os),$n("*",bi,ns),$n("/",Ei,cs),$n(".",ki,ls),$n(",",wi,rs),$n("0",Si,us),$n("1",Ci,hs),$n("2",xi,ds),$n("3",Ai,fs),$n("4",Ri,ps),$n("5",Mi,_s),$n("6",Ti,gs),$n("7",Li,ms),$n("8",Ii,bs),$n("9",Pi,vs);var Jn=Xn;function Zn(e){if(e.code){switch(e.code){case"OSLeft":return"MetaLeft";case"OSRight":return"MetaRight"}return e.code}if(e.keyCode in qn){let t=qn[e.keyCode];if(g()&&"ContextMenu"===t&&(t="MetaRight"),2===e.location)switch(t){case"ShiftLeft":return"ShiftRight";case"ControlLeft":return"ControlRight";case"AltLeft":return"AltRight"}if(3===e.location)switch(t){case"Delete":return"NumpadDecimal";case"Insert":return"Numpad0";case"End":return"Numpad1";case"ArrowDown":return"Numpad2";case"PageDown":return"Numpad3";case"ArrowLeft":return"Numpad4";case"ArrowRight":return"Numpad6";case"Home":return"Numpad7";case"ArrowUp":return"Numpad8";case"PageUp":return"Numpad9";case"Enter":return"NumpadEnter"}return t}return"Unidentified"}function ea(e){const t=function(e){if(void 0!==e.key){switch(e.key){case"OS":return"Meta";case"LaunchMyComputer":return"LaunchApplication1";case"LaunchCalculator":return"LaunchApplication2"}switch(e.key){case"UIKeyInputUpArrow":return"ArrowUp";case"UIKeyInputDownArrow":return"ArrowDown";case"UIKeyInputLeftArrow":return"ArrowLeft";case"UIKeyInputRightArrow":return"ArrowRight";case"UIKeyInputEscape":return"Escape"}return"\0"===e.key&&"NumpadDecimal"===e.code?"Delete":e.key}const t=Zn(e);return t in Wn?Wn[t]:e.charCode?String.fromCharCode(e.charCode):"Unidentified"}(e);if("Unidentified"===t)return null;if(t in Jn){let s=e.location;if("Meta"===t&&0===s&&(s=2),"Clear"===t&&3===s){"NumLock"===Zn(e)&&(s=0)}if((void 0===s||s>3)&&(s=0),"Meta"===t){let t=Zn(e);if("AltLeft"===t)return ri;if("AltRight"===t)return oi}if("Clear"===t){if("NumLock"===Zn(e))return Gt}if(m())switch(t){case"Zenkaku":case"Hankaku":return yt;case"Romaji":case"KanaMode":return _t}return Jn[t][s]}if(1!==t.length)return null;const s=t.charCodeAt();return s?jn.lookup(s):null}class ta{constructor(e){this._target=e||null,this._keyDownList={},this._altGrArmed=!1,this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),blur:this._allKeysUp.bind(this)},this.onkeyevent=()=>{}}_sendKeyEvent(e,t,s){if(s)this._keyDownList[t]=e;else{if(!(t in this._keyDownList))return;delete this._keyDownList[t]}a("onkeyevent "+(s?"down":"up")+", keysym: "+e,", code: "+t),this.onkeyevent(e,t,s)}_getKeyCode(e){const t=Zn(e);if("Unidentified"!==t)return t;if(e.keyCode&&229!==e.keyCode)return"Platform"+e.keyCode;if(e.keyIdentifier){if("U+"!==e.keyIdentifier.substr(0,2))return e.keyIdentifier;const t=parseInt(e.keyIdentifier.substr(2),16);return"Platform"+String.fromCharCode(t).toUpperCase().charCodeAt()}return"Unidentified"}_handleKeyDown(e){const t=this._getKeyCode(e);let s=ea(e);if(this._altGrArmed&&(this._altGrArmed=!1,clearTimeout(this._altGrTimeout),"AltRight"===t&&e.timeStamp-this._altGrCtrlTime<50?s=di:this._sendKeyEvent(ii,"ControlLeft",!0)),"Unidentified"===t)return s&&(this._sendKeyEvent(s,t,!0),this._sendKeyEvent(s,t,!1)),void w(e);if(g()||b())switch(s){case ui:s=li;break;case hi:s=ui;break;case li:s=Ht;break;case ci:s=di}if(t in this._keyDownList&&(s=this._keyDownList[t]),(g()||b())&&"CapsLock"===t)return this._sendKeyEvent(ai,"CapsLock",!0),this._sendKeyEvent(ai,"CapsLock",!1),void w(e);const i=[yt,Et,mt,gt,_t];return m()&&i.includes(s)?(this._sendKeyEvent(s,t,!0),this._sendKeyEvent(s,t,!1),void w(e)):(w(e),"ControlLeft"===t&&m()&&!("ControlLeft"in this._keyDownList)?(this._altGrArmed=!0,this._altGrTimeout=setTimeout(this._handleAltGrTimeout.bind(this),100),void(this._altGrCtrlTime=e.timeStamp)):void this._sendKeyEvent(s,t,!0))}_handleKeyUp(e){w(e);const t=this._getKeyCode(e);if(this._altGrArmed&&(this._altGrArmed=!1,clearTimeout(this._altGrTimeout),this._sendKeyEvent(ii,"ControlLeft",!0)),(g()||b())&&"CapsLock"===t)return this._sendKeyEvent(ai,"CapsLock",!0),void this._sendKeyEvent(ai,"CapsLock",!1);this._sendKeyEvent(this._keyDownList[t],t,!1),!m()||"ShiftLeft"!==t&&"ShiftRight"!==t||("ShiftRight"in this._keyDownList&&this._sendKeyEvent(this._keyDownList.ShiftRight,"ShiftRight",!1),"ShiftLeft"in this._keyDownList&&this._sendKeyEvent(this._keyDownList.ShiftLeft,"ShiftLeft",!1))}_handleAltGrTimeout(){this._altGrArmed=!1,clearTimeout(this._altGrTimeout),this._sendKeyEvent(ii,"ControlLeft",!0)}_allKeysUp(){a(">> Keyboard.allKeysUp");for(let e in this._keyDownList)this._sendKeyEvent(this._keyDownList[e],e,!1);a("<< Keyboard.allKeysUp")}grab(){this._target.addEventListener("keydown",this._eventHandlers.keydown),this._target.addEventListener("keyup",this._eventHandlers.keyup),window.addEventListener("blur",this._eventHandlers.blur)}ungrab(){this._target.removeEventListener("keydown",this._eventHandlers.keydown),this._target.removeEventListener("keyup",this._eventHandlers.keyup),window.removeEventListener("blur",this._eventHandlers.blur),this._allKeysUp()}}class sa{constructor(){this._target=null,this._state=127,this._tracked=[],this._ignored=[],this._waitingRelease=!1,this._releaseStart=0,this._longpressTimeoutId=null,this._twoTouchTimeoutId=null,this._boundEventHandler=this._eventHandler.bind(this)}attach(e){this.detach(),this._target=e,this._target.addEventListener("touchstart",this._boundEventHandler),this._target.addEventListener("touchmove",this._boundEventHandler),this._target.addEventListener("touchend",this._boundEventHandler),this._target.addEventListener("touchcancel",this._boundEventHandler)}detach(){this._target&&(this._stopLongpressTimeout(),this._stopTwoTouchTimeout(),this._target.removeEventListener("touchstart",this._boundEventHandler),this._target.removeEventListener("touchmove",this._boundEventHandler),this._target.removeEventListener("touchend",this._boundEventHandler),this._target.removeEventListener("touchcancel",this._boundEventHandler),this._target=null)}_eventHandler(e){let t;switch(e.stopPropagation(),e.preventDefault(),e.type){case"touchstart":t=this._touchStart;break;case"touchmove":t=this._touchMove;break;case"touchend":case"touchcancel":t=this._touchEnd}for(let s=0;s<e.changedTouches.length;s++){let i=e.changedTouches[s];t.call(this,i.identifier,i.clientX,i.clientY)}}_touchStart(e,t,s){if(this._hasDetectedGesture()||0===this._state)this._ignored.push(e);else{if(this._tracked.length>0&&Date.now()-this._tracked[0].started>250)return this._state=0,void this._ignored.push(e);if(this._waitingRelease)return this._state=0,void this._ignored.push(e);switch(this._tracked.push({id:e,started:Date.now(),active:!0,firstX:t,firstY:s,lastX:t,lastY:s,angle:0}),this._tracked.length){case 1:this._startLongpressTimeout();break;case 2:this._state&=-26,this._stopLongpressTimeout();break;case 3:this._state&=-99;break;default:this._state=0}}}_touchMove(e,t,s){let i=this._tracked.find(t=>t.id===e);if(void 0===i)return;i.lastX=t,i.lastY=s;let n=t-i.firstX,a=s-i.firstY;if(i.firstX===i.lastX&&i.firstY===i.lastY||(i.angle=180*Math.atan2(a,n)/Math.PI),!this._hasDetectedGesture()){if(Math.hypot(n,a)<50)return;if(this._state&=-24,this._stopLongpressTimeout(),1!==this._tracked.length&&(this._state&=-9),2!==this._tracked.length&&(this._state&=-97),2===this._tracked.length){let t=this._tracked.find(t=>t.id!==e);if(Math.hypot(t.firstX-t.lastX,t.firstY-t.lastY)>50){let e=Math.abs(i.angle-t.angle);e=Math.abs((e+180)%360-180),this._state&=e>90?-33:-65,this._isTwoTouchTimeoutRunning()&&this._stopTwoTouchTimeout()}else this._isTwoTouchTimeoutRunning()||this._startTwoTouchTimeout()}if(!this._hasDetectedGesture())return;this._pushEvent("gesturestart")}this._pushEvent("gesturemove")}_touchEnd(e,t,s){if(-1!==this._ignored.indexOf(e))return this._ignored.splice(this._ignored.indexOf(e),1),void(0===this._ignored.length&&0===this._tracked.length&&(this._state=127,this._waitingRelease=!1));if(!this._hasDetectedGesture()&&this._isTwoTouchTimeoutRunning()&&(this._stopTwoTouchTimeout(),this._state=0),!this._hasDetectedGesture()&&(this._state&=-105,this._state&=-17,this._stopLongpressTimeout(),!this._waitingRelease))switch(this._releaseStart=Date.now(),this._waitingRelease=!0,this._tracked.length){case 1:this._state&=-7;break;case 2:this._state&=-6}if(this._waitingRelease){if(Date.now()-this._releaseStart>250&&(this._state=0),this._tracked.some(e=>Date.now()-e.started>1e3)&&(this._state=0),this._tracked.find(t=>t.id===e).active=!1,this._hasDetectedGesture())this._pushEvent("gesturestart");else if(0!==this._state)return}this._hasDetectedGesture()&&this._pushEvent("gestureend");for(let e=0;e<this._tracked.length;e++)this._tracked[e].active&&this._ignored.push(this._tracked[e].id);this._tracked=[],this._state=0,-1!==this._ignored.indexOf(e)&&this._ignored.splice(this._ignored.indexOf(e),1),0===this._ignored.length&&(this._state=127,this._waitingRelease=!1)}_hasDetectedGesture(){return 0!==this._state&&(!(this._state&this._state-1)&&!(7&this._state&&this._tracked.some(e=>e.active)))}_startLongpressTimeout(){this._stopLongpressTimeout(),this._longpressTimeoutId=setTimeout(()=>this._longpressTimeout(),1e3)}_stopLongpressTimeout(){clearTimeout(this._longpressTimeoutId),this._longpressTimeoutId=null}_longpressTimeout(){if(this._hasDetectedGesture())throw new Error("A longpress gesture failed, conflict with a different gesture");this._state=16,this._pushEvent("gesturestart")}_startTwoTouchTimeout(){this._stopTwoTouchTimeout(),this._twoTouchTimeoutId=setTimeout(()=>this._twoTouchTimeout(),50)}_stopTwoTouchTimeout(){clearTimeout(this._twoTouchTimeoutId),this._twoTouchTimeoutId=null}_isTwoTouchTimeoutRunning(){return null!==this._twoTouchTimeoutId}_twoTouchTimeout(){if(0===this._tracked.length)throw new Error("A pinch or two drag gesture failed, no tracked touches");let e=this._getAverageMovement(),t=Math.abs(e.x),s=Math.abs(e.y),i=this._getAverageDistance(),n=Math.abs(Math.hypot(i.first.x,i.first.y)-Math.hypot(i.last.x,i.last.y));this._state=s<n&&t<n?64:32,this._pushEvent("gesturestart"),this._pushEvent("gesturemove")}_pushEvent(e){let t={type:this._stateToGesture(this._state)},s=this._getPosition(),i=s.last;switch("gesturestart"===e&&(i=s.first),this._state){case 32:case 64:i=s.first}if(t.clientX=i.x,t.clientY=i.y,64===this._state){let s=this._getAverageDistance();"gesturestart"===e?(t.magnitudeX=s.first.x,t.magnitudeY=s.first.y):(t.magnitudeX=s.last.x,t.magnitudeY=s.last.y)}else if(32===this._state)if("gesturestart"===e)t.magnitudeX=0,t.magnitudeY=0;else{let e=this._getAverageMovement();t.magnitudeX=e.x,t.magnitudeY=e.y}let n=new CustomEvent(e,{detail:t});this._target.dispatchEvent(n)}_stateToGesture(e){switch(e){case 1:return"onetap";case 2:return"twotap";case 4:return"threetap";case 8:return"drag";case 16:return"longpress";case 32:return"twodrag";case 64:return"pinch"}throw new Error("Unknown gesture state: "+e)}_getPosition(){if(0===this._tracked.length)throw new Error("Failed to get gesture position, no tracked touches");let e=this._tracked.length,t=0,s=0,i=0,n=0;for(let e=0;e<this._tracked.length;e++)t+=this._tracked[e].firstX,s+=this._tracked[e].firstY,i+=this._tracked[e].lastX,n+=this._tracked[e].lastY;return{first:{x:t/e,y:s/e},last:{x:i/e,y:n/e}}}_getAverageMovement(){if(0===this._tracked.length)throw new Error("Failed to get gesture movement, no tracked touches");let e,t;e=t=0;let s=this._tracked.length;for(let s=0;s<this._tracked.length;s++)e+=this._tracked[s].lastX-this._tracked[s].firstX,t+=this._tracked[s].lastY-this._tracked[s].firstY;return{x:e/s,y:t/s}}_getAverageDistance(){if(0===this._tracked.length)throw new Error("Failed to get gesture distance, no tracked touches");let e=this._tracked[0],t=this._tracked[this._tracked.length-1];return{first:{x:Math.abs(t.firstX-e.firstX),y:Math.abs(t.firstY-e.firstY)},last:{x:Math.abs(t.lastX-e.lastX),y:Math.abs(t.lastY-e.lastY)}}}}const ia=!p||h;class na{constructor(){this._target=null,this._canvas=document.createElement("canvas"),ia&&(this._canvas.style.position="fixed",this._canvas.style.zIndex="65535",this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden"),this._position={x:0,y:0},this._hotSpot={x:0,y:0},this._eventHandlers={mouseover:this._handleMouseOver.bind(this),mouseleave:this._handleMouseLeave.bind(this),mousemove:this._handleMouseMove.bind(this),mouseup:this._handleMouseUp.bind(this)}}attach(e){if(this._target&&this.detach(),this._target=e,ia){document.body.appendChild(this._canvas);const e={capture:!0,passive:!0};this._target.addEventListener("mouseover",this._eventHandlers.mouseover,e),this._target.addEventListener("mouseleave",this._eventHandlers.mouseleave,e),this._target.addEventListener("mousemove",this._eventHandlers.mousemove,e),this._target.addEventListener("mouseup",this._eventHandlers.mouseup,e)}this.clear()}detach(){if(this._target){if(ia){const e={capture:!0,passive:!0};this._target.removeEventListener("mouseover",this._eventHandlers.mouseover,e),this._target.removeEventListener("mouseleave",this._eventHandlers.mouseleave,e),this._target.removeEventListener("mousemove",this._eventHandlers.mousemove,e),this._target.removeEventListener("mouseup",this._eventHandlers.mouseup,e),document.body.removeChild(this._canvas)}this._target=null}}change(e,t,s,i,n){if(0===i||0===n)return void this.clear();this._position.x=this._position.x+this._hotSpot.x-t,this._position.y=this._position.y+this._hotSpot.y-s,this._hotSpot.x=t,this._hotSpot.y=s;let a=this._canvas.getContext("2d");this._canvas.width=i,this._canvas.height=n;let r=new ImageData(new Uint8ClampedArray(e),i,n);if(a.clearRect(0,0,i,n),a.putImageData(r,0,0),ia)this._updatePosition();else{let e=this._canvas.toDataURL();this._target.style.cursor="url("+e+")"+t+" "+s+", default"}}clear(){this._target.style.cursor="none",this._canvas.width=0,this._canvas.height=0,this._position.x=this._position.x+this._hotSpot.x,this._position.y=this._position.y+this._hotSpot.y,this._hotSpot.x=0,this._hotSpot.y=0}move(e,t){if(!ia)return;window.visualViewport?(this._position.x=e+window.visualViewport.offsetLeft,this._position.y=t+window.visualViewport.offsetTop):(this._position.x=e,this._position.y=t),this._updatePosition();let s=document.elementFromPoint(e,t);this._updateVisibility(s)}_handleMouseOver(e){this._handleMouseMove(e)}_handleMouseLeave(e){this._updateVisibility(e.relatedTarget)}_handleMouseMove(e){this._updateVisibility(e.target),this._position.x=e.clientX-this._hotSpot.x,this._position.y=e.clientY-this._hotSpot.y,this._updatePosition()}_handleMouseUp(e){let t=document.elementFromPoint(e.clientX,e.clientY);this._updateVisibility(t),this._captureIsActive()&&window.setTimeout(()=>{this._target&&(t=document.elementFromPoint(e.clientX,e.clientY),this._updateVisibility(t))},0)}_showCursor(){"hidden"===this._canvas.style.visibility&&(this._canvas.style.visibility="")}_hideCursor(){"hidden"!==this._canvas.style.visibility&&(this._canvas.style.visibility="hidden")}_shouldShowCursor(e){return!!e&&(e===this._target||!!this._target.contains(e)&&"none"===window.getComputedStyle(e).cursor)}_updateVisibility(e){this._captureIsActive()&&(e=document.captureElement),this._shouldShowCursor(e)?this._showCursor():this._hideCursor()}_updatePosition(){this._canvas.style.left=this._position.x+"px",this._canvas.style.top=this._position.y+"px"}_captureIsActive(){return document.captureElement&&document.documentElement.contains(document.captureElement)}}const aa="connecting",ra="open",oa="closing",la="closed",ca={CONNECTING:[WebSocket.CONNECTING,aa],OPEN:[WebSocket.OPEN,ra],CLOSING:[WebSocket.CLOSING,oa],CLOSED:[WebSocket.CLOSED,la]},ua=["send","close","binaryType","onerror","onmessage","onopen","protocol","readyState"];class ha{constructor(){this._websocket=null,this._rQi=0,this._rQlen=0,this._rQbufferSize=4194304,this._rQ=null,this._sQbufferSize=10240,this._sQlen=0,this._sQ=null,this._eventHandlers={message:()=>{},open:()=>{},close:()=>{},error:()=>{}}}get readyState(){let e;return null===this._websocket?"unused":(e=this._websocket.readyState,ca.CONNECTING.includes(e)?"connecting":ca.OPEN.includes(e)?"open":ca.CLOSING.includes(e)?"closing":ca.CLOSED.includes(e)?"closed":"unknown")}get sQ(){return this._sQ}get rQ(){return this._rQ}get rQi(){return this._rQi}set rQi(e){this._rQi=e}get rQlen(){return this._rQlen-this._rQi}rQpeek8(){return this._rQ[this._rQi]}rQskipBytes(e){this._rQi+=e}rQshift8(){return this._rQshift(1)}rQshift16(){return this._rQshift(2)}rQshift32(){return this._rQshift(4)}_rQshift(e){let t=0;for(let s=e-1;s>=0;s--)t+=this._rQ[this._rQi++]<<8*s;return t}rQshiftStr(e){void 0===e&&(e=this.rQlen);let t="";for(let s=0;s<e;s+=4096){let i=this.rQshiftBytes(Math.min(4096,e-s));t+=String.fromCharCode.apply(null,i)}return t}rQshiftBytes(e){return void 0===e&&(e=this.rQlen),this._rQi+=e,new Uint8Array(this._rQ.buffer,this._rQi-e,e)}rQshiftTo(e,t){void 0===t&&(t=this.rQlen),e.set(new Uint8Array(this._rQ.buffer,this._rQi,t)),this._rQi+=t}rQslice(e,t=this.rQlen){return new Uint8Array(this._rQ.buffer,this._rQi+e,t-e)}rQwait(e,t,s){if(this.rQlen<t){if(s){if(this._rQi<s)throw new Error("rQwait cannot backup "+s+" bytes");this._rQi-=s}return!0}return!1}flush(){this._sQlen>0&&"open"===this.readyState&&(this._websocket.send(this._encodeMessage()),this._sQlen=0)}send(e){this._sQ.set(e,this._sQlen),this._sQlen+=e.length,this.flush()}sendString(e){this.send(e.split("").map(e=>e.charCodeAt(0)))}off(e){this._eventHandlers[e]=()=>{}}on(e,t){this._eventHandlers[e]=t}_allocateBuffers(){this._rQ=new Uint8Array(this._rQbufferSize),this._sQ=new Uint8Array(this._sQbufferSize)}init(){this._allocateBuffers(),this._rQi=0,this._websocket=null}open(e,t){this.attach(new WebSocket(e,t))}attach(e){this.init();const t=[...Object.keys(e),...Object.getOwnPropertyNames(Object.getPrototypeOf(e))];for(let e=0;e<ua.length;e++){const s=ua[e];if(t.indexOf(s)<0)throw new Error("Raw channel missing property: "+s)}this._websocket=e,this._websocket.binaryType="arraybuffer",this._websocket.onmessage=this._recvMessage.bind(this),this._websocket.onopen=()=>{a(">> WebSock.onopen"),this._websocket.protocol&&r("Server choose sub-protocol: "+this._websocket.protocol),this._eventHandlers.open(),a("<< WebSock.onopen")},this._websocket.onclose=e=>{a(">> WebSock.onclose"),this._eventHandlers.close(e),a("<< WebSock.onclose")},this._websocket.onerror=e=>{a(">> WebSock.onerror: "+e),this._eventHandlers.error(e),a("<< WebSock.onerror: "+e)}}close(){this._websocket&&("connecting"!==this.readyState&&"open"!==this.readyState||(r("Closing WebSocket connection"),this._websocket.close()),this._websocket.onmessage=()=>{})}_encodeMessage(){return new Uint8Array(this._sQ.buffer,0,this._sQlen)}_expandCompactRQ(e){const t=8*(this._rQlen-this._rQi+e),s=this._rQbufferSize<t;if(s&&(this._rQbufferSize=Math.max(2*this._rQbufferSize,t)),this._rQbufferSize>41943040&&(this._rQbufferSize=41943040,this._rQbufferSize-this.rQlen<e))throw new Error("Receive Queue buffer exceeded 41943040 bytes, and the new message could not fit");if(s){const e=this._rQ.buffer;this._rQ=new Uint8Array(this._rQbufferSize),this._rQ.set(new Uint8Array(e,this._rQi,this._rQlen-this._rQi))}else this._rQ.copyWithin(0,this._rQi,this._rQlen);this._rQlen=this._rQlen-this._rQi,this._rQi=0}_DecodeMessage(e){const t=new Uint8Array(e);t.length>this._rQbufferSize-this._rQlen&&this._expandCompactRQ(t.length),this._rQ.set(t,this._rQlen),this._rQlen+=t.length}_recvMessage(e){this._DecodeMessage(e.data),this.rQlen>0?(this._eventHandlers.message(),this._rQlen==this._rQi&&(this._rQlen=0,this._rQi=0)):a("Ignoring empty message")}}const da=[13,16,10,23,0,4,2,27,14,5,20,9,22,18,11,3,25,7,15,6,26,19,12,1,40,51,30,36,46,54,29,39,50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31],fa=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];let pa,_a,ga,ma,ba,va;pa=65536,_a=1<<24,ga=pa|_a,ma=4,ba=1024,va=ma|ba;const wa=[ga|ba,0,0|pa,ga|va,ga|ma,pa|va,0|ma,0|pa,0|ba,ga|ba,ga|va,0|ba,_a|va,ga|ma,0|_a,0|ma,0|va,_a|ba,_a|ba,pa|ba,pa|ba,0|ga,0|ga,_a|va,pa|ma,_a|ma,_a|ma,pa|ma,0,0|va,pa|va,0|_a,0|pa,ga|va,0|ma,0|ga,ga|ba,0|_a,0|_a,0|ba,ga|ma,0|pa,pa|ba,_a|ma,0|ba,0|ma,_a|va,pa|va,ga|va,pa|ma,0|ga,_a|va,_a|ma,0|va,pa|va,ga|ba,0|va,_a|ba,_a|ba,0,pa|ma,pa|ba,0,ga|ma];pa=1<<20,_a=1<<31,ga=pa|_a,ma=32,ba=32768,va=ma|ba;const ya=[ga|va,_a|ba,0|ba,pa|va,0|pa,0|ma,ga|ma,_a|va,_a|ma,ga|va,ga|ba,0|_a,_a|ba,0|pa,0|ma,ga|ma,pa|ba,pa|ma,_a|va,0,0|_a,0|ba,pa|va,0|ga,pa|ma,_a|ma,0,pa|ba,0|va,ga|ba,0|ga,0|va,0,pa|va,ga|ma,0|pa,_a|va,0|ga,ga|ba,0|ba,0|ga,_a|ba,0|ma,ga|va,pa|va,0|ma,0|ba,0|_a,0|va,ga|ba,0|pa,_a|ma,pa|ma,_a|va,_a|ma,pa|ma,pa|ba,0,_a|ba,0|va,0|_a,ga|ma,ga|va,pa|ba];pa=1<<17,_a=1<<27,ga=pa|_a,ma=8,ba=512,va=ma|ba;const ka=[0|va,ga|ba,0,ga|ma,_a|ba,0,pa|va,_a|ba,pa|ma,_a|ma,_a|ma,0|pa,ga|va,pa|ma,0|ga,0|va,0|_a,0|ma,ga|ba,0|ba,pa|ba,0|ga,ga|ma,pa|va,_a|va,pa|ba,0|pa,_a|va,0|ma,ga|va,0|ba,0|_a,ga|ba,0|_a,pa|ma,0|va,0|pa,ga|ba,_a|ba,0,0|ba,pa|ma,ga|va,_a|ba,_a|ma,0|ba,0,ga|ma,_a|va,0|pa,0|_a,ga|va,0|ma,pa|va,pa|ba,_a|ma,0|ga,_a|va,0|va,0|ga,pa|va,0|ma,ga|ma,pa|ba];pa=8192,_a=1<<23,ga=pa|_a,ma=1,ba=128,va=ma|ba;const Ea=[ga|ma,pa|va,pa|va,0|ba,ga|ba,_a|va,_a|ma,pa|ma,0,0|ga,0|ga,ga|va,0|va,0,_a|ba,_a|ma,0|ma,0|pa,0|_a,ga|ma,0|ba,0|_a,pa|ma,pa|ba,_a|va,0|ma,pa|ba,_a|ba,0|pa,ga|ba,ga|va,0|va,_a|ba,_a|ma,0|ga,ga|va,0|va,0,0,0|ga,pa|ba,_a|ba,_a|va,0|ma,ga|ma,pa|va,pa|va,0|ba,ga|va,0|va,0|ma,0|pa,_a|ma,pa|ma,ga|ba,_a|va,pa|ma,pa|ba,0|_a,ga|ma,0|ba,0|_a,0|pa,ga|ba];pa=1<<25,_a=1<<30,ga=pa|_a,ma=256,ba=1<<19,va=ma|ba;const Sa=[0|ma,pa|va,pa|ba,ga|ma,0|ba,0|ma,0|_a,pa|ba,_a|va,0|ba,pa|ma,_a|va,ga|ma,ga|ba,0|va,0|_a,0|pa,_a|ba,_a|ba,0,_a|ma,ga|va,ga|va,pa|ma,ga|ba,_a|ma,0,0|ga,pa|va,0|pa,0|ga,0|va,0|ba,ga|ma,0|ma,0|pa,0|_a,pa|ba,ga|ma,_a|va,pa|ma,0|_a,ga|ba,pa|va,_a|va,0|ma,0|pa,ga|ba,ga|va,0|va,0|ga,ga|va,pa|ba,0,_a|ba,0|ga,0|va,pa|ma,_a|ma,0|ba,0,_a|ba,pa|va,_a|ma];pa=1<<22,_a=1<<29,ga=pa|_a,ma=16,ba=16384,va=ma|ba;const Ca=[_a|ma,0|ga,0|ba,ga|va,0|ga,0|ma,ga|va,0|pa,_a|ba,pa|va,0|pa,_a|ma,pa|ma,_a|ba,0|_a,0|va,0,pa|ma,_a|va,0|ba,pa|ba,_a|va,0|ma,ga|ma,ga|ma,0,pa|va,ga|ba,0|va,pa|ba,ga|ba,0|_a,_a|ba,0|ma,ga|ma,pa|ba,ga|va,0|pa,0|va,_a|ma,0|pa,_a|ba,0|_a,0|va,_a|ma,ga|va,pa|ba,0|ga,pa|va,ga|ba,0,ga|ma,0|ma,0|ba,0|ga,pa|va,0|ba,pa|ma,_a|va,0,ga|ba,0|_a,pa|ma,_a|va];pa=1<<21,_a=1<<26,ga=pa|_a,ma=2,ba=2048,va=ma|ba;const xa=[0|pa,ga|ma,_a|va,0,0|ba,_a|va,pa|va,ga|ba,ga|va,0|pa,0,_a|ma,0|ma,0|_a,ga|ma,0|va,_a|ba,pa|va,pa|ma,_a|ba,_a|ma,0|ga,ga|ba,pa|ma,0|ga,0|ba,0|va,ga|va,pa|ba,0|ma,0|_a,pa|ba,0|_a,pa|ba,0|pa,_a|va,_a|va,ga|ma,ga|ma,0|ma,pa|ma,0|_a,_a|ba,0|pa,ga|ba,0|va,pa|va,ga|ba,0|va,_a|ma,ga|va,0|ga,pa|ba,0,0|ma,ga|va,0,pa|va,0|ga,0|ba,_a|ma,_a|ba,0|ba,pa|ma];pa=1<<18,_a=1<<28,ga=pa|_a,ma=64,ba=4096,va=ma|ba;const Aa=[_a|va,0|ba,0|pa,ga|va,0|_a,_a|va,0|ma,0|_a,pa|ma,0|ga,ga|va,pa|ba,ga|ba,pa|va,0|ba,0|ma,0|ga,_a|ma,_a|ba,0|va,pa|ba,pa|ma,ga|ma,ga|ba,0|va,0,0,ga|ma,_a|ma,_a|ba,pa|va,0|pa,pa|va,0|pa,ga|ba,0|ba,0|ma,ga|ma,0|ba,pa|va,_a|ba,0|ma,_a|ma,0|ga,ga|ma,0|_a,0|pa,_a|va,0,ga|va,pa|ma,_a|ma,0|ga,_a|ba,_a|va,0,ga|va,pa|ba,pa|ba,0|va,0|va,pa|ma,0|_a,ga|ba];class Ra{constructor(e){this.keys=[];const t=[],s=[],i=[];for(let s=0,i=56;s<56;++s,i-=8){i+=i<-5?65:i<-3?31:i<-1?63:27===i?35:0;const n=7&i;t[s]=0!=(e[i>>>3]&1<<n)?1:0}for(let e=0;e<16;++e){const n=e<<1,a=n+1;i[n]=i[a]=0;for(let i=28;i<59;i+=28)for(let n=i-28;n<i;++n){const a=n+fa[e];s[n]=a<i?t[a]:t[a-28]}for(let e=0;e<24;++e)0!==s[da[e]]&&(i[n]|=1<<23-e),0!==s[da[e+24]]&&(i[a]|=1<<23-e)}for(let e=0,t=0,s=0;e<16;++e){const e=i[t++],n=i[t++];this.keys[s]=(16515072&e)<<6,this.keys[s]|=(4032&e)<<10,this.keys[s]|=(16515072&n)>>>10,this.keys[s]|=(4032&n)>>>6,++s,this.keys[s]=(258048&e)<<12,this.keys[s]|=(63&e)<<16,this.keys[s]|=(258048&n)>>>4,this.keys[s]|=63&n,++s}}enc8(e){const t=e.slice();let s,i,n,a=0;s=t[a++]<<24|t[a++]<<16|t[a++]<<8|t[a++],i=t[a++]<<24|t[a++]<<16|t[a++]<<8|t[a++],n=252645135&(s>>>4^i),i^=n,s^=n<<4,n=65535&(s>>>16^i),i^=n,s^=n<<16,n=858993459&(i>>>2^s),s^=n,i^=n<<2,n=16711935&(i>>>8^s),s^=n,i^=n<<8,i=i<<1|i>>>31&1,n=2863311530&(s^i),s^=n,i^=n,s=s<<1|s>>>31&1;for(let e=0,t=0;e<8;++e){n=i<<28|i>>>4,n^=this.keys[t++];let e=xa[63&n];e|=Sa[n>>>8&63],e|=ka[n>>>16&63],e|=wa[n>>>24&63],n=i^this.keys[t++],e|=Aa[63&n],e|=Ca[n>>>8&63],e|=Ea[n>>>16&63],e|=ya[n>>>24&63],s^=e,n=s<<28|s>>>4,n^=this.keys[t++],e=xa[63&n],e|=Sa[n>>>8&63],e|=ka[n>>>16&63],e|=wa[n>>>24&63],n=s^this.keys[t++],e|=Aa[63&n],e|=Ca[n>>>8&63],e|=Ea[n>>>16&63],e|=ya[n>>>24&63],i^=e}for(i=i<<31|i>>>1,n=2863311530&(s^i),s^=n,i^=n,s=s<<31|s>>>1,n=16711935&(s>>>8^i),i^=n,s^=n<<8,n=858993459&(s>>>2^i),i^=n,s^=n<<2,n=65535&(i>>>16^s),s^=n,i^=n<<16,n=252645135&(i>>>4^s),s^=n,i^=n<<4,n=[i,s],a=0;a<8;a++)t[a]=(n[a>>>2]>>>8*(3-a%4))%256,t[a]<0&&(t[a]+=256);return t}encrypt(e){return this.enc8(e.slice(0,8)).concat(this.enc8(e.slice(8,16)))}}var Ma={Again:57349,AltLeft:56,AltRight:57400,ArrowDown:57424,ArrowLeft:57419,ArrowRight:57421,ArrowUp:57416,AudioVolumeDown:57390,AudioVolumeMute:57376,AudioVolumeUp:57392,Backquote:41,Backslash:43,Backspace:14,BracketLeft:26,BracketRight:27,BrowserBack:57450,BrowserFavorites:57446,BrowserForward:57449,BrowserHome:57394,BrowserRefresh:57447,BrowserSearch:57445,BrowserStop:57448,CapsLock:58,Comma:51,ContextMenu:57437,ControlLeft:29,ControlRight:57373,Convert:121,Copy:57464,Cut:57404,Delete:57427,Digit0:11,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Eject:57469,End:57423,Enter:28,Equal:13,Escape:1,F1:59,F10:68,F11:87,F12:88,F13:93,F14:94,F15:95,F16:85,F17:57347,F18:57463,F19:57348,F2:60,F20:90,F21:116,F22:57465,F23:109,F24:111,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,Find:57409,Help:57461,Hiragana:119,Home:57415,Insert:57426,IntlBackslash:86,IntlRo:115,IntlYen:125,KanaMode:112,Katakana:120,KeyA:30,KeyB:48,KeyC:46,KeyD:32,KeyE:18,KeyF:33,KeyG:34,KeyH:35,KeyI:23,KeyJ:36,KeyK:37,KeyL:38,KeyM:50,KeyN:49,KeyO:24,KeyP:25,KeyQ:16,KeyR:19,KeyS:31,KeyT:20,KeyU:22,KeyV:47,KeyW:17,KeyX:45,KeyY:21,KeyZ:44,Lang1:114,Lang2:113,Lang3:120,Lang4:119,Lang5:118,LaunchApp1:57451,LaunchApp2:57377,LaunchMail:57452,MediaPlayPause:57378,MediaSelect:57453,MediaStop:57380,MediaTrackNext:57369,MediaTrackPrevious:57360,MetaLeft:57435,MetaRight:57436,Minus:12,NonConvert:123,NumLock:69,Numpad0:82,Numpad1:79,Numpad2:80,Numpad3:81,Numpad4:75,Numpad5:76,Numpad6:77,Numpad7:71,Numpad8:72,Numpad9:73,NumpadAdd:78,NumpadComma:126,NumpadDecimal:83,NumpadDivide:57397,NumpadEnter:57372,NumpadEqual:89,NumpadMultiply:55,NumpadParenLeft:57462,NumpadParenRight:57467,NumpadSubtract:74,Open:100,PageDown:57425,PageUp:57417,Paste:101,Pause:57414,Period:52,Power:57438,PrintScreen:84,Props:57350,Quote:40,ScrollLock:70,Semicolon:39,ShiftLeft:42,ShiftRight:54,Slash:53,Sleep:57439,Space:57,Suspend:57381,Tab:15,Undo:57351,WakeUp:57443};const Ta=0,La=1,Ia=2,Pa=5,Oa=7,Da=-260,Na=-32,Ba=-223,Fa=-224,Qa=-239,Ua=-258,za=-307,Ha=-308,Ga=-309,Va=-312,ja=-313,qa=-256,Wa=1464686180,Xa=3231835598;class Ka{constructor(){this._lines=0}decodeRect(e,t,s,i,n,a,r){if(0===s||0===i)return!0;0===this._lines&&(this._lines=i);const o=s*(8==r?1:4);if(n.rQwait("RAW",o))return!1;const l=t+(i-this._lines),c=Math.min(this._lines,Math.floor(n.rQlen/o)),u=s*c;let h=n.rQ,d=n.rQi;if(8==r){const e=new Uint8Array(4*u);for(let t=0;t<u;t++)e[4*t+0]=255*(h[d+t]>>0&3)/3,e[4*t+1]=255*(h[d+t]>>2&3)/3,e[4*t+2]=255*(h[d+t]>>4&3)/3,e[4*t+3]=255;h=e,d=0}for(let e=0;e<u;e++)h[4*e+3]=255;return a.blitImage(e,l,s,c,h,d),n.rQskipBytes(c*o),this._lines-=c,!(this._lines>0)}}class Ya{decodeRect(e,t,s,i,n,a,r){if(n.rQwait("COPYRECT",4))return!1;let o=n.rQshift16(),l=n.rQshift16();return 0===s||0===i||a.copyImage(o,l,e,t,s,i),!0}}class $a{constructor(){this._subrects=0}decodeRect(e,t,s,i,n,a,r){if(0===this._subrects){if(n.rQwait("RRE",8))return!1;this._subrects=n.rQshift32();let r=n.rQshiftBytes(4);a.fillRect(e,t,s,i,r)}for(;this._subrects>0;){if(n.rQwait("RRE",12))return!1;let s=n.rQshiftBytes(4),i=n.rQshift16(),r=n.rQshift16(),o=n.rQshift16(),l=n.rQshift16();a.fillRect(e+i,t+r,o,l,s),this._subrects--}return!0}}class Ja{constructor(){this._tiles=0,this._lastsubencoding=0,this._tileBuffer=new Uint8Array(1024)}decodeRect(e,t,s,i,n,r,o){for(0===this._tiles&&(this._tilesX=Math.ceil(s/16),this._tilesY=Math.ceil(i/16),this._totalTiles=this._tilesX*this._tilesY,this._tiles=this._totalTiles);this._tiles>0;){let o=1;if(n.rQwait("HEXTILE",o))return!1;let l=n.rQ,c=n.rQi,u=l[c];if(u>30)throw new Error("Illegal hextile subencoding (subencoding: "+u+")");const h=this._totalTiles-this._tiles,d=e+16*(h%this._tilesX),f=t+16*Math.floor(h/this._tilesX),p=Math.min(16,e+s-d),_=Math.min(16,t+i-f);if(1&u)o+=p*_*4;else if(2&u&&(o+=4),4&u&&(o+=4),8&u){if(o++,n.rQwait("HEXTILE",o))return!1;let e=l[c+o-1];o+=16&u?6*e:2*e}if(n.rQwait("HEXTILE",o))return!1;if(c++,0===u)1&this._lastsubencoding?a("     Ignoring blank after RAW"):r.fillRect(d,f,p,_,this._background);else if(1&u){let e=p*_;for(let t=0;t<e;t++)l[c+4*t+3]=255;r.blitImage(d,f,p,_,l,c),c+=o-1}else{if(2&u&&(this._background=[l[c],l[c+1],l[c+2],l[c+3]],c+=4),4&u&&(this._foreground=[l[c],l[c+1],l[c+2],l[c+3]],c+=4),this._startTile(d,f,p,_,this._background),8&u){let e=l[c];c++;for(let t=0;t<e;t++){let e;16&u?(e=[l[c],l[c+1],l[c+2],l[c+3]],c+=4):e=this._foreground;const t=l[c];c++;const s=t>>4,i=15&t,n=l[c];c++;const a=1+(n>>4),r=1+(15&n);this._subTile(s,i,a,r,e)}}this._finishTile(r)}n.rQi=c,this._lastsubencoding=u,this._tiles--}return!0}_startTile(e,t,s,i,n){this._tileX=e,this._tileY=t,this._tileW=s,this._tileH=i;const a=n[0],r=n[1],o=n[2],l=this._tileBuffer;for(let e=0;e<s*i*4;e+=4)l[e]=a,l[e+1]=r,l[e+2]=o,l[e+3]=255}_subTile(e,t,s,i,n){const a=n[0],r=n[1],o=n[2],l=e+s,c=t+i,u=this._tileBuffer,h=this._tileW;for(let s=t;s<c;s++)for(let t=e;t<l;t++){const e=4*(t+s*h);u[e]=a,u[e+1]=r,u[e+2]=o,u[e+3]=255}}_finishTile(e){e.blitImage(this._tileX,this._tileY,this._tileW,this._tileH,this._tileBuffer,0)}}class Za{constructor(){this._ctl=null,this._filter=null,this._numColors=0,this._palette=new Uint8Array(1024),this._len=0,this._zlibs=[];for(let e=0;e<4;e++)this._zlibs[e]=new $}decodeRect(e,t,s,i,n,a,o){if(null===this._ctl){if(n.rQwait("TIGHT compression-control",1))return!1;this._ctl=n.rQshift8();for(let e=0;e<4;e++)this._ctl>>e&1&&(this._zlibs[e].reset(),r("Reset zlib stream "+e));this._ctl=this._ctl>>4}let l;if(8===this._ctl)l=this._fillRect(e,t,s,i,n,a,o);else if(9===this._ctl)l=this._jpegRect(e,t,s,i,n,a,o);else if(10===this._ctl)l=this._pngRect(e,t,s,i,n,a,o);else{if(0!=(8&this._ctl))throw new Error("Illegal tight compression received (ctl: "+this._ctl+")");l=this._basicRect(this._ctl,e,t,s,i,n,a,o)}return l&&(this._ctl=null),l}_fillRect(e,t,s,i,n,a,r){if(n.rQwait("TIGHT",3))return!1;const o=n.rQi,l=n.rQ;return a.fillRect(e,t,s,i,[l[o],l[o+1],l[o+2]],!1),n.rQskipBytes(3),!0}_jpegRect(e,t,s,i,n,a,r){let o=this._readData(n);return null!==o&&(a.imageRect(e,t,s,i,"image/jpeg",o),!0)}_pngRect(e,t,s,i,n,a,r){throw new Error("PNG received in standard Tight rect")}_basicRect(e,t,s,i,n,a,r,o){if(null===this._filter)if(4&e){if(a.rQwait("TIGHT",1))return!1;this._filter=a.rQshift8()}else this._filter=0;let l,c=3&e;switch(this._filter){case 0:l=this._copyFilter(c,t,s,i,n,a,r,o);break;case 1:l=this._paletteFilter(c,t,s,i,n,a,r,o);break;case 2:l=this._gradientFilter(c,t,s,i,n,a,r,o);break;default:throw new Error("Illegal tight filter received (ctl: "+this._filter+")")}return l&&(this._filter=null),l}_copyFilter(e,t,s,i,n,a,r,o){const l=i*n*3;let c;if(0===l)return!0;if(l<12){if(a.rQwait("TIGHT",l))return!1;c=a.rQshiftBytes(l)}else{if(c=this._readData(a),null===c)return!1;this._zlibs[e].setInput(c),c=this._zlibs[e].inflate(l),this._zlibs[e].setInput(null)}let u=new Uint8Array(i*n*4);for(let e=0,t=0;e<i*n*4;e+=4,t+=3)u[e]=c[t],u[e+1]=c[t+1],u[e+2]=c[t+2],u[e+3]=255;return r.blitImage(t,s,i,n,u,0,!1),!0}_paletteFilter(e,t,s,i,n,a,r,o){if(0===this._numColors){if(a.rQwait("TIGHT palette",1))return!1;const e=a.rQpeek8()+1,t=3*e;if(a.rQwait("TIGHT palette",1+t))return!1;this._numColors=e,a.rQskipBytes(1),a.rQshiftTo(this._palette,t)}const l=this._numColors<=2?1:8,c=Math.floor((i*l+7)/8)*n;let u;if(0===c)return!0;if(c<12){if(a.rQwait("TIGHT",c))return!1;u=a.rQshiftBytes(c)}else{if(u=this._readData(a),null===u)return!1;this._zlibs[e].setInput(u),u=this._zlibs[e].inflate(c),this._zlibs[e].setInput(null)}return 2==this._numColors?this._monoRect(t,s,i,n,u,this._palette,r):this._paletteRect(t,s,i,n,u,this._palette,r),this._numColors=0,!0}_monoRect(e,t,s,i,n,a,r){const o=this._getScratchBuffer(s*i*4),l=Math.floor((s+7)/8),c=Math.floor(s/8);for(let e=0;e<i;e++){let t,i,r;for(r=0;r<c;r++)for(let c=7;c>=0;c--)t=4*(e*s+8*r+7-c),i=3*(n[e*l+r]>>c&1),o[t]=a[i],o[t+1]=a[i+1],o[t+2]=a[i+2],o[t+3]=255;for(let c=7;c>=8-s%8;c--)t=4*(e*s+8*r+7-c),i=3*(n[e*l+r]>>c&1),o[t]=a[i],o[t+1]=a[i+1],o[t+2]=a[i+2],o[t+3]=255}r.blitImage(e,t,s,i,o,0,!1)}_paletteRect(e,t,s,i,n,a,r){const o=this._getScratchBuffer(s*i*4),l=s*i*4;for(let e=0,t=0;e<l;e+=4,t++){const s=3*n[t];o[e]=a[s],o[e+1]=a[s+1],o[e+2]=a[s+2],o[e+3]=255}r.blitImage(e,t,s,i,o,0,!1)}_gradientFilter(e,t,s,i,n,a,r,o){throw new Error("Gradient filter not implemented")}_readData(e){if(0===this._len){if(e.rQwait("TIGHT",3))return null;let t;t=e.rQshift8(),this._len=127&t,128&t&&(t=e.rQshift8(),this._len|=(127&t)<<7,128&t&&(t=e.rQshift8(),this._len|=t<<14))}if(e.rQwait("TIGHT",this._len))return null;let t=e.rQshiftBytes(this._len);return this._len=0,t}_getScratchBuffer(e){return(!this._scratchBuffer||this._scratchBuffer.length<e)&&(this._scratchBuffer=new Uint8Array(e)),this._scratchBuffer}}class er extends Za{_pngRect(e,t,s,i,n,a,r){let o=this._readData(n);return null!==o&&(a.imageRect(e,t,s,i,"image/png",o),!0)}_basicRect(e,t,s,i,n,a,r,o){throw new Error("BasicCompression received in TightPNG rect")}}class tr extends class{constructor(){this._listeners=new Map}addEventListener(e,t){this._listeners.has(e)||this._listeners.set(e,new Set),this._listeners.get(e).add(t)}removeEventListener(e,t){this._listeners.has(e)&&this._listeners.get(e).delete(t)}dispatchEvent(e){return!this._listeners.has(e.type)||(this._listeners.get(e.type).forEach(t=>t.call(this,e)),!e.defaultPrevented)}}{constructor(e,t,s){if(!e)throw new Error("Must specify target");if(!t)throw new Error("Must specify URL, WebSocket or RTCDataChannel");super(),this._target=e,"string"==typeof t?this._url=t:(this._url=null,this._rawChannel=t),s=s||{},this._rfbCredentials=s.credentials||{},this._shared=!("shared"in s)||!!s.shared,this._repeaterID=s.repeaterID||"",this._wsProtocols=s.wsProtocols||[],this._rfbConnectionState="",this._rfbInitState="",this._rfbAuthScheme=-1,this._rfbCleanDisconnect=!0,this._rfbVersion=0,this._rfbMaxVersion=3.8,this._rfbTightVNC=!1,this._rfbVeNCryptState=0,this._rfbXvpVer=0,this._fbWidth=0,this._fbHeight=0,this._fbName="",this._capabilities={power:!1},this._supportsFence=!1,this._supportsContinuousUpdates=!1,this._enabledContinuousUpdates=!1,this._supportsSetDesktopSize=!1,this._screenID=0,this._screenFlags=0,this._qemuExtKeyEventSupported=!1,this._clipboardText=null,this._clipboardServerCapabilitiesActions={},this._clipboardServerCapabilitiesFormats={},this._sock=null,this._display=null,this._flushing=!1,this._keyboard=null,this._gestures=null,this._resizeObserver=null,this._disconnTimer=null,this._resizeTimeout=null,this._mouseMoveTimer=null,this._decoders={},this._FBU={rects:0,x:0,y:0,width:0,height:0,encoding:null},this._mousePos={},this._mouseButtonMask=0,this._mouseLastMoveTime=0,this._viewportDragging=!1,this._viewportDragPos={},this._viewportHasMoved=!1,this._accumulatedWheelDeltaX=0,this._accumulatedWheelDeltaY=0,this._gestureLastTapTime=null,this._gestureFirstDoubleTapEv=null,this._gestureLastMagnitudeX=0,this._gestureLastMagnitudeY=0,this._eventHandlers={focusCanvas:this._focusCanvas.bind(this),handleResize:this._handleResize.bind(this),handleMouse:this._handleMouse.bind(this),handleWheel:this._handleWheel.bind(this),handleGesture:this._handleGesture.bind(this)},a(">> RFB.constructor"),this._screen=document.createElement("div"),this._screen.style.display="flex",this._screen.style.width="100%",this._screen.style.height="100%",this._screen.style.overflow="auto",this._screen.style.background="rgb(40, 40, 40)",this._canvas=document.createElement("canvas"),this._canvas.style.margin="auto",this._canvas.style.outline="none",this._canvas.width=0,this._canvas.height=0,this._canvas.tabIndex=-1,this._screen.appendChild(this._canvas),this._cursor=new na,this._cursorImage=tr.cursors.none,this._decoders[Ta]=new Ka,this._decoders[La]=new Ya,this._decoders[Ia]=new $a,this._decoders[Pa]=new Ja,this._decoders[Oa]=new Za,this._decoders[Da]=new er;try{this._display=new R(this._canvas)}catch(e){throw l("Display exception: "+e),e}this._display.onflush=this._onFlush.bind(this),this._keyboard=new ta(this._canvas),this._keyboard.onkeyevent=this._handleKeyEvent.bind(this),this._gestures=new sa,this._sock=new ha,this._sock.on("open",this._socketOpen.bind(this)),this._sock.on("close",this._socketClose.bind(this)),this._sock.on("message",this._handleMessage.bind(this)),this._sock.on("error",this._socketError.bind(this)),this._resizeObserver=new ResizeObserver(this._eventHandlers.handleResize),this._updateConnectionState("connecting"),a("<< RFB.constructor"),this.dragViewport=!1,this.focusOnClick=!0,this._viewOnly=!1,this._clipViewport=!1,this._scaleViewport=!1,this._resizeSession=!1,this._showDotCursor=!1,void 0!==s.showDotCursor&&(o("Specifying showDotCursor as a RFB constructor argument is deprecated"),this._showDotCursor=s.showDotCursor),this._qualityLevel=6,this._compressionLevel=2}get viewOnly(){return this._viewOnly}set viewOnly(e){this._viewOnly=e,"connecting"!==this._rfbConnectionState&&"connected"!==this._rfbConnectionState||(e?this._keyboard.ungrab():this._keyboard.grab())}get capabilities(){return this._capabilities}get touchButton(){return 0}set touchButton(e){o("Using old API!")}get clipViewport(){return this._clipViewport}set clipViewport(e){this._clipViewport=e,this._updateClip()}get scaleViewport(){return this._scaleViewport}set scaleViewport(e){this._scaleViewport=e,e&&this._clipViewport&&this._updateClip(),this._updateScale(),!e&&this._clipViewport&&this._updateClip()}get resizeSession(){return this._resizeSession}set resizeSession(e){this._resizeSession=e,e&&this._requestRemoteResize()}get showDotCursor(){return this._showDotCursor}set showDotCursor(e){this._showDotCursor=e,this._refreshCursor()}get background(){return this._screen.style.background}set background(e){this._screen.style.background=e}get qualityLevel(){return this._qualityLevel}set qualityLevel(e){!Number.isInteger(e)||e<0||e>9?l("qualityLevel must be an integer between 0 and 9"):this._qualityLevel!==e&&(this._qualityLevel=e,"connected"===this._rfbConnectionState&&this._sendEncodings())}get compressionLevel(){return this._compressionLevel}set compressionLevel(e){!Number.isInteger(e)||e<0||e>9?l("compressionLevel must be an integer between 0 and 9"):this._compressionLevel!==e&&(this._compressionLevel=e,"connected"===this._rfbConnectionState&&this._sendEncodings())}disconnect(){this._updateConnectionState("disconnecting"),this._sock.off("error"),this._sock.off("message"),this._sock.off("open")}sendCredentials(e){this._rfbCredentials=e,setTimeout(this._initMsg.bind(this),0)}sendCtrlAltDel(){"connected"!==this._rfbConnectionState||this._viewOnly||(r("Sending Ctrl-Alt-Del"),this.sendKey(ii,"ControlLeft",!0),this.sendKey(li,"AltLeft",!0),this.sendKey(rt,"Delete",!0),this.sendKey(rt,"Delete",!1),this.sendKey(li,"AltLeft",!1),this.sendKey(ii,"ControlLeft",!1))}machineShutdown(){this._xvpOp(1,2)}machineReboot(){this._xvpOp(1,3)}machineReset(){this._xvpOp(1,4)}sendKey(e,t,s){if("connected"!==this._rfbConnectionState||this._viewOnly)return;if(void 0===s)return this.sendKey(e,t,!0),void this.sendKey(e,t,!1);const i=Ma[t];if(this._qemuExtKeyEventSupported&&i)r("Sending key ("+(s?"down":"up")+"): keysym "+(e=e||0)+", scancode "+i),tr.messages.QEMUExtendedKeyEvent(this._sock,e,s,i);else{if(!e)return;r("Sending keysym ("+(s?"down":"up")+"): "+e),tr.messages.keyEvent(this._sock,e,s?1:0)}}focus(){this._canvas.focus()}blur(){this._canvas.blur()}clipboardPasteFrom(e){if("connected"===this._rfbConnectionState&&!this._viewOnly)if(this._clipboardServerCapabilitiesFormats[1]&&this._clipboardServerCapabilitiesActions[1<<27])this._clipboardText=e,tr.messages.extendedClipboardNotify(this._sock,[1]);else{let t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);tr.messages.clientCutText(this._sock,t)}}_connect(){if(a(">> RFB.connect"),this._url)r("connecting to "+this._url),this._sock.open(this._url,this._wsProtocols);else{if(r(`attaching ${this._rawChannel} to Websock`),this._sock.attach(this._rawChannel),"closed"===this._sock.readyState)throw Error("Cannot use already closed WebSocket/RTCDataChannel");"open"===this._sock.readyState&&this._socketOpen()}this._target.appendChild(this._screen),this._gestures.attach(this._canvas),this._cursor.attach(this._canvas),this._refreshCursor(),this._resizeObserver.observe(this._screen),this._canvas.addEventListener("mousedown",this._eventHandlers.focusCanvas),this._canvas.addEventListener("touchstart",this._eventHandlers.focusCanvas),this._canvas.addEventListener("mousedown",this._eventHandlers.handleMouse),this._canvas.addEventListener("mouseup",this._eventHandlers.handleMouse),this._canvas.addEventListener("mousemove",this._eventHandlers.handleMouse),this._canvas.addEventListener("click",this._eventHandlers.handleMouse),this._canvas.addEventListener("contextmenu",this._eventHandlers.handleMouse),this._canvas.addEventListener("wheel",this._eventHandlers.handleWheel),this._canvas.addEventListener("gesturestart",this._eventHandlers.handleGesture),this._canvas.addEventListener("gesturemove",this._eventHandlers.handleGesture),this._canvas.addEventListener("gestureend",this._eventHandlers.handleGesture),this._pingInterval=setInterval(()=>{this.sendKey(Ls,"F12")},15e3),a("<< RFB.connect")}_disconnect(){a(">> RFB.disconnect"),this._cursor.detach(),this._canvas.removeEventListener("gesturestart",this._eventHandlers.handleGesture),this._canvas.removeEventListener("gesturemove",this._eventHandlers.handleGesture),this._canvas.removeEventListener("gestureend",this._eventHandlers.handleGesture),this._canvas.removeEventListener("wheel",this._eventHandlers.handleWheel),this._canvas.removeEventListener("mousedown",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mouseup",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mousemove",this._eventHandlers.handleMouse),this._canvas.removeEventListener("click",this._eventHandlers.handleMouse),this._canvas.removeEventListener("contextmenu",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mousedown",this._eventHandlers.focusCanvas),this._canvas.removeEventListener("touchstart",this._eventHandlers.focusCanvas),this._resizeObserver.disconnect(),this._keyboard.ungrab(),this._gestures.detach(),this._sock.close();try{this._target.removeChild(this._screen)}catch(e){if("NotFoundError"!==e.name)throw e}clearTimeout(this._resizeTimeout),clearTimeout(this._mouseMoveTimer),clearInterval(this._pingInterval),a("<< RFB.disconnect")}_socketOpen(){"connecting"===this._rfbConnectionState&&""===this._rfbInitState?(this._rfbInitState="ProtocolVersion",a("Starting VNC handshake")):this._fail("Unexpected server connection while "+this._rfbConnectionState)}_socketClose(e){a("WebSocket on-close event");let t="";switch(e.code&&(t="(code: "+e.code,e.reason&&(t+=", reason: "+e.reason),t+=")"),this._rfbConnectionState){case"connecting":this._fail("Connection closed "+t);break;case"connected":this._updateConnectionState("disconnecting"),this._updateConnectionState("disconnected");break;case"disconnecting":this._updateConnectionState("disconnected");break;case"disconnected":this._fail("Unexpected server disconnect when already disconnected "+t);break;default:this._fail("Unexpected server disconnect before connecting "+t)}this._sock.off("close"),this._rawChannel=null}_socketError(e){o("WebSocket on-error event")}_focusCanvas(e){this.focusOnClick&&this.focus()}_setDesktopName(e){this._fbName=e,this.dispatchEvent(new CustomEvent("desktopname",{detail:{name:this._fbName}}))}_handleResize(){window.requestAnimationFrame(()=>{this._updateClip(),this._updateScale()}),this._resizeSession&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this._requestRemoteResize.bind(this),500))}_updateClip(){const e=this._display.clipViewport;let t=this._clipViewport;if(this._scaleViewport&&(t=!1),e!==t&&(this._display.clipViewport=t),t){const e=this._screenSize();this._display.viewportChangeSize(e.w,e.h),this._fixScrollbars()}}_updateScale(){if(this._scaleViewport){const e=this._screenSize();this._display.autoscale(e.w,e.h)}else this._display.scale=1;this._fixScrollbars()}_requestRemoteResize(){if(clearTimeout(this._resizeTimeout),this._resizeTimeout=null,!this._resizeSession||this._viewOnly||!this._supportsSetDesktopSize)return;const e=this._screenSize();tr.messages.setDesktopSize(this._sock,Math.floor(e.w),Math.floor(e.h),this._screenID,this._screenFlags),a("Requested new desktop size: "+e.w+"x"+e.h)}_screenSize(){let e=this._screen.getBoundingClientRect();return{w:e.width,h:e.height}}_fixScrollbars(){const e=this._screen.style.overflow;this._screen.style.overflow="hidden",this._screen.getBoundingClientRect(),this._screen.style.overflow=e}_updateConnectionState(e){const t=this._rfbConnectionState;if(e!==t)if("disconnected"!==t){switch(e){case"connected":if("connecting"!==t)return void l("Bad transition to connected state, previous connection state: "+t);break;case"disconnected":if("disconnecting"!==t)return void l("Bad transition to disconnected state, previous connection state: "+t);break;case"connecting":if(""!==t)return void l("Bad transition to connecting state, previous connection state: "+t);break;case"disconnecting":if("connected"!==t&&"connecting"!==t)return void l("Bad transition to disconnecting state, previous connection state: "+t);break;default:return void l("Unknown connection state: "+e)}switch(this._rfbConnectionState=e,a("New state '"+e+"', was '"+t+"'."),this._disconnTimer&&"disconnecting"!==e&&(a("Clearing disconnect timer"),clearTimeout(this._disconnTimer),this._disconnTimer=null,this._sock.off("close")),e){case"connecting":this._connect();break;case"connected":this.dispatchEvent(new CustomEvent("connect",{detail:{}}));break;case"disconnecting":this._disconnect(),this._disconnTimer=setTimeout(()=>{l("Disconnection timed out."),this._updateConnectionState("disconnected")},3e3);break;case"disconnected":this.dispatchEvent(new CustomEvent("disconnect",{detail:{clean:this._rfbCleanDisconnect}}))}}else l("Tried changing state of a disconnected RFB object");else a("Already in state '"+e+"', ignoring")}_fail(e){switch(this._rfbConnectionState){case"disconnecting":l("Failed when disconnecting: "+e);break;case"connected":l("Failed while connected: "+e);break;case"connecting":l("Failed when connecting: "+e);break;default:l("RFB failure: "+e)}return this._rfbCleanDisconnect=!1,this._updateConnectionState("disconnecting"),this._updateConnectionState("disconnected"),!1}_setCapability(e,t){this._capabilities[e]=t,this.dispatchEvent(new CustomEvent("capabilities",{detail:{capabilities:this._capabilities}}))}_handleMessage(){if(0!==this._sock.rQlen)switch(this._rfbConnectionState){case"disconnected":l("Got data while disconnected");break;case"connected":for(;!this._flushing&&this._normalMsg()&&0!==this._sock.rQlen;);break;default:this._initMsg()}else o("handleMessage called on an empty receive queue")}_handleKeyEvent(e,t,s){this.sendKey(e,t,s)}_handleMouse(e){if("click"===e.type&&e.target!==this._canvas)return;if(e.stopPropagation(),e.preventDefault(),"click"===e.type||"contextmenu"===e.type)return;let t=v(e.clientX,e.clientY,this._canvas);switch(e.type){case"mousedown":!function(e){if(e.setCapture)e.setCapture(),document.captureElement=e;else{x();let t=document.getElementById("noVNC_mouse_capture_elem");null===t&&(t=document.createElement("div"),t.id="noVNC_mouse_capture_elem",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%",t.style.zIndex=1e4,t.style.display="none",document.body.appendChild(t),t.addEventListener("contextmenu",E),t.addEventListener("mousemove",E),t.addEventListener("mouseup",E)),document.captureElement=e,C.observe(e,{attributes:!0}),S(),t.style.display="",window.addEventListener("mousemove",E),window.addEventListener("mouseup",E)}}(this._canvas),this._handleMouseButton(t.x,t.y,!0,1<<e.button);break;case"mouseup":this._handleMouseButton(t.x,t.y,!1,1<<e.button);break;case"mousemove":this._handleMouseMove(t.x,t.y)}}_handleMouseButton(e,t,s,i){if(this.dragViewport){if(s&&!this._viewportDragging)return this._viewportDragging=!0,this._viewportDragPos={x:e,y:t},void(this._viewportHasMoved=!1);if(this._viewportDragging=!1,this._viewportHasMoved)return;this._sendMouse(e,t,i)}null!==this._mouseMoveTimer&&(clearTimeout(this._mouseMoveTimer),this._mouseMoveTimer=null,this._sendMouse(e,t,this._mouseButtonMask)),s?this._mouseButtonMask|=i:this._mouseButtonMask&=~i,this._sendMouse(e,t,this._mouseButtonMask)}_handleMouseMove(e,t){if(this._viewportDragging){const s=this._viewportDragPos.x-e,i=this._viewportDragPos.y-t;(this._viewportHasMoved||Math.abs(s)>d||Math.abs(i)>d)&&(this._viewportHasMoved=!0,this._viewportDragPos={x:e,y:t},this._display.viewportChangePos(s,i))}else if(this._mousePos={x:e,y:t},null==this._mouseMoveTimer){const s=Date.now()-this._mouseLastMoveTime;s>17?(this._sendMouse(e,t,this._mouseButtonMask),this._mouseLastMoveTime=Date.now()):this._mouseMoveTimer=setTimeout(()=>{this._handleDelayedMouseMove()},17-s)}}_handleDelayedMouseMove(){this._mouseMoveTimer=null,this._sendMouse(this._mousePos.x,this._mousePos.y,this._mouseButtonMask),this._mouseLastMoveTime=Date.now()}_sendMouse(e,t,s){"connected"===this._rfbConnectionState&&(this._viewOnly||tr.messages.pointerEvent(this._sock,this._display.absX(e),this._display.absY(t),s))}_handleWheel(e){if("connected"!==this._rfbConnectionState)return;if(this._viewOnly)return;e.stopPropagation(),e.preventDefault();let t=v(e.clientX,e.clientY,this._canvas),s=e.deltaX,i=e.deltaY;0!==e.deltaMode&&(s*=19,i*=19),this._accumulatedWheelDeltaX+=s,this._accumulatedWheelDeltaY+=i,Math.abs(this._accumulatedWheelDeltaX)>=50&&(this._accumulatedWheelDeltaX<0?(this._handleMouseButton(t.x,t.y,!0,32),this._handleMouseButton(t.x,t.y,!1,32)):this._accumulatedWheelDeltaX>0&&(this._handleMouseButton(t.x,t.y,!0,64),this._handleMouseButton(t.x,t.y,!1,64)),this._accumulatedWheelDeltaX=0),Math.abs(this._accumulatedWheelDeltaY)>=50&&(this._accumulatedWheelDeltaY<0?(this._handleMouseButton(t.x,t.y,!0,8),this._handleMouseButton(t.x,t.y,!1,8)):this._accumulatedWheelDeltaY>0&&(this._handleMouseButton(t.x,t.y,!0,16),this._handleMouseButton(t.x,t.y,!1,16)),this._accumulatedWheelDeltaY=0)}_fakeMouseMove(e,t,s){this._handleMouseMove(t,s),this._cursor.move(e.detail.clientX,e.detail.clientY)}_handleTapEvent(e,t){let s=v(e.detail.clientX,e.detail.clientY,this._canvas);if(null!==this._gestureLastTapTime&&Date.now()-this._gestureLastTapTime<1e3&&this._gestureFirstDoubleTapEv.detail.type===e.detail.type){let t=this._gestureFirstDoubleTapEv.detail.clientX-e.detail.clientX,i=this._gestureFirstDoubleTapEv.detail.clientY-e.detail.clientY;Math.hypot(t,i)<50?s=v(this._gestureFirstDoubleTapEv.detail.clientX,this._gestureFirstDoubleTapEv.detail.clientY,this._canvas):this._gestureFirstDoubleTapEv=e}else this._gestureFirstDoubleTapEv=e;this._gestureLastTapTime=Date.now(),this._fakeMouseMove(this._gestureFirstDoubleTapEv,s.x,s.y),this._handleMouseButton(s.x,s.y,!0,t),this._handleMouseButton(s.x,s.y,!1,t)}_handleGesture(e){let t,s=v(e.detail.clientX,e.detail.clientY,this._canvas);switch(e.type){case"gesturestart":switch(e.detail.type){case"onetap":this._handleTapEvent(e,1);break;case"twotap":this._handleTapEvent(e,4);break;case"threetap":this._handleTapEvent(e,2);break;case"drag":this._fakeMouseMove(e,s.x,s.y),this._handleMouseButton(s.x,s.y,!0,1);break;case"longpress":this._fakeMouseMove(e,s.x,s.y),this._handleMouseButton(s.x,s.y,!0,4);break;case"twodrag":this._gestureLastMagnitudeX=e.detail.magnitudeX,this._gestureLastMagnitudeY=e.detail.magnitudeY,this._fakeMouseMove(e,s.x,s.y);break;case"pinch":this._gestureLastMagnitudeX=Math.hypot(e.detail.magnitudeX,e.detail.magnitudeY),this._fakeMouseMove(e,s.x,s.y)}break;case"gesturemove":switch(e.detail.type){case"onetap":case"twotap":case"threetap":break;case"drag":case"longpress":this._fakeMouseMove(e,s.x,s.y);break;case"twodrag":for(this._fakeMouseMove(e,s.x,s.y);e.detail.magnitudeY-this._gestureLastMagnitudeY>50;)this._handleMouseButton(s.x,s.y,!0,8),this._handleMouseButton(s.x,s.y,!1,8),this._gestureLastMagnitudeY+=50;for(;e.detail.magnitudeY-this._gestureLastMagnitudeY<-50;)this._handleMouseButton(s.x,s.y,!0,16),this._handleMouseButton(s.x,s.y,!1,16),this._gestureLastMagnitudeY-=50;for(;e.detail.magnitudeX-this._gestureLastMagnitudeX>50;)this._handleMouseButton(s.x,s.y,!0,32),this._handleMouseButton(s.x,s.y,!1,32),this._gestureLastMagnitudeX+=50;for(;e.detail.magnitudeX-this._gestureLastMagnitudeX<-50;)this._handleMouseButton(s.x,s.y,!0,64),this._handleMouseButton(s.x,s.y,!1,64),this._gestureLastMagnitudeX-=50;break;case"pinch":if(this._fakeMouseMove(e,s.x,s.y),t=Math.hypot(e.detail.magnitudeX,e.detail.magnitudeY),Math.abs(t-this._gestureLastMagnitudeX)>75){for(this._handleKeyEvent(ii,"ControlLeft",!0);t-this._gestureLastMagnitudeX>75;)this._handleMouseButton(s.x,s.y,!0,8),this._handleMouseButton(s.x,s.y,!1,8),this._gestureLastMagnitudeX+=75;for(;t-this._gestureLastMagnitudeX<-75;)this._handleMouseButton(s.x,s.y,!0,16),this._handleMouseButton(s.x,s.y,!1,16),this._gestureLastMagnitudeX-=75}this._handleKeyEvent(ii,"ControlLeft",!1)}break;case"gestureend":switch(e.detail.type){case"onetap":case"twotap":case"threetap":case"pinch":case"twodrag":break;case"drag":this._fakeMouseMove(e,s.x,s.y),this._handleMouseButton(s.x,s.y,!1,1);break;case"longpress":this._fakeMouseMove(e,s.x,s.y),this._handleMouseButton(s.x,s.y,!1,4)}}}_negotiateProtocolVersion(){if(this._sock.rQwait("version",12))return!1;const e=this._sock.rQshiftStr(12).substr(4,7);r("Server ProtocolVersion: "+e);let t=0;switch(e){case"000.000":t=1;break;case"003.003":case"003.006":case"003.889":this._rfbVersion=3.3;break;case"003.007":this._rfbVersion=3.7;break;case"003.008":case"004.000":case"004.001":case"005.000":this._rfbVersion=3.8;break;default:return this._fail("Invalid server version "+e)}if(t){let e="ID:"+this._repeaterID;for(;e.length<250;)e+="\0";return this._sock.sendString(e),!0}this._rfbVersion>this._rfbMaxVersion&&(this._rfbVersion=this._rfbMaxVersion);const s="00"+parseInt(this._rfbVersion,10)+".00"+10*this._rfbVersion%10;this._sock.sendString("RFB "+s+"\n"),a("Sent ProtocolVersion: "+s),this._rfbInitState="Security"}_negotiateSecurity(){if(this._rfbVersion>=3.7){const e=this._sock.rQshift8();if(this._sock.rQwait("security type",e,1))return!1;if(0===e)return this._rfbInitState="SecurityReason",this._securityContext="no security types",this._securityStatus=1,this._initMsg();const t=this._sock.rQshiftBytes(e);if(a("Server security types: "+t),t.includes(1))this._rfbAuthScheme=1;else if(t.includes(22))this._rfbAuthScheme=22;else if(t.includes(16))this._rfbAuthScheme=16;else if(t.includes(2))this._rfbAuthScheme=2;else{if(!t.includes(19))return this._fail("Unsupported security types (types: "+t+")");this._rfbAuthScheme=19}this._sock.send([this._rfbAuthScheme])}else{if(this._sock.rQwait("security scheme",4))return!1;if(this._rfbAuthScheme=this._sock.rQshift32(),0==this._rfbAuthScheme)return this._rfbInitState="SecurityReason",this._securityContext="authentication scheme",this._securityStatus=1,this._initMsg()}return this._rfbInitState="Authentication",a("Authenticating using scheme: "+this._rfbAuthScheme),this._initMsg()}_handleSecurityReason(){if(this._sock.rQwait("reason length",4))return!1;const e=this._sock.rQshift32();let t="";if(e>0){if(this._sock.rQwait("reason",e,4))return!1;t=this._sock.rQshiftStr(e)}return""!==t?(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:this._securityStatus,reason:t}})),this._fail("Security negotiation failed on "+this._securityContext+" (reason: "+t+")")):(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:this._securityStatus}})),this._fail("Security negotiation failed on "+this._securityContext))}_negotiateXvpAuth(){if(void 0===this._rfbCredentials.username||void 0===this._rfbCredentials.password||void 0===this._rfbCredentials.target)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password","target"]}})),!1;const e=String.fromCharCode(this._rfbCredentials.username.length)+String.fromCharCode(this._rfbCredentials.target.length)+this._rfbCredentials.username+this._rfbCredentials.target;return this._sock.sendString(e),this._rfbAuthScheme=2,this._negotiateAuthentication()}_negotiateVeNCryptAuth(){if(0==this._rfbVeNCryptState){if(this._sock.rQwait("vencrypt version",2))return!1;const e=this._sock.rQshift8(),t=this._sock.rQshift8();if(0!=e||2!=t)return this._fail("Unsupported VeNCrypt version "+e+"."+t);this._sock.send([0,2]),this._rfbVeNCryptState=1}if(1==this._rfbVeNCryptState){if(this._sock.rQwait("vencrypt ack",1))return!1;const e=this._sock.rQshift8();if(0!=e)return this._fail("VeNCrypt failure "+e);this._rfbVeNCryptState=2}if(2==this._rfbVeNCryptState){if(this._sock.rQwait("vencrypt subtypes length",1))return!1;const e=this._sock.rQshift8();if(e<1)return this._fail("VeNCrypt subtypes empty");this._rfbVeNCryptSubtypesLength=e,this._rfbVeNCryptState=3}if(3==this._rfbVeNCryptState){if(this._sock.rQwait("vencrypt subtypes",4*this._rfbVeNCryptSubtypesLength))return!1;const e=[];for(let t=0;t<this._rfbVeNCryptSubtypesLength;t++)e.push(this._sock.rQshift32());if(-1==e.indexOf(256))return this._fail("VeNCrypt Plain subtype not offered by server");this._sock.send([0,0,1,0]),this._rfbVeNCryptState=4}if(4==this._rfbVeNCryptState){if(void 0===this._rfbCredentials.username||void 0===this._rfbCredentials.password)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1;const e=u(this._rfbCredentials.username),t=u(this._rfbCredentials.password);return this._sock.send([e.length>>24&255,e.length>>16&255,e.length>>8&255,255&e.length]),this._sock.send([t.length>>24&255,t.length>>16&255,t.length>>8&255,255&t.length]),this._sock.sendString(e),this._sock.sendString(t),this._rfbInitState="SecurityResult",!0}}_negotiateStdVNCAuth(){if(this._sock.rQwait("auth challenge",16))return!1;if(void 0===this._rfbCredentials.password)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["password"]}})),!1;const e=Array.prototype.slice.call(this._sock.rQshiftBytes(16)),t=tr.genDES(this._rfbCredentials.password,e);return this._sock.send(t),this._rfbInitState="SecurityResult",!0}_negotiateTightUnixAuth(){return void 0===this._rfbCredentials.username||void 0===this._rfbCredentials.password?(this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1):(this._sock.send([0,0,0,this._rfbCredentials.username.length]),this._sock.send([0,0,0,this._rfbCredentials.password.length]),this._sock.sendString(this._rfbCredentials.username),this._sock.sendString(this._rfbCredentials.password),this._rfbInitState="SecurityResult",!0)}_negotiateTightTunnels(e){const t={vendor:"TGHT",signature:"NOTUNNEL"},s={};for(let t=0;t<e;t++){const e=this._sock.rQshift32(),t=this._sock.rQshiftStr(4),i=this._sock.rQshiftStr(8);s[e]={vendor:t,signature:i}}return a("Server Tight tunnel types: "+s),s[1]&&"SICR"===s[1].vendor&&"SCHANNEL"===s[1].signature&&(a("Detected Siemens server. Assuming NOTUNNEL support."),s[0]={vendor:"TGHT",signature:"NOTUNNEL"}),s[0]?s[0].vendor!=t.vendor||s[0].signature!=t.signature?this._fail("Client's tunnel type had the incorrect vendor or signature"):(a("Selected tunnel type: "+t),this._sock.send([0,0,0,0]),!1):this._fail("Server wanted tunnels, but doesn't support the notunnel type")}_negotiateTightAuth(){if(!this._rfbTightVNC){if(this._sock.rQwait("num tunnels",4))return!1;const e=this._sock.rQshift32();if(e>0&&this._sock.rQwait("tunnel capabilities",16*e,4))return!1;if(this._rfbTightVNC=!0,e>0)return this._negotiateTightTunnels(e),!1}if(this._sock.rQwait("sub auth count",4))return!1;const e=this._sock.rQshift32();if(0===e)return this._rfbInitState="SecurityResult",!0;if(this._sock.rQwait("sub auth capabilities",16*e,4))return!1;const t={STDVNOAUTH__:1,STDVVNCAUTH_:2,TGHTULGNAUTH:129},s=[];for(let t=0;t<e;t++){this._sock.rQshift32();const e=this._sock.rQshiftStr(12);s.push(e)}a("Server Tight authentication types: "+s);for(let e in t)if(-1!=s.indexOf(e))switch(this._sock.send([0,0,0,t[e]]),a("Selected authentication type: "+e),e){case"STDVNOAUTH__":return this._rfbInitState="SecurityResult",!0;case"STDVVNCAUTH_":return this._rfbAuthScheme=2,this._initMsg();case"TGHTULGNAUTH":return this._rfbAuthScheme=129,this._initMsg();default:return this._fail("Unsupported tiny auth scheme (scheme: "+e+")")}return this._fail("No supported sub-auth types!")}_negotiateAuthentication(){switch(this._rfbAuthScheme){case 1:return this._rfbVersion>=3.8?(this._rfbInitState="SecurityResult",!0):(this._rfbInitState="ClientInitialisation",this._initMsg());case 22:return this._negotiateXvpAuth();case 2:return this._negotiateStdVNCAuth();case 16:return this._negotiateTightAuth();case 19:return this._negotiateVeNCryptAuth();case 129:return this._negotiateTightUnixAuth();default:return this._fail("Unsupported auth scheme (scheme: "+this._rfbAuthScheme+")")}}_handleSecurityResult(){if(this._sock.rQwait("VNC auth response ",4))return!1;const e=this._sock.rQshift32();return 0===e?(this._rfbInitState="ClientInitialisation",a("Authentication OK"),this._initMsg()):this._rfbVersion>=3.8?(this._rfbInitState="SecurityReason",this._securityContext="security result",this._securityStatus=e,this._initMsg()):(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:e}})),this._fail("Security handshake failed"))}_negotiateServerInit(){if(this._sock.rQwait("server initialization",24))return!1;const e=this._sock.rQshift16(),t=this._sock.rQshift16(),s=this._sock.rQshift8(),i=this._sock.rQshift8(),n=this._sock.rQshift8(),a=this._sock.rQshift8(),l=this._sock.rQshift16(),u=this._sock.rQshift16(),h=this._sock.rQshift16(),d=this._sock.rQshift8(),f=this._sock.rQshift8(),p=this._sock.rQshift8();this._sock.rQskipBytes(3);const _=this._sock.rQshift32();if(this._sock.rQwait("server init name",_,24))return!1;let g=this._sock.rQshiftStr(_);if(g=c(g,!0),this._rfbTightVNC){if(this._sock.rQwait("TightVNC extended server init header",8,24+_))return!1;const e=this._sock.rQshift16(),t=this._sock.rQshift16(),s=this._sock.rQshift16();this._sock.rQskipBytes(2);const i=16*(e+t+s);if(this._sock.rQwait("TightVNC extended server init header",i,32+_))return!1;this._sock.rQskipBytes(16*e),this._sock.rQskipBytes(16*t),this._sock.rQskipBytes(16*s)}return r("Screen: "+e+"x"+t+", bpp: "+s+", depth: "+i+", bigEndian: "+n+", trueColor: "+a+", redMax: "+l+", greenMax: "+u+", blueMax: "+h+", redShift: "+d+", greenShift: "+f+", blueShift: "+p),this._setDesktopName(g),this._resize(e,t),this._viewOnly||this._keyboard.grab(),this._fbDepth=24,"Intel(r) AMT KVM"===this._fbName&&(o("Intel AMT KVM only supports 8/16 bit depths. Using low color mode."),this._fbDepth=8),tr.messages.pixelFormat(this._sock,this._fbDepth,!0),this._sendEncodings(),tr.messages.fbUpdateRequest(this._sock,!1,0,0,this._fbWidth,this._fbHeight),this._updateConnectionState("connected"),!0}_sendEncodings(){const e=[];e.push(La),24==this._fbDepth&&(e.push(Oa),e.push(Da),e.push(Pa),e.push(Ia)),e.push(Ta),e.push(Na+this._qualityLevel),e.push(qa+this._compressionLevel),e.push(Ba),e.push(Fa),e.push(Ua),e.push(Ha),e.push(Ga),e.push(Va),e.push(ja),e.push(za),e.push(Xa),24==this._fbDepth&&(e.push(Wa),e.push(Qa)),tr.messages.clientEncodings(this._sock,e)}_initMsg(){switch(this._rfbInitState){case"ProtocolVersion":return this._negotiateProtocolVersion();case"Security":return this._negotiateSecurity();case"Authentication":return this._negotiateAuthentication();case"SecurityResult":return this._handleSecurityResult();case"SecurityReason":return this._handleSecurityReason();case"ClientInitialisation":return this._sock.send([this._shared?1:0]),this._rfbInitState="ServerInitialisation",!0;case"ServerInitialisation":return this._negotiateServerInit();default:return this._fail("Unknown init state (state: "+this._rfbInitState+")")}}_handleSetColourMapMsg(){return a("SetColorMapEntries"),this._fail("Unexpected SetColorMapEntries message")}_handleServerCutText(){if(a("ServerCutText"),this._sock.rQwait("ServerCutText header",7,1))return!1;this._sock.rQskipBytes(3);let e=this._sock.rQshift32();if(e=i(e),this._sock.rQwait("ServerCutText content",Math.abs(e),8))return!1;if(e>=0){const t=this._sock.rQshiftStr(e);if(this._viewOnly)return!0;this.dispatchEvent(new CustomEvent("clipboard",{detail:{text:t}}))}else{e=Math.abs(e);const t=this._sock.rQshift32();let s=65535&t,i=4278190080&t;if(!!(i&1<<24)){this._clipboardServerCapabilitiesFormats={},this._clipboardServerCapabilitiesActions={};for(let e=0;e<=15;e++){let t=1<<e;s&t&&(this._clipboardServerCapabilitiesFormats[t]=!0,this._sock.rQshift32())}for(let e=24;e<=31;e++){let t=1<<e;this._clipboardServerCapabilitiesActions[t]=!!(i&t)}let e=[1<<24,1<<25,1<<26,1<<27,1<<28];tr.messages.extendedClipboardCaps(this._sock,e,{extendedClipboardFormatText:0})}else if(i===1<<25){if(this._viewOnly)return!0;null!=this._clipboardText&&this._clipboardServerCapabilitiesActions[1<<28]&&1&s&&tr.messages.extendedClipboardProvide(this._sock,[1],[this._clipboardText])}else if(i===1<<26){if(this._viewOnly)return!0;this._clipboardServerCapabilitiesActions[1<<27]&&(null!=this._clipboardText?tr.messages.extendedClipboardNotify(this._sock,[1]):tr.messages.extendedClipboardNotify(this._sock,[]))}else if(i===1<<27){if(this._viewOnly)return!0;this._clipboardServerCapabilitiesActions[1<<25]&&1&s&&tr.messages.extendedClipboardRequest(this._sock,[1])}else{if(i!==1<<28)return this._fail("Unexpected action in extended clipboard message: "+i);{if(this._viewOnly)return!0;if(!(1&s))return!0;this._clipboardText=null;let t=this._sock.rQshiftBytes(e-4),i=new $,n=null;i.setInput(t);for(let e=0;e<=15;e++){let t=1<<e;if(s&t){let e=0,s=i.inflate(4);e|=s[0]<<24,e|=s[1]<<16,e|=s[2]<<8,e|=s[3];let a=i.inflate(e);1===t&&(n=a)}}if(i.setInput(null),null!==n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);n=e,n=c(n),n.length>0&&"\0"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),n=n.replace("\r\n","\n"),this.dispatchEvent(new CustomEvent("clipboard",{detail:{text:n}}))}}}}return!0}_handleServerFenceMsg(){if(this._sock.rQwait("ServerFence header",8,1))return!1;this._sock.rQskipBytes(3);let e=this._sock.rQshift32(),t=this._sock.rQshift8();if(this._sock.rQwait("ServerFence payload",t,9))return!1;t>64&&(o("Bad payload length ("+t+") in fence response"),t=64);const s=this._sock.rQshiftStr(t);return this._supportsFence=!0,e&1<<31?(e&=3,tr.messages.clientFence(this._sock,e,s),!0):this._fail("Unexpected fence response")}_handleXvpMsg(){if(this._sock.rQwait("XVP version and message",3,1))return!1;this._sock.rQskipBytes(1);const e=this._sock.rQshift8(),t=this._sock.rQshift8();switch(t){case 0:l("XVP Operation Failed");break;case 1:this._rfbXvpVer=e,r("XVP extensions enabled (version "+this._rfbXvpVer+")"),this._setCapability("power",!0);break;default:this._fail("Illegal server XVP message (msg: "+t+")")}return!0}_normalMsg(){let e,t,s;switch(e=this._FBU.rects>0?0:this._sock.rQshift8(),e){case 0:return s=this._framebufferUpdate(),s&&!this._enabledContinuousUpdates&&tr.messages.fbUpdateRequest(this._sock,!0,0,0,this._fbWidth,this._fbHeight),s;case 1:return this._handleSetColourMapMsg();case 2:return a("Bell"),this.dispatchEvent(new CustomEvent("bell",{detail:{}})),!0;case 3:return this._handleServerCutText();case 150:return t=!this._supportsContinuousUpdates,this._supportsContinuousUpdates=!0,this._enabledContinuousUpdates=!1,t&&(this._enabledContinuousUpdates=!0,this._updateContinuousUpdates(),r("Enabling continuous updates.")),!0;case 248:return this._handleServerFenceMsg();case 250:return this._handleXvpMsg();default:return this._fail("Unexpected server message (type "+e+")"),a("sock.rQslice(0, 30): "+this._sock.rQslice(0,30)),!0}}_onFlush(){this._flushing=!1,this._sock.rQlen>0&&this._handleMessage()}_framebufferUpdate(){if(0===this._FBU.rects){if(this._sock.rQwait("FBU header",3,1))return!1;if(this._sock.rQskipBytes(1),this._FBU.rects=this._sock.rQshift16(),this._display.pending())return this._flushing=!0,this._display.flush(),!1}for(;this._FBU.rects>0;){if(null===this._FBU.encoding){if(this._sock.rQwait("rect header",12))return!1;const e=this._sock.rQshiftBytes(12);this._FBU.x=(e[0]<<8)+e[1],this._FBU.y=(e[2]<<8)+e[3],this._FBU.width=(e[4]<<8)+e[5],this._FBU.height=(e[6]<<8)+e[7],this._FBU.encoding=parseInt((e[8]<<24)+(e[9]<<16)+(e[10]<<8)+e[11],10)}if(!this._handleRect())return!1;this._FBU.rects--,this._FBU.encoding=null}return this._display.flip(),!0}_handleRect(){switch(this._FBU.encoding){case Fa:return this._FBU.rects=1,!0;case Wa:return this._handleVMwareCursor();case Qa:return this._handleCursor();case Ua:return this._qemuExtKeyEventSupported=!0,!0;case za:return this._handleDesktopName();case Ba:return this._resize(this._FBU.width,this._FBU.height),!0;case Ha:return this._handleExtendedDesktopSize();default:return this._handleDataRect()}}_handleVMwareCursor(){const e=this._FBU.x,t=this._FBU.y,s=this._FBU.width,i=this._FBU.height;if(this._sock.rQwait("VMware cursor encoding",1))return!1;const n=this._sock.rQshift8();let a;this._sock.rQshift8();if(0==n){const e=-256;if(a=new Array(s*i*4),this._sock.rQwait("VMware cursor classic encoding",s*i*4*2,2))return!1;let t=new Array(s*i);for(let e=0;e<s*i;e++)t[e]=this._sock.rQshift32();let n=new Array(s*i);for(let e=0;e<s*i;e++)n[e]=this._sock.rQshift32();for(let r=0;r<s*i;r++)if(0==t[r]){let e=n[r],t=e>>8&255,s=e>>16&255,i=e>>24&255;a[4*r]=t,a[4*r+1]=s,a[4*r+2]=i,a[4*r+3]=255}else(t[r]&e)==e?0==n[r]?(a[4*r]=0,a[4*r+1]=0,a[4*r+2]=0,a[4*r+3]=0):(n[r],a[4*r]=0,a[4*r+1]=0,a[4*r+2]=0,a[4*r+3]=255):(a[4*r]=0,a[4*r+1]=0,a[4*r+2]=0,a[4*r+3]=255)}else{if(1!=n)return o("The given cursor type is not supported: "+n+" given."),!1;if(this._sock.rQwait("VMware cursor alpha encoding",s*i*4,2))return!1;a=new Array(s*i*4);for(let e=0;e<s*i;e++){let t=this._sock.rQshift32();a[4*e]=t>>24&255,a[4*e+1]=t>>16&255,a[4*e+2]=t>>8&255,a[4*e+3]=255&t}}return this._updateCursor(a,e,t,s,i),!0}_handleCursor(){const e=this._FBU.x,t=this._FBU.y,s=this._FBU.width,i=this._FBU.height,n=s*i*4,a=Math.ceil(s/8)*i;let r=n+a;if(this._sock.rQwait("cursor encoding",r))return!1;const o=this._sock.rQshiftBytes(n),l=this._sock.rQshiftBytes(a);let c=new Uint8Array(s*i*4),u=0;for(let e=0;e<i;e++)for(let t=0;t<s;t++){let i=l[e*Math.ceil(s/8)+Math.floor(t/8)]<<t%8&128?255:0;c[u]=o[u+2],c[u+1]=o[u+1],c[u+2]=o[u],c[u+3]=i,u+=4}return this._updateCursor(c,e,t,s,i),!0}_handleDesktopName(){if(this._sock.rQwait("DesktopName",4))return!1;let e=this._sock.rQshift32();if(this._sock.rQwait("DesktopName",e,4))return!1;let t=this._sock.rQshiftStr(e);return t=c(t,!0),this._setDesktopName(t),!0}_handleExtendedDesktopSize(){if(this._sock.rQwait("ExtendedDesktopSize",4))return!1;const e=this._sock.rQpeek8();let t=4+16*e;if(this._sock.rQwait("ExtendedDesktopSize",t))return!1;const s=!this._supportsSetDesktopSize;this._supportsSetDesktopSize=!0,s&&this._requestRemoteResize(),this._sock.rQskipBytes(1),this._sock.rQskipBytes(3);for(let t=0;t<e;t+=1)0===t?(this._screenID=this._sock.rQshiftBytes(4),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._screenFlags=this._sock.rQshiftBytes(4)):this._sock.rQskipBytes(16);if(1===this._FBU.x&&0!==this._FBU.y){let e="";switch(this._FBU.y){case 1:e="Resize is administratively prohibited";break;case 2:e="Out of resources";break;case 3:e="Invalid screen layout";break;default:e="Unknown reason"}o("Server did not accept the resize request: "+e)}else this._resize(this._FBU.width,this._FBU.height);return!0}_handleDataRect(){let e=this._decoders[this._FBU.encoding];if(!e)return this._fail("Unsupported encoding (encoding: "+this._FBU.encoding+")"),!1;try{return e.decodeRect(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,this._sock,this._display,this._fbDepth)}catch(e){return this._fail("Error decoding rect: "+e),!1}}_updateContinuousUpdates(){this._enabledContinuousUpdates&&tr.messages.enableContinuousUpdates(this._sock,!0,0,0,this._fbWidth,this._fbHeight)}_resize(e,t){this._fbWidth=e,this._fbHeight=t,this._display.resize(this._fbWidth,this._fbHeight),this._updateClip(),this._updateScale(),this._updateContinuousUpdates()}_xvpOp(e,t){this._rfbXvpVer<e||(r("Sending XVP operation "+t+" (version "+e+")"),tr.messages.xvpOp(this._sock,e,t))}_updateCursor(e,t,s,i,n){this._cursorImage={rgbaPixels:e,hotx:t,hoty:s,w:i,h:n},this._refreshCursor()}_shouldShowDotCursor(){if(!this._showDotCursor)return!1;for(let e=3;e<this._cursorImage.rgbaPixels.length;e+=4)if(this._cursorImage.rgbaPixels[e])return!1;return!0}_refreshCursor(){if("connecting"!==this._rfbConnectionState&&"connected"!==this._rfbConnectionState)return;const e=this._shouldShowDotCursor()?tr.cursors.dot:this._cursorImage;this._cursor.change(e.rgbaPixels,e.hotx,e.hoty,e.w,e.h)}static genDES(e,t){const s=e.split("").map(e=>e.charCodeAt(0));return new Ra(s).encrypt(t)}}tr.messages={keyEvent(e,t,s){const i=e._sQ,n=e._sQlen;i[n]=4,i[n+1]=s,i[n+2]=0,i[n+3]=0,i[n+4]=t>>24,i[n+5]=t>>16,i[n+6]=t>>8,i[n+7]=t,e._sQlen+=8,e.flush()},QEMUExtendedKeyEvent(e,t,s,i){const n=e._sQ,a=e._sQlen;n[a]=255,n[a+1]=0,n[a+2]=s>>8,n[a+3]=s,n[a+4]=t>>24,n[a+5]=t>>16,n[a+6]=t>>8,n[a+7]=t;const r=function(e){const t=255&i;return 224===i>>8&&t<127?128|t:e}(i);n[a+8]=r>>24,n[a+9]=r>>16,n[a+10]=r>>8,n[a+11]=r,e._sQlen+=12,e.flush()},pointerEvent(e,t,s,i){const n=e._sQ,a=e._sQlen;n[a]=5,n[a+1]=i,n[a+2]=t>>8,n[a+3]=t,n[a+4]=s>>8,n[a+5]=s,e._sQlen+=6,e.flush()},_buildExtendedClipboardFlags(e,t){let s=new Uint8Array(4),i=0,n=0;for(let t=0;t<e.length;t++)n|=e[t];for(let e=0;e<t.length;e++)i|=t[e];return s[0]=n>>24,s[1]=0,s[2]=0,s[3]=i,s},extendedClipboardProvide(e,t,s){let i=new Je,n=[];for(let e=0;e<t.length;e++){if(1!=t[e])throw new Error("Unsupported extended clipboard format for Provide message.");s[e]=s[e].replace(/\r\n|\r|\n/gm,"\r\n");let i=u(s[e]+"\0");n.push(i.length>>24&255,i.length>>16&255,i.length>>8&255,255&i.length);for(let e=0;e<i.length;e++)n.push(i.charCodeAt(e))}let a=i.deflate(new Uint8Array(n)),r=new Uint8Array(4+a.length);r.set(tr.messages._buildExtendedClipboardFlags([1<<28],t)),r.set(a,4),tr.messages.clientCutText(e,r,!0)},extendedClipboardNotify(e,t){let s=tr.messages._buildExtendedClipboardFlags([1<<27],t);tr.messages.clientCutText(e,s,!0)},extendedClipboardRequest(e,t){let s=tr.messages._buildExtendedClipboardFlags([1<<25],t);tr.messages.clientCutText(e,s,!0)},extendedClipboardCaps(e,t,s){let i=Object.keys(s),n=new Uint8Array(4+4*i.length);i.map(e=>parseInt(e)),i.sort((e,t)=>e-t),n.set(tr.messages._buildExtendedClipboardFlags(t,[]));let a=4;for(let e=0;e<i.length;e++)n[a]=s[i[e]]>>24,n[a+1]=s[i[e]]>>16,n[a+2]=s[i[e]]>>8,n[a+3]=s[i[e]]>>0,a+=4,n[3]|=1<<i[e];tr.messages.clientCutText(e,n,!0)},clientCutText(e,t,s=!1){const i=e._sQ,n=e._sQlen;let a;i[n]=6,i[n+1]=0,i[n+2]=0,i[n+3]=0,a=s?-t.length>>>0:t.length,i[n+4]=a>>24,i[n+5]=a>>16,i[n+6]=a>>8,i[n+7]=a,e._sQlen+=8;let r=0,o=t.length;for(;o>0;){let s=Math.min(o,e._sQbufferSize-e._sQlen);for(let n=0;n<s;n++)i[e._sQlen+n]=t[r+n];e._sQlen+=s,e.flush(),o-=s,r+=s}},setDesktopSize(e,t,s,i,n){const a=e._sQ,r=e._sQlen;a[r]=251,a[r+1]=0,a[r+2]=t>>8,a[r+3]=t,a[r+4]=s>>8,a[r+5]=s,a[r+6]=1,a[r+7]=0,a[r+8]=i>>24,a[r+9]=i>>16,a[r+10]=i>>8,a[r+11]=i,a[r+12]=0,a[r+13]=0,a[r+14]=0,a[r+15]=0,a[r+16]=t>>8,a[r+17]=t,a[r+18]=s>>8,a[r+19]=s,a[r+20]=n>>24,a[r+21]=n>>16,a[r+22]=n>>8,a[r+23]=n,e._sQlen+=24,e.flush()},clientFence(e,t,s){const i=e._sQ,n=e._sQlen;i[n]=248,i[n+1]=0,i[n+2]=0,i[n+3]=0,i[n+4]=t>>24,i[n+5]=t>>16,i[n+6]=t>>8,i[n+7]=t;const a=s.length;i[n+8]=a;for(let e=0;e<a;e++)i[n+9+e]=s.charCodeAt(e);e._sQlen+=9+a,e.flush()},enableContinuousUpdates(e,t,s,i,n,a){const r=e._sQ,o=e._sQlen;r[o]=150,r[o+1]=t,r[o+2]=s>>8,r[o+3]=s,r[o+4]=i>>8,r[o+5]=i,r[o+6]=n>>8,r[o+7]=n,r[o+8]=a>>8,r[o+9]=a,e._sQlen+=10,e.flush()},pixelFormat(e,t,s){const i=e._sQ,n=e._sQlen;let a;a=t>16?32:t>8?16:8;const r=Math.floor(t/3);i[n]=0,i[n+1]=0,i[n+2]=0,i[n+3]=0,i[n+4]=a,i[n+5]=t,i[n+6]=0,i[n+7]=s?1:0,i[n+8]=0,i[n+9]=(1<<r)-1,i[n+10]=0,i[n+11]=(1<<r)-1,i[n+12]=0,i[n+13]=(1<<r)-1,i[n+14]=0*r,i[n+15]=1*r,i[n+16]=2*r,i[n+17]=0,i[n+18]=0,i[n+19]=0,e._sQlen+=20,e.flush()},clientEncodings(e,t){const s=e._sQ,i=e._sQlen;s[i]=2,s[i+1]=0,s[i+2]=t.length>>8,s[i+3]=t.length;let n=i+4;for(let e=0;e<t.length;e++){const i=t[e];s[n]=i>>24,s[n+1]=i>>16,s[n+2]=i>>8,s[n+3]=i,n+=4}e._sQlen+=n-i,e.flush()},fbUpdateRequest(e,t,s,i,n,a){const r=e._sQ,o=e._sQlen;void 0===s&&(s=0),void 0===i&&(i=0),r[o]=3,r[o+1]=t?1:0,r[o+2]=s>>8&255,r[o+3]=255&s,r[o+4]=i>>8&255,r[o+5]=255&i,r[o+6]=n>>8&255,r[o+7]=255&n,r[o+8]=a>>8&255,r[o+9]=255&a,e._sQlen+=10,e.flush()},xvpOp(e,t,s){const i=e._sQ,n=e._sQlen;i[n]=250,i[n+1]=0,i[n+2]=t,i[n+3]=s,e._sQlen+=4,e.flush()}},tr.cursors={none:{rgbaPixels:new Uint8Array,w:0,h:0,hotx:0,hoty:0},dot:{rgbaPixels:new Uint8Array([255,255,255,255,0,0,0,255,255,255,255,255,0,0,0,255,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,255,255,255,255,255]),w:3,h:3,hotx:1,hoty:1}}},76:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userLookup=t.displayMessage=t.screenshot=t.play=t.lookupUsers=t.cursorColor=t.recModalOpen=t.recorderReady=t.screenshotReady=t.playing=t.recording=t.loading=t.urlSet=t.sidebarToggle=t.recordingsChooser=t.sessionSettings=void 0;const i=s(32),n=s(260),a=s(109),r=s(61),o=s(163);t.sessionSettings=r.createSwitchAction("SESSION_SETTINGS",i.__),t.recordingsChooser=r.createSwitchAction("RECORDINGS_CHOOSER",i.__),t.sidebarToggle=r.createSwitchAction("SIDEBAR_TOGGLE",i.__),t.urlSet=r.createAction("URL_SET",i.identity(i.__),i.always(null)),t.loading=r.createSwitchAction("LOADING",i.__),t.recording=r.createSwitchAction("RECORDING",i.__),t.playing=r.createSwitchAction("PLAYING",i.__),t.screenshotReady=r.createAction("SCREENSHOT_READY",i.identity(i.__),i.always(null)),t.recorderReady=r.createSwitchAction("RECORDER_READY",i.__),t.recModalOpen=r.createSwitchAction("REC_MODAL_OPEN",i.__),t.cursorColor=r.createAction("CURSOR_COLOR",i.identity(i.__),i.always(null)),t.lookupUsers=r.createAction("LOOKUP_USERS",i.identity(i.__),i.always(null)),t.play=function(e,s){return(n,r)=>{const o=i.path(["user"],r());a.BrokerApi.getInstance((null==o?void 0:o.token)||null).play(e,s).then(e=>(n(t.playing(!0)),e)).catch(e=>{n(t.playing(!1))})}},t.screenshot=function(e,s){return(n,r)=>{const l=i.path(["user"],r());a.BrokerApi.getInstance(l.token).screenshot(e,s).then(s=>(n(t.screenshotReady(s)),n(o.updateSession(e,{screenshot:s})),s)).catch(e=>{n(t.screenshotReady(null))})}},t.displayMessage=function(e){return t=>{n.MessagerSubject.next(e)}};let l=!1;t.userLookup=function(e){return(s,n)=>{if(!l&&e){l=!0;const r=i.path(["user"],n());a.BrokerApi.getInstance(r.token).userLookup(e).then(e=>(s(t.lookupUsers(e)),l=!1,e)).catch(e=>{throw l=!1,e})}}}}});